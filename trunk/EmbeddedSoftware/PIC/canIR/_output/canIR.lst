MP2COD 4.02, COFF to COD File Converter
Copyright (c) 2006 Microchip Technology Inc.
Listing File Generated: Sun Feb 25 21:14:22 2007


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /*********************************************************************           F:\MCP\projects\CAN\canIR\Source\Main.c
                                            *                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                            *                  Main application                                             F:\MCP\projects\CAN\canIR\Source\Main.c
                                            *                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                            *********************************************************************           F:\MCP\projects\CAN\canIR\Source\Main.c
                                            * FileName:        $HeadURL: http://svn.arune.se/svn/HomeAutomation/trunk/EmbeddedSoftware/PIC/canIR/Source/Main.c $ F:\MCP\projects\CAN\canIR\Source\Main.c
                                            * Last changed:	$LastChangedDate: 2007-01-28 14:58:11 +0100 (s√∂, 28 jan 2007) $ F:\MCP\projects\CAN\canIR\Source\Main.c
                                            * By:				$LastChangedBy: johboh $                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                            * Revision:		$Revision: 260 $                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                            ********************************************************************/           F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #include <compiler.h>                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #include <stackTasks.h>                                                          F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #include <Tick.h>                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #include <funcdefs.h>                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #include <CAN.h>                                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #include "..\canBoot\Include\boot.h"                                             F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #ifdef USE_IREC                                                                  F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	#include <IRec.h>                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #endif                                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           static void mainInit(void);                                                      F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003b28   cfd9     MOVFF     0xfd9,0xfe6    void main()                                                                      F:\MCP\projects\CAN\canIR\Source\Main.c
003b2a   ffe6                                                                                                               
003b2c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003b2e   ffd9                                                                                                               
003b30   0e11     MOVLW     0x11                                                                                            
003b32   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	static TICK t = 0;                                                              F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	CAN_PACKET outCp;                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	// Inits                                                                        F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003b34   d889     RCALL     0x3c48         	mainInit();                                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
003b36   ec2e     CALL      0x305c,0x0     	canInit();                                                                      F:\MCP\projects\CAN\canIR\Source\Main.c
003b38   f018                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	#ifdef USE_IREC                                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
003b3a   ec32     CALL      0x3664,0x0     		irecInit();                                                                    F:\MCP\projects\CAN\canIR\Source\Main.c
003b3c   f01b                                                                                                               
                                           	#endif                                                                          F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003b86   d7db     BRA       0x3b3e         	while(1)                                                                        F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	{                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           		static TICK t = 0;                                                             F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003b3e   ec46     CALL      0x3e8c,0x0     		if ((tickGet()-t)>TICK_SECOND)                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
003b40   f01f                                                                                                               
003b42   0100     MOVLB     0x0                                                                                             
003b44   518d     MOVF      0x8d,0x0,0x1                                                                                    
003b46   5c04     SUBWF     0x4,0x0,0x0                                                                                     
003b48   6e0b     MOVWF     0xb,0x0                                                                                         
003b4a   518e     MOVF      0x8e,0x0,0x1                                                                                    
003b4c   5805     SUBWFB    0x5,0x0,0x0                                                                                     
003b4e   6e0c     MOVWF     0xc,0x0                                                                                         
003b50   518f     MOVF      0x8f,0x0,0x1                                                                                    
003b52   5806     SUBWFB    0x6,0x0,0x0                                                                                     
003b54   6e0d     MOVWF     0xd,0x0                                                                                         
003b56   5190     MOVF      0x90,0x0,0x1                                                                                    
003b58   5807     SUBWFB    0x7,0x0,0x0                                                                                     
003b5a   6e0e     MOVWF     0xe,0x0                                                                                         
003b5c   80d8     BSF       0xd8,0x0,0x0                                                                                    
003b5e   0e64     MOVLW     0x64                                                                                            
003b60   540b     SUBFWB    0xb,0x0,0x0                                                                                     
003b62   0e00     MOVLW     0x0                                                                                             
003b64   540c     SUBFWB    0xc,0x0,0x0                                                                                     
003b66   0e00     MOVLW     0x0                                                                                             
003b68   540d     SUBFWB    0xd,0x0,0x0                                                                                     
003b6a   0e00     MOVLW     0x0                                                                                             
003b6c   540e     SUBFWB    0xe,0x0,0x0                                                                                     
003b6e   e20b     BC        0x3b86                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\Main.c
003b70   7282     BTG       0x82,0x1,0x0   			LED0_IO=~LED0_IO;                                                             F:\MCP\projects\CAN\canIR\Source\Main.c
003b72   ec46     CALL      0x3e8c,0x0     			t = tickGet();                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003b74   f01f                                                                                                               
003b76   c004     MOVFF     0x4,0x8d                                                                                        
003b78   f08d                                                                                                               
003b7a   c005     MOVFF     0x5,0x8e                                                                                        
003b7c   f08e                                                                                                               
003b7e   c006     MOVFF     0x6,0x8f                                                                                        
003b80   f08f                                                                                                               
003b82   c007     MOVFF     0x7,0x90                                                                                        
003b84   f090                                                                                                               
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	}                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
003b88   0e11     MOVLW     0x11           }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003b8a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003b8c   e202     BC        0x3b92                                                                                          
003b8e   6ae1     CLRF      0xe1,0x0                                                                                        
003b90   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b92   6ee1     MOVWF     0xe1,0x0                                                                                        
003b94   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b96   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003b98   ffd9                                                                                                               
003b9a   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma interrupt high_isr                                                       F:\MCP\projects\CAN\canIR\Source\Main.c
003b9c   cfda     MOVFF     0xfda,0xfe4    void high_isr(void)                                                              F:\MCP\projects\CAN\canIR\Source\Main.c
003b9e   ffe4                                                                                                               
003ba0   cfe2     MOVFF     0xfe2,0xfda                                                                                     
003ba2   ffda                                                                                                               
003ba4   cfe9     MOVFF     0xfe9,0xfe4                                                                                     
003ba6   ffe4                                                                                                               
003ba8   cfea     MOVFF     0xfea,0xfe4                                                                                     
003baa   ffe4                                                                                                               
003bac   cff6     MOVFF     0xff6,0xfe4                                                                                     
003bae   ffe4                                                                                                               
003bb0   cff7     MOVFF     0xff7,0xfe4                                                                                     
003bb2   ffe4                                                                                                               
003bb4   cff5     MOVFF     0xff5,0xfe4                                                                                     
003bb6   ffe4                                                                                                               
003bb8   cff3     MOVFF     0xff3,0xfe4                                                                                     
003bba   ffe4                                                                                                               
003bbc   cff4     MOVFF     0xff4,0xfe4                                                                                     
003bbe   ffe4                                                                                                               
003bc0   cffa     MOVFF     0xffa,0xfe4                                                                                     
003bc2   ffe4                                                                                                               
003bc4   ee00     LFSR      0x0,0x0                                                                                         
003bc6   f000                                                                                                               
003bc8   0e0b     MOVLW     0xb                                                                                             
003bca   04e8     DECF      0xe8,0x0,0x0                                                                                    
003bcc   e303     BNC       0x3bd4                                                                                          
003bce   cfee     MOVFF     0xfee,0xfe4                                                                                     
003bd0   ffe4                                                                                                               
003bd2   d7fb     BRA       0x3bca                                                                                          
003bd4   ee00     LFSR      0x0,0xb                                                                                         
003bd6   f00b                                                                                                               
003bd8   0e0a     MOVLW     0xa                                                                                             
003bda   04e8     DECF      0xe8,0x0,0x0                                                                                    
003bdc   e303     BNC       0x3be4                                                                                          
003bde   cfee     MOVFF     0xfee,0xfe4                                                                                     
003be0   ffe4                                                                                                               
003be2   d7fb     BRA       0x3bda                                                                                          
003be4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003be6   ec95     CALL      0x312a,0x0     	canISR();                                                                       F:\MCP\projects\CAN\canIR\Source\Main.c
003be8   f018                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	#ifdef USE_IREC                                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
003bea   ec3d     CALL      0x367a,0x0     		irecISR();                                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
003bec   f01b                                                                                                               
                                           	#endif                                                                          F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003bee   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003bf0   ee00     LFSR      0x0,0x14                                                                                        
003bf2   f014                                                                                                               
003bf4   0e0a     MOVLW     0xa                                                                                             
003bf6   04e8     DECF      0xe8,0x0,0x0                                                                                    
003bf8   e303     BNC       0x3c00                                                                                          
003bfa   cfe5     MOVFF     0xfe5,0xfed                                                                                     
003bfc   ffed                                                                                                               
003bfe   d7fb     BRA       0x3bf6                                                                                          
003c00   ee00     LFSR      0x0,0xa                                                                                         
003c02   f00a                                                                                                               
003c04   0e0b     MOVLW     0xb                                                                                             
003c06   04e8     DECF      0xe8,0x0,0x0                                                                                    
003c08   e303     BNC       0x3c10                                                                                          
003c0a   cfe5     MOVFF     0xfe5,0xfed                                                                                     
003c0c   ffed                                                                                                               
003c0e   d7fb     BRA       0x3c06                                                                                          
003c10   cfe5     MOVFF     0xfe5,0xffa                                                                                     
003c12   fffa                                                                                                               
003c14   cfe5     MOVFF     0xfe5,0xff4                                                                                     
003c16   fff4                                                                                                               
003c18   cfe5     MOVFF     0xfe5,0xff3                                                                                     
003c1a   fff3                                                                                                               
003c1c   cfe5     MOVFF     0xfe5,0xff5                                                                                     
003c1e   fff5                                                                                                               
003c20   cfe5     MOVFF     0xfe5,0xff7                                                                                     
003c22   fff7                                                                                                               
003c24   cfe5     MOVFF     0xfe5,0xff6                                                                                     
003c26   fff6                                                                                                               
003c28   cfe5     MOVFF     0xfe5,0xfea                                                                                     
003c2a   ffea                                                                                                               
003c2c   cfe5     MOVFF     0xfe5,0xfe9                                                                                     
003c2e   ffe9                                                                                                               
003c30   cfe5     MOVFF     0xfe5,0xfda                                                                                     
003c32   ffda                                                                                                               
003c34   0011     RETFIE    0x1                                                                                             
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma interrupt low_isr                                                        F:\MCP\projects\CAN\canIR\Source\Main.c
003c36   cfda     MOVFF     0xfda,0xfe4    void low_isr(void)                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
003c38   ffe4                                                                                                               
003c3a   cfe2     MOVFF     0xfe2,0xfda                                                                                     
003c3c   ffda                                                                                                               
003c3e   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003c40   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003c42   cfe5     MOVFF     0xfe5,0xfda                                                                                     
003c44   ffda                                                                                                               
003c46   0011     RETFIE    0x1                                                                                             
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           /*                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Function: mainInit                                                             F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Pre-conditions: none                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Affects: Se code                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
                                           */                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           void mainInit()                                                                  F:\MCP\projects\CAN\canIR\Source\Main.c
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003c48   9294     BCF       0x94,0x1,0x0   	LED0_TRIS=0;	                                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	// Enable Interrupts                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003c4a   8ef2     BSF       0xf2,0x7,0x0       INTCONbits.GIEH = 1;                                                         F:\MCP\projects\CAN\canIR\Source\Main.c
003c4c   8cf2     BSF       0xf2,0x6,0x0       INTCONbits.GIEL = 1;                                                         F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	// Enable interrupt prirority                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
003c4e   8ed0     BSF       0xd0,0x7,0x0   	RCONbits.IPEN=1;                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003c50   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           /*                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Function: canParse                                                             F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Input:	Received can message                                                    F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Pre-conditions: canInit and received packet.                                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Affects: Sensors/actuators/etc. See code.                                      F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
                                           */                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003c52   cfd9     MOVFF     0xfd9,0xfe6    void canParse(CAN_PACKET cp)                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
003c54   ffe6                                                                                                               
003c56   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003c58   ffd9                                                                                                               
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003c5a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003c5c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003c5e   ffd9                                                                                                               
003c60   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           /*                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Function: irecParse                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Input:	Received IR message                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Pre-conditions: irecInit                                                       F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Affects: Sensors/actuators/etc. See code.                                      F:\MCP\projects\CAN\canIR\Source\Main.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\canIR\Source\Main.c
                                           */                                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #ifdef USE_IREC                                                                  F:\MCP\projects\CAN\canIR\Source\Main.c
003c62   cfd9     MOVFF     0xfd9,0xfe6    void irecParse(IR_TYPE type, BYTE toggle, BYTE addr, BYTE data)                  F:\MCP\projects\CAN\canIR\Source\Main.c
003c64   ffe6                                                                                                               
003c66   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003c68   ffd9                                                                                                               
003c6a   0e11     MOVLW     0x11                                                                                            
003c6c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           	CAN_PACKET outCp;                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003c6e   0e01     MOVLW     0x1            	outCp.type 		= ptPGM;                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
003c70   6edf     MOVWF     0xdf,0x0                                                                                        
003c72   52de     MOVF      0xde,0x1,0x0   	outCp.pgm.class = pcSENSOR;                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
003c74   6edd     MOVWF     0xdd,0x0                                                                                        
003c76   0e02     MOVLW     0x2            	outCp.pgm.id 	= pstIR;                                                          F:\MCP\projects\CAN\canIR\Source\Main.c
003c78   6adb     CLRF      0xdb,0x0                                                                                        
003c7a   0e03     MOVLW     0x3                                                                                             
003c7c   6adb     CLRF      0xdb,0x0                                                                                        
003c7e   0e04     MOVLW     0x4            	outCp.length 	= 4;                                                              F:\MCP\projects\CAN\canIR\Source\Main.c
003c80   6ef3     MOVWF     0xf3,0x0                                                                                        
003c82   0e08     MOVLW     0x8                                                                                             
003c84   cff3     MOVFF     0xff3,0xfdb                                                                                     
003c86   ffdb                                                                                                               
003c88   0efe     MOVLW     0xfe           	outCp.data[3]	= type;                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
003c8a   50db     MOVF      0xdb,0x0,0x0                                                                                    
003c8c   6ee7     MOVWF     0xe7,0x0                                                                                        
003c8e   0e0c     MOVLW     0xc                                                                                             
003c90   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003c92   ffdb                                                                                                               
003c94   0efd     MOVLW     0xfd           	outCp.data[2]	= toggle;                                                         F:\MCP\projects\CAN\canIR\Source\Main.c
003c96   50db     MOVF      0xdb,0x0,0x0                                                                                    
003c98   6ee7     MOVWF     0xe7,0x0                                                                                        
003c9a   0e0b     MOVLW     0xb                                                                                             
003c9c   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003c9e   ffdb                                                                                                               
003ca0   0efc     MOVLW     0xfc           	outCp.data[1]	= addr;                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
003ca2   50db     MOVF      0xdb,0x0,0x0                                                                                    
003ca4   6ee7     MOVWF     0xe7,0x0                                                                                        
003ca6   0e0a     MOVLW     0xa                                                                                             
003ca8   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003caa   ffdb                                                                                                               
003cac   0efb     MOVLW     0xfb           	outCp.data[0]	= data;                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
003cae   50db     MOVF      0xdb,0x0,0x0                                                                                    
003cb0   6ee7     MOVWF     0xe7,0x0                                                                                        
003cb2   0e09     MOVLW     0x9                                                                                             
003cb4   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003cb6   ffdb                                                                                                               
003cb8   0e02     MOVLW     0x2            	while(!canSendMessage(outCp,PRIO_HIGH));                                        F:\MCP\projects\CAN\canIR\Source\Main.c
003cba   6ee6     MOVWF     0xe6,0x0                                                                                        
003cbc   cfd9     MOVFF     0xfd9,0xfe9                                                                                     
003cbe   ffe9                                                                                                               
003cc0   cfda     MOVFF     0xfda,0xfea                                                                                     
003cc2   ffea                                                                                                               
003cc4   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cc6   ffe6                                                                                                               
003cc8   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cca   ffe6                                                                                                               
003ccc   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cce   ffe6                                                                                                               
003cd0   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cd2   ffe6                                                                                                               
003cd4   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cd6   ffe6                                                                                                               
003cd8   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cda   ffe6                                                                                                               
003cdc   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cde   ffe6                                                                                                               
003ce0   cfee     MOVFF     0xfee,0xfe6                                                                                     
003ce2   ffe6                                                                                                               
003ce4   cfee     MOVFF     0xfee,0xfe6                                                                                     
003ce6   ffe6                                                                                                               
003ce8   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cea   ffe6                                                                                                               
003cec   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cee   ffe6                                                                                                               
003cf0   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cf2   ffe6                                                                                                               
003cf4   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cf6   ffe6                                                                                                               
003cf8   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cfa   ffe6                                                                                                               
003cfc   cfee     MOVFF     0xfee,0xfe6                                                                                     
003cfe   ffe6                                                                                                               
003d00   cfee     MOVFF     0xfee,0xfe6                                                                                     
003d02   ffe6                                                                                                               
003d04   cfee     MOVFF     0xfee,0xfe6                                                                                     
003d06   ffe6                                                                                                               
003d08   ec55     CALL      0x34aa,0x0                                                                                      
003d0a   f01a                                                                                                               
003d0c   6e0b     MOVWF     0xb,0x0                                                                                         
003d0e   0e12     MOVLW     0x12                                                                                            
003d10   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
003d12   500b     MOVF      0xb,0x0,0x0                                                                                     
003d14   0900     IORLW     0x0                                                                                             
003d16   e101     BNZ       0x3d1a                                                                                          
003d18   d7cf     BRA       0x3cb8                                                                                          
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
003d1a   0e11     MOVLW     0x11           }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003d1c   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003d1e   e202     BC        0x3d24                                                                                          
003d20   6ae1     CLRF      0xe1,0x0                                                                                        
003d22   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d24   6ee1     MOVWF     0xe1,0x0                                                                                        
003d26   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d28   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003d2a   ffd9                                                                                                               
003d2c   0012     RETURN    0x0                                                                                             
                                           #endif                                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           // Below are mandantory when using bootloader                                    F:\MCP\projects\CAN\canIR\Source\Main.c
                                           // define DEBUG_MODE to use without bootloader.                                  F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #ifndef DEBUG_MODE                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           extern void _startup (void);                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = RM_RESET_VECTOR                           F:\MCP\projects\CAN\canIR\Source\Main.c
                                           void _reset (void)                                                               F:\MCP\projects\CAN\canIR\Source\Main.c
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003000   ef5e     GOTO      0x3ebc             _asm goto _startup _endasm                                                   F:\MCP\projects\CAN\canIR\Source\Main.c
003002   f01f                                                                                                               
003004   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma code                                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #endif                                                                           F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma code _HIGH_INTERRUPT_VECTOR = RM_HIGH_INTERRUPT_VECTOR                   F:\MCP\projects\CAN\canIR\Source\Main.c
                                           void _high_ISR (void)                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003008   efce     GOTO      0x3b9c         	_asm GOTO high_isr _endasm                                                      F:\MCP\projects\CAN\canIR\Source\Main.c
00300a   f01d                                                                                                               
00300c   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma code                                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma code _LOW_INTERRUPT_VECTOR = RM_LOW_INTERRUPT_VECTOR                     F:\MCP\projects\CAN\canIR\Source\Main.c
                                           void _low_ISR (void)                                                             F:\MCP\projects\CAN\canIR\Source\Main.c
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
003018   ef1b     GOTO      0x3c36             _asm GOTO low_isr _endasm                                                    F:\MCP\projects\CAN\canIR\Source\Main.c
00301a   f01e                                                                                                               
00301c   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canIR\Source\Main.c
                                           #pragma code                                                                     F:\MCP\projects\CAN\canIR\Source\Main.c
                                           /*********************************************************************           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            *                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            *                  Ticker module service                                        F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            *                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            *********************************************************************           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            * FileName:        $HeadURL: http://svn.arune.se/svn/HomeAutomation/trunk/EmbeddedSoftware/PIC/canBase/Source/Tick.c $ F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            * Last changed:	$LastChangedDate: 2006-11-14 10:55:38 +0100 (ti, 14 nov 2006) $ F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            * By:				$LastChangedBy: johboh $                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            * Revision:		$Revision: 86 $                                                    F:\MCP\projects\CAN\canBase\Source\Tick.c
                                            ********************************************************************/           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #define TICK_INCLUDE                                                             F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #include <Tick.h>                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #include <Compiler.h>                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #define TICK_TEMP_VALUE_1 ((INSTR_FREQ) / (TICKS_PER_SECOND * TICK_PRESCALE_VALUE)) F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #if TICK_TEMP_VALUE_1 > 60000                                                    F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #error TICK_PER_SECOND value cannot be programmed with current CLOCK_FREQ        F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #error Either lower TICK_PER_SECOND or manually configure the Timer              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #endif                                                                           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #define TICK_TEMP_VALUE         (65535 - TICK_TEMP_VALUE_1)                      F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #define TICK_COUNTER_HIGH       ((TICK_TEMP_VALUE >> 8) & 0xff)                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #define TICK_COUNTER_LOW        (TICK_TEMP_VALUE & 0xff)                         F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #if (TICK_PRESCALE_VALUE == 2)                                                   F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (0)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 4 )                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (1)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 8 )                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (2)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 16 )                                              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (3)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 32 )                                              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (4)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 64 )                                              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (5)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 128 )                                             F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (6)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #elif ( TICK_PRESCALE_VALUE == 256 )                                             F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #define TIMER_PRESCALE  (7)                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #else                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               #error Invalid TICK_PRESCALE_VALUE specified.                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #endif                                                                           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           TICK TickCount = 0;	// 10ms/unit                                                 F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Function: TickInit                                                             F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Output: Tick manager is initialized.                                           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Pre-conditions: TickInit                                                       F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Affects: none                                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Depends: none                                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           #define PERIOD (INSTR_FREQ/256/1000)*TICK_PERIOD_MS                              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           void tickInit(void)                                                              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               // Start the timer.                                                          F:\MCP\projects\CAN\canBase\Source\Tick.c
003e78   0e79     MOVLW     0x79               TMR0L = TICK_COUNTER_LOW;                                                    F:\MCP\projects\CAN\canBase\Source\Tick.c
003e7a   6ed6     MOVWF     0xd6,0x0                                                                                        
003e7c   0efe     MOVLW     0xfe               TMR0H = TICK_COUNTER_HIGH;                                                   F:\MCP\projects\CAN\canBase\Source\Tick.c
003e7e   6ed7     MOVWF     0xd7,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               // 16-BIT, internal timer, PSA set to 1:256                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
003e80   0e07     MOVLW     0x7                T0CON = 0b00000000 | TIMER_PRESCALE;                                         F:\MCP\projects\CAN\canBase\Source\Tick.c
003e82   6ed5     MOVWF     0xd5,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               // Start the timer.                                                          F:\MCP\projects\CAN\canBase\Source\Tick.c
003e84   8ed5     BSF       0xd5,0x7,0x0       T0CONbits.TMR0ON = 1;                                                        F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
003e86   84f2     BSF       0xf2,0x2,0x0       INTCONbits.TMR0IF = 1;                                                       F:\MCP\projects\CAN\canBase\Source\Tick.c
003e88   8af2     BSF       0xf2,0x5,0x0       INTCONbits.TMR0IE = 1;                                                       F:\MCP\projects\CAN\canBase\Source\Tick.c
003e8a   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Function: TickGet                                                              F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Output: Current tick value is given, 1 tick represents approximately 10ms      F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Pre-conditions: TickInit                                                       F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Affects: none                                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Depends: none                                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           TICK tickGet(void)                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
003e8c   c091     MOVFF     0x91,0x4           return TickCount;                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
003e8e   f004                                                                                                               
003e90   c092     MOVFF     0x92,0x5                                                                                        
003e92   f005                                                                                                               
003e94   c093     MOVFF     0x93,0x6                                                                                        
003e96   f006                                                                                                               
003e98   c094     MOVFF     0x94,0x7                                                                                        
003e9a   f007                                                                                                               
003e9c   d000     BRA       0x3e9e                                                                                          
003e9e   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Function: tickUpdate                                                           F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Pre-conditions: TickInit                                                       F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Affects: none                                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           *	Depends: none                                                                  F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           void tickUpdate(void)                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
003ea0   a4f2     BTFSS     0xf2,0x2,0x0       if(INTCONbits.TMR0IF)                                                        F:\MCP\projects\CAN\canBase\Source\Tick.c
003ea2   d00b     BRA       0x3eba                                                                                          
                                               {                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
003ea4   0efe     MOVLW     0xfe                   TMR0H = TICK_COUNTER_HIGH;                                               F:\MCP\projects\CAN\canBase\Source\Tick.c
003ea6   6ed7     MOVWF     0xd7,0x0                                                                                        
003ea8   0e79     MOVLW     0x79                   TMR0L = TICK_COUNTER_LOW;                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
003eaa   6ed6     MOVWF     0xd6,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
003eac   0100     MOVLB     0x0                    TickCount++;                                                             F:\MCP\projects\CAN\canBase\Source\Tick.c
003eae   2b91     INCF      0x91,0x1,0x1                                                                                    
003eb0   0e00     MOVLW     0x0                                                                                             
003eb2   2392     ADDWFC    0x92,0x1,0x1                                                                                    
003eb4   2393     ADDWFC    0x93,0x1,0x1                                                                                    
003eb6   2394     ADDWFC    0x94,0x1,0x1                                                                                    
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
003eb8   94f2     BCF       0xf2,0x2,0x0           INTCONbits.TMR0IF = 0;                                                   F:\MCP\projects\CAN\canBase\Source\Tick.c
                                               }                                                                            F:\MCP\projects\CAN\canBase\Source\Tick.c
003eba   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canBase\Source\Tick.c
                                           /*********************************************************************           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            *                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            *                  CAN module                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            *                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            *********************************************************************           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            * FileName:        $HeadURL: http://svn.arune.se/svn/HomeAutomation/trunk/EmbeddedSoftware/PIC/canBase/Source/CAN.c $ F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            * Last changed:	$LastChangedDate: 2007-02-25 20:51:08 +0100 (s√∂, 25 feb 2007) $ F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            * By:				$LastChangedBy: johboh $                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            * Revision:		$Revision: 339 $                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                            ********************************************************************/           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           #include <CANdefs.h>                                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           #include <stackTasks.h>                                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           #include <CAN.h>                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           #include <EEaccess.h>                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           #include <funcdefs.h>                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           #include <Tick.h>                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           TICK heartbeat;                                                                  F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           static int MY_ID = DEFAULT_ID;                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           static CAN_PACKET outCp;                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           static void canGetPacket(void);                                                  F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Function: canInit                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Pre-conditions: none                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Affects: Changes can registers.                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           void canInit()                                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
00305c   0e80     MOVLW     0x80           	CANCON = 0x80; //request config mode                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00305e   6e6f     MOVWF     0x6f,0x0                                                                                        
003060   0ee0     MOVLW     0xe0           	while ((CANSTAT & 0xE0) != 0x80 ); //wait for config mode request               F:\MCP\projects\CAN\canBase\Source\CAN.c
003062   146e     ANDWF     0x6e,0x0,0x0                                                                                    
003064   0880     SUBLW     0x80                                                                                            
003066   e001     BZ        0x306a                                                                                          
003068   d7fb     BRA       0x3060                                                                                          
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// BAUD AND TQS                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// 500Khz@40Mhz (new by the book)                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
00306a   0e04     MOVLW     0x4            	BRGCON1 = 0x04;                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
00306c   6e70     MOVWF     0x70,0x0                                                                                        
00306e   0ed1     MOVLW     0xd1           	BRGCON2 = 0xD1;                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
003070   6e71     MOVWF     0x71,0x0                                                                                        
003072   0e81     MOVLW     0x81           	BRGCON3 = 0x81;                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
003074   6e72     MOVWF     0x72,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON1=0;                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Sync_Seq = 2 x TQ = 1                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON1bits.SJW1=0;                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON1bits.SJW0=1;                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Setting BRP.                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON1=BRGCON1|CAN_BRP;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Maximum PHEG1                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.SEG2PHTS = 1;                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Phase_Seg1 = 2 x TQ = 1                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.SEG1PH2 = 0;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.SEG1PH1 = 0;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.SEG1PH0 = 1;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Prop_Seq = 2 x TQ = 1                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.PRSEG2 = 0;                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.PRSEG1 = 0;                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON2bits.PRSEG0 = 1;                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//  Enableing bus wake-up                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON3bits.WAKDIS = 0;                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Dont use filter when wakeup                                                  F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON3bits.WAKFIL = 0;                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Phase_Seg2 = 2 x TQ = 1                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON3bits.SEG2PH2 = 0;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON3bits.SEG2PH1 = 0;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//BRGCON3bits.SEG2PH0 = 1;                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003076   6a77     CLRF      0x77,0x0       	ECANCON=0;                                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
003078   8e77     BSF       0x77,0x7,0x0   	ECANCONbits.MDSEL1 = 1; // 0  For mode 1                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
00307a   9c77     BCF       0x77,0x6,0x0   	ECANCONbits.MDSEL0 = 0; // 1  For mode 1                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// FILTERS AND MASKS                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00307c   8c60     BSF       0x60,0x6,0x0   	RXB0CONbits.RXM1=1;                                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
00307e   9a60     BCF       0x60,0x5,0x0   	RXB0CONbits.RXM0=0;                                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// INTERRUPTS                                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Diable transmit interrupt                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
003080   010d     MOVLB     0xd            	TXBIE = 0;                                                                      F:\MCP\projects\CAN\canBase\Source\CAN.c
003082   6bfc     CLRF      0xfc,0x1                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//rx any interrupt                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003084   6aa4     CLRF      0xa4,0x0       	PIR3 = 0;                                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
003086   0e03     MOVLW     0x3            	PIE3 = 0b00000011;                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003088   6ea3     MOVWF     0xa3,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// High interrupt                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
00308a   6ea5     MOVWF     0xa5,0x0       	IPR3 =0b00000011;                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Programmable buffers interrupt                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
00308c   69fa     SETF      0xfa,0x1       	BIE0  = 0xFF;	                                                                  F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//loopback mode or not                                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	#ifdef CAN_LOOPBACK_MODE                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		CANCON = 0x40;//request loopback mode                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		while ((CANSTAT & 0xE0) != 0x40 );//wait for loopback mode                     F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	#else                                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
00308e   6a6f     CLRF      0x6f,0x0       		CANCON = 0x00;//request normal mode                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003090   0ee0     MOVLW     0xe0           		while ((CANSTAT & 0xE0) != 0x00 );//wait for normal mode                       F:\MCP\projects\CAN\canBase\Source\CAN.c
003092   146e     ANDWF     0x6e,0x0,0x0                                                                                    
003094   e001     BZ        0x3098                                                                                          
003096   d7fc     BRA       0x3090                                                                                          
                                           	#endif                                                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Init ticker service                                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
003098   ec3c     CALL      0x3e78,0x0     	tickInit();                                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
00309a   f01f                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Read ID and NID if exist.                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
00309c   0e00     MOVLW     0x0            	if (EERead(NODE_ID_EE)==NODE_HAS_ID)                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00309e   6ee6     MOVWF     0xe6,0x0                                                                                        
0030a0   6ae6     CLRF      0xe6,0x0                                                                                        
0030a2   ec97     CALL      0x3d2e,0x0                                                                                      
0030a4   f01e                                                                                                               
0030a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0030a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0030aa   082a     SUBLW     0x2a                                                                                            
0030ac   e10a     BNZ       0x30c2                                                                                          
                                           	{                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
0030ae   0e01     MOVLW     0x1            		MY_ID=+EERead(NODE_ID_EE + 1);                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
0030b0   6ee6     MOVWF     0xe6,0x0                                                                                        
0030b2   6ae6     CLRF      0xe6,0x0                                                                                        
0030b4   ec97     CALL      0x3d2e,0x0                                                                                      
0030b6   f01e                                                                                                               
0030b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0030ba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0030bc   0100     MOVLB     0x0                                                                                             
0030be   6f95     MOVWF     0x95,0x1                                                                                        
0030c0   6b96     CLRF      0x96,0x1                                                                                        
                                           	}                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Send user program startup heatbeat                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
0030c2   0100     MOVLB     0x0            	outCp.type=ptPGM;                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
0030c4   0e01     MOVLW     0x1                                                                                             
0030c6   6f64     MOVWF     0x64,0x1                                                                                        
0030c8   6b65     CLRF      0x65,0x1       	outCp.pgm.class=pcCTRL;                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
0030ca   6f66     MOVWF     0x66,0x1       	outCp.pgm.id=pctAPPBOOT;                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
0030cc   6b67     CLRF      0x67,0x1                                                                                        
0030ce   6b6c     CLRF      0x6c,0x1       	outCp.length=0;                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
0030d0   0e02     MOVLW     0x2            	while(!canSendMessage(outCp,PRIO_HIGH));                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
0030d2   6ee6     MOVWF     0xe6,0x0                                                                                        
0030d4   c064     MOVFF     0x64,0xfe6                                                                                      
0030d6   ffe6                                                                                                               
0030d8   c065     MOVFF     0x65,0xfe6                                                                                      
0030da   ffe6                                                                                                               
0030dc   c066     MOVFF     0x66,0xfe6                                                                                      
0030de   ffe6                                                                                                               
0030e0   c067     MOVFF     0x67,0xfe6                                                                                      
0030e2   ffe6                                                                                                               
0030e4   c068     MOVFF     0x68,0xfe6                                                                                      
0030e6   ffe6                                                                                                               
0030e8   c069     MOVFF     0x69,0xfe6                                                                                      
0030ea   ffe6                                                                                                               
0030ec   c06a     MOVFF     0x6a,0xfe6                                                                                      
0030ee   ffe6                                                                                                               
0030f0   c06b     MOVFF     0x6b,0xfe6                                                                                      
0030f2   ffe6                                                                                                               
0030f4   c06c     MOVFF     0x6c,0xfe6                                                                                      
0030f6   ffe6                                                                                                               
0030f8   c06d     MOVFF     0x6d,0xfe6                                                                                      
0030fa   ffe6                                                                                                               
0030fc   c06e     MOVFF     0x6e,0xfe6                                                                                      
0030fe   ffe6                                                                                                               
003100   c06f     MOVFF     0x6f,0xfe6                                                                                      
003102   ffe6                                                                                                               
003104   c070     MOVFF     0x70,0xfe6                                                                                      
003106   ffe6                                                                                                               
003108   c071     MOVFF     0x71,0xfe6                                                                                      
00310a   ffe6                                                                                                               
00310c   c072     MOVFF     0x72,0xfe6                                                                                      
00310e   ffe6                                                                                                               
003110   c073     MOVFF     0x73,0xfe6                                                                                      
003112   ffe6                                                                                                               
003114   c074     MOVFF     0x74,0xfe6                                                                                      
003116   ffe6                                                                                                               
003118   d9c8     RCALL     0x34aa                                                                                          
00311a   6e0b     MOVWF     0xb,0x0                                                                                         
00311c   0e12     MOVLW     0x12                                                                                            
00311e   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
003120   500b     MOVF      0xb,0x0,0x0                                                                                     
003122   0900     IORLW     0x0                                                                                             
003124   e101     BNZ       0x3128                                                                                          
003126   d7d4     BRA       0x30d0                                                                                          
003128   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Function: canISR                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Pre-conditions: a call to canInit()                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Affects: interrupt registers and receive data buffers                          F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Depends: ..                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           void canISR()                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
00312a   0004     CLRWDT                   	ClrWdt();                                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00312c   50a4     MOVF      0xa4,0x0,0x0   	if (PIR3bits.RXBnIF || PIR3bits.RXB1IF || PIR3bits.RXB0IF)                      F:\MCP\projects\CAN\canBase\Source\CAN.c
00312e   0b02     ANDLW     0x2                                                                                             
003130   e106     BNZ       0x313e                                                                                          
003132   50a4     MOVF      0xa4,0x0,0x0                                                                                    
003134   0b02     ANDLW     0x2                                                                                             
003136   e103     BNZ       0x313e                                                                                          
003138   50a4     MOVF      0xa4,0x0,0x0                                                                                    
00313a   0b01     ANDLW     0x1                                                                                             
00313c   e016     BZ        0x316a                                                                                          
                                           	{                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
00313e   0e0f     MOVLW     0xf            		ECANCON=(ECANCON&0b00000)|(0b10000|(CANCON&0x0F));                             F:\MCP\projects\CAN\canBase\Source\CAN.c
003140   146f     ANDWF     0x6f,0x0,0x0                                                                                    
003142   0910     IORLW     0x10                                                                                            
003144   6e0b     MOVWF     0xb,0x0                                                                                         
003146   0e00     MOVLW     0x0                                                                                             
003148   1477     ANDWF     0x77,0x0,0x0                                                                                    
00314a   100b     IORWF     0xb,0x0,0x0                                                                                     
00314c   6e77     MOVWF     0x77,0x0                                                                                        
00314e   be60     BTFSC     0x60,0x7,0x0   		if (RXB0CONbits.RXFUL) canGetPacket();                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
003150   d869     RCALL     0x3224                                                                                          
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
003152   a2a4     BTFSS     0xa4,0x1,0x0   		if (PIR3bits.RXBnIF) {PIR3bits.RXBnIF = 0; return;}                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003154   d002     BRA       0x315a                                                                                          
003156   92a4     BCF       0xa4,0x1,0x0                                                                                    
003158   d064     BRA       0x3222                                                                                          
00315a   a2a4     BTFSS     0xa4,0x1,0x0   		if (PIR3bits.RXB1IF) {PIR3bits.RXB1IF = 0; return;}                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00315c   d002     BRA       0x3162                                                                                          
00315e   92a4     BCF       0xa4,0x1,0x0                                                                                    
003160   d060     BRA       0x3222                                                                                          
003162   a0a4     BTFSS     0xa4,0x0,0x0   		if (PIR3bits.RXB0IF) {PIR3bits.RXB0IF = 0; return;}                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003164   d002     BRA       0x316a                                                                                          
003166   90a4     BCF       0xa4,0x0,0x0                                                                                    
003168   d05c     BRA       0x3222                                                                                          
                                           	}                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00316a   ec50     CALL      0x3ea0,0x0     	tickUpdate();                                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
00316c   f01f                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00316e   ec46     CALL      0x3e8c,0x0     	if ((tickGet()-heartbeat)>TICK_SECOND*5)                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
003170   f01f                                                                                                               
003172   0100     MOVLB     0x0                                                                                             
003174   5160     MOVF      0x60,0x0,0x1                                                                                    
003176   5c04     SUBWF     0x4,0x0,0x0                                                                                     
003178   6e0b     MOVWF     0xb,0x0                                                                                         
00317a   0100     MOVLB     0x0                                                                                             
00317c   5161     MOVF      0x61,0x0,0x1                                                                                    
00317e   5805     SUBWFB    0x5,0x0,0x0                                                                                     
003180   6e0c     MOVWF     0xc,0x0                                                                                         
003182   0100     MOVLB     0x0                                                                                             
003184   5162     MOVF      0x62,0x0,0x1                                                                                    
003186   5806     SUBWFB    0x6,0x0,0x0                                                                                     
003188   6e0d     MOVWF     0xd,0x0                                                                                         
00318a   0100     MOVLB     0x0                                                                                             
00318c   5163     MOVF      0x63,0x0,0x1                                                                                    
00318e   5807     SUBWFB    0x7,0x0,0x0                                                                                     
003190   6e0e     MOVWF     0xe,0x0                                                                                         
003192   80d8     BSF       0xd8,0x0,0x0                                                                                    
003194   0ef4     MOVLW     0xf4                                                                                            
003196   540b     SUBFWB    0xb,0x0,0x0                                                                                     
003198   0e01     MOVLW     0x1                                                                                             
00319a   540c     SUBFWB    0xc,0x0,0x0                                                                                     
00319c   0e00     MOVLW     0x0                                                                                             
00319e   540d     SUBFWB    0xd,0x0,0x0                                                                                     
0031a0   0e00     MOVLW     0x0                                                                                             
0031a2   540e     SUBFWB    0xe,0x0,0x0                                                                                     
0031a4   e23e     BC        0x3222                                                                                          
                                           	{                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		// Send alive heartbeat                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
0031a6   0100     MOVLB     0x0            		outCp.type=ptPGM;                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
0031a8   0e01     MOVLW     0x1                                                                                             
0031aa   6f64     MOVWF     0x64,0x1                                                                                        
0031ac   0100     MOVLB     0x0            		outCp.pgm.class=pcCTRL;                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
0031ae   6b65     CLRF      0x65,0x1                                                                                        
0031b0   0e02     MOVLW     0x2            		outCp.pgm.id=pctHEARTBEAT;                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
0031b2   0100     MOVLB     0x0                                                                                             
0031b4   6f66     MOVWF     0x66,0x1                                                                                        
0031b6   6b67     CLRF      0x67,0x1                                                                                        
0031b8   0100     MOVLB     0x0            		outCp.length=0;                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
0031ba   6b6c     CLRF      0x6c,0x1                                                                                        
0031bc   0e02     MOVLW     0x2            		canSendMessage(outCp,PRIO_HIGH);                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
0031be   6ee6     MOVWF     0xe6,0x0                                                                                        
0031c0   c064     MOVFF     0x64,0xfe6                                                                                      
0031c2   ffe6                                                                                                               
0031c4   c065     MOVFF     0x65,0xfe6                                                                                      
0031c6   ffe6                                                                                                               
0031c8   c066     MOVFF     0x66,0xfe6                                                                                      
0031ca   ffe6                                                                                                               
0031cc   c067     MOVFF     0x67,0xfe6                                                                                      
0031ce   ffe6                                                                                                               
0031d0   c068     MOVFF     0x68,0xfe6                                                                                      
0031d2   ffe6                                                                                                               
0031d4   c069     MOVFF     0x69,0xfe6                                                                                      
0031d6   ffe6                                                                                                               
0031d8   c06a     MOVFF     0x6a,0xfe6                                                                                      
0031da   ffe6                                                                                                               
0031dc   c06b     MOVFF     0x6b,0xfe6                                                                                      
0031de   ffe6                                                                                                               
0031e0   c06c     MOVFF     0x6c,0xfe6                                                                                      
0031e2   ffe6                                                                                                               
0031e4   c06d     MOVFF     0x6d,0xfe6                                                                                      
0031e6   ffe6                                                                                                               
0031e8   c06e     MOVFF     0x6e,0xfe6                                                                                      
0031ea   ffe6                                                                                                               
0031ec   c06f     MOVFF     0x6f,0xfe6                                                                                      
0031ee   ffe6                                                                                                               
0031f0   c070     MOVFF     0x70,0xfe6                                                                                      
0031f2   ffe6                                                                                                               
0031f4   c071     MOVFF     0x71,0xfe6                                                                                      
0031f6   ffe6                                                                                                               
0031f8   c072     MOVFF     0x72,0xfe6                                                                                      
0031fa   ffe6                                                                                                               
0031fc   c073     MOVFF     0x73,0xfe6                                                                                      
0031fe   ffe6                                                                                                               
003200   c074     MOVFF     0x74,0xfe6                                                                                      
003202   ffe6                                                                                                               
003204   d952     RCALL     0x34aa                                                                                          
003206   6e0b     MOVWF     0xb,0x0                                                                                         
003208   0e12     MOVLW     0x12                                                                                            
00320a   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
00320c   500b     MOVF      0xb,0x0,0x0                                                                                     
                                           			                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
00320e   ec46     CALL      0x3e8c,0x0     		heartbeat = tickGet();                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
003210   f01f                                                                                                               
003212   c004     MOVFF     0x4,0x60                                                                                        
003214   f060                                                                                                               
003216   c005     MOVFF     0x5,0x61                                                                                        
003218   f061                                                                                                               
00321a   c006     MOVFF     0x6,0x62                                                                                        
00321c   f062                                                                                                               
00321e   c007     MOVFF     0x7,0x63                                                                                        
003220   f063                                                                                                               
                                           	}                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
003222   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Function: canGetPacket                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Pre-conditions: a call to canISR and an packet is available and banked to RXB0 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Affects: Calls canParse() function in main for parsing received packet.        F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
003224   cfd9     MOVFF     0xfd9,0xfe6    void canGetPacket()                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003226   ffe6                                                                                                               
003228   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00322a   ffd9                                                                                                               
00322c   0e11     MOVLW     0x11                                                                                            
00322e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		CAN_PACKET cp;                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		//RXB0SIDH 28 27 26 25 24 23 22 21                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                   //RXB0SIDL 20 19 18 xx xx xx 17 16                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                   //RXB0EIDH 15 14 13 12 11 10 09 08                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                   //RXB0EIDL 07 06 05 04 03 02 01 00                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003230   0e06     MOVLW     0x6            		cp.type = ((RXB0SIDH&0xC)>>6);                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
003232   6e0b     MOVWF     0xb,0x0                                                                                         
003234   0e0c     MOVLW     0xc                                                                                             
003236   1461     ANDWF     0x61,0x0,0x0                                                                                    
003238   c00b     MOVFF     0xb,0xfe7                                                                                       
00323a   ffe7                                                                                                               
00323c   52e7     MOVF      0xe7,0x1,0x0                                                                                    
00323e   e004     BZ        0x3248                                                                                          
003240   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
003242   0b7f     ANDLW     0x7f                                                                                            
003244   06e7     DECF      0xe7,0x1,0x0                                                                                    
003246   e1fc     BNZ       0x3240                                                                                          
003248   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00324a   50df     MOVF      0xdf,0x0,0x0   		if (cp.type==ptBOOT)                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
00324c   e122     BNZ       0x3292                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
00324e   0e38     MOVLW     0x38           			cp.boot.type  = ((RXB0SIDH&0x38)>>3);                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
003250   1461     ANDWF     0x61,0x0,0x0                                                                                    
003252   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
003254   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
003256   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
003258   0b1f     ANDLW     0x1f                                                                                            
00325a   6ee7     MOVWF     0xe7,0x0                                                                                        
00325c   0e04     MOVLW     0x4                                                                                             
00325e   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003260   ffdb                                                                                                               
003262   0e03     MOVLW     0x3            			cp.boot.offset= ((RXB0SIDH&0x7)<<5)+((RXB0SIDL&0xE0)>>3)+(RXB0SIDL&0x3);      F:\MCP\projects\CAN\canBase\Source\CAN.c
003264   1462     ANDWF     0x62,0x0,0x0                                                                                    
003266   6e0c     MOVWF     0xc,0x0                                                                                         
003268   0ee0     MOVLW     0xe0                                                                                            
00326a   1462     ANDWF     0x62,0x0,0x0                                                                                    
00326c   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
00326e   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
003270   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
003272   0b1f     ANDLW     0x1f                                                                                            
003274   6e0b     MOVWF     0xb,0x0                                                                                         
003276   0e07     MOVLW     0x7                                                                                             
003278   1461     ANDWF     0x61,0x0,0x0                                                                                    
00327a   0d20     MULLW     0x20                                                                                            
00327c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00327e   240b     ADDWF     0xb,0x0,0x0                                                                                     
003280   240c     ADDWF     0xc,0x0,0x0                                                                                     
003282   6ee7     MOVWF     0xe7,0x0                                                                                        
003284   0e05     MOVLW     0x5                                                                                             
003286   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003288   ffdb                                                                                                               
00328a   0e06     MOVLW     0x6            			cp.boot.rid   = RXB0EIDH;                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
00328c   cf63     MOVFF     0xf63,0xfdb                                                                                     
00328e   ffdb                                                                                                               
                                           		}                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003290   d039     BRA       0x3304         		else                                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		{                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003292   0e3c     MOVLW     0x3c           			cp.pgm.class= ((RXB0SIDH&0x3C)>>2);                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
003294   1461     ANDWF     0x61,0x0,0x0                                                                                    
003296   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
003298   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
00329a   0b3f     ANDLW     0x3f                                                                                            
00329c   6ee7     MOVWF     0xe7,0x0                                                                                        
00329e   0e01     MOVLW     0x1                                                                                             
0032a0   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
0032a2   ffdb                                                                                                               
0032a4   0e03     MOVLW     0x3            			cp.pgm.id   = (((WORD)RXB0SIDH&0x3)<<13)+(((WORD)RXB0SIDL&0xE0)<<5)+((RXB0SIDL&0x3)<<8)+RXB0EIDH; F:\MCP\projects\CAN\canBase\Source\CAN.c
0032a6   1461     ANDWF     0x61,0x0,0x0                                                                                    
0032a8   6e11     MOVWF     0x11,0x0                                                                                        
0032aa   6a12     CLRF      0x12,0x0                                                                                        
0032ac   3811     SWAPF     0x11,0x0,0x0                                                                                    
0032ae   6a11     CLRF      0x11,0x0                                                                                        
0032b0   34e8     RLCF      0xe8,0x0,0x0                                                                                    
0032b2   0be0     ANDLW     0xe0                                                                                            
0032b4   6e12     MOVWF     0x12,0x0                                                                                        
0032b6   0ee0     MOVLW     0xe0                                                                                            
0032b8   1462     ANDWF     0x62,0x0,0x0                                                                                    
0032ba   6e13     MOVWF     0x13,0x0                                                                                        
0032bc   6a14     CLRF      0x14,0x0                                                                                        
0032be   0e05     MOVLW     0x5                                                                                             
0032c0   90d8     BCF       0xd8,0x0,0x0                                                                                    
0032c2   3613     RLCF      0x13,0x1,0x0                                                                                    
0032c4   3614     RLCF      0x14,0x1,0x0                                                                                    
0032c6   04e8     DECF      0xe8,0x0,0x0                                                                                    
0032c8   e1fb     BNZ       0x32c0                                                                                          
0032ca   5011     MOVF      0x11,0x0,0x0                                                                                    
0032cc   2413     ADDWF     0x13,0x0,0x0                                                                                    
0032ce   6e0f     MOVWF     0xf,0x0                                                                                         
0032d0   5012     MOVF      0x12,0x0,0x0                                                                                    
0032d2   2014     ADDWFC    0x14,0x0,0x0                                                                                    
0032d4   6e10     MOVWF     0x10,0x0                                                                                        
0032d6   0e03     MOVLW     0x3                                                                                             
0032d8   1462     ANDWF     0x62,0x0,0x0                                                                                    
0032da   0e00     MOVLW     0x0                                                                                             
0032dc   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0032de   0100     MOVLB     0x0                                                                                             
0032e0   240f     ADDWF     0xf,0x0,0x0                                                                                     
0032e2   6e0d     MOVWF     0xd,0x0                                                                                         
0032e4   0e00     MOVLW     0x0                                                                                             
0032e6   2010     ADDWFC    0x10,0x0,0x0                                                                                    
0032e8   6e0e     MOVWF     0xe,0x0                                                                                         
0032ea   5063     MOVF      0x63,0x0,0x0                                                                                    
0032ec   0100     MOVLB     0x0                                                                                             
0032ee   240d     ADDWF     0xd,0x0,0x0                                                                                     
0032f0   6e0b     MOVWF     0xb,0x0                                                                                         
0032f2   0e00     MOVLW     0x0                                                                                             
0032f4   200e     ADDWFC    0xe,0x0,0x0                                                                                     
0032f6   6e0c     MOVWF     0xc,0x0                                                                                         
0032f8   0e02     MOVLW     0x2                                                                                             
0032fa   c00b     MOVFF     0xb,0xfdb                                                                                       
0032fc   ffdb                                                                                                               
0032fe   0e03     MOVLW     0x3                                                                                             
003300   c00c     MOVFF     0xc,0xfdb                                                                                       
003302   ffdb                                                                                                               
                                           		}                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003304   0e07     MOVLW     0x7            		cp.sid   = RXB0EIDL;                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
003306   cf64     MOVFF     0xf64,0xfdb                                                                                     
003308   ffdb                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		// Data length                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
00330a   5065     MOVF      0x65,0x0,0x0   		cp.length=(RXB0DLCbits.DLC3<<3)+(RXB0DLCbits.DLC2<<2)+(RXB0DLCbits.DLC1<<1)+RXB0DLCbits.DLC0; F:\MCP\projects\CAN\canBase\Source\CAN.c
00330c   0b01     ANDLW     0x1                                                                                             
00330e   6e0d     MOVWF     0xd,0x0                                                                                         
003310   5065     MOVF      0x65,0x0,0x0                                                                                    
003312   0b02     ANDLW     0x2                                                                                             
003314   e001     BZ        0x3318                                                                                          
003316   0e01     MOVLW     0x1                                                                                             
003318   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
00331a   6e0c     MOVWF     0xc,0x0                                                                                         
00331c   5065     MOVF      0x65,0x0,0x0                                                                                    
00331e   0b04     ANDLW     0x4                                                                                             
003320   e001     BZ        0x3324                                                                                          
003322   0e01     MOVLW     0x1                                                                                             
003324   0d04     MULLW     0x4                                                                                             
003326   cff3     MOVFF     0xff3,0xb                                                                                       
003328   f00b                                                                                                               
00332a   5065     MOVF      0x65,0x0,0x0                                                                                    
00332c   0b08     ANDLW     0x8                                                                                             
00332e   e001     BZ        0x3332                                                                                          
003330   0e01     MOVLW     0x1                                                                                             
003332   0d08     MULLW     0x8                                                                                             
003334   50f3     MOVF      0xf3,0x0,0x0                                                                                    
003336   240b     ADDWF     0xb,0x0,0x0                                                                                     
003338   240c     ADDWF     0xc,0x0,0x0                                                                                     
00333a   240d     ADDWF     0xd,0x0,0x0                                                                                     
00333c   6ee7     MOVWF     0xe7,0x0                                                                                        
00333e   0e08     MOVLW     0x8                                                                                             
003340   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
003342   ffdb                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		// Data one bye one, for speed                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
003344   0e09     MOVLW     0x9            		cp.data[0]=RXB0D0;	cp.data[1]=RXB0D1;                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
003346   cf66     MOVFF     0xf66,0xfdb                                                                                     
003348   ffdb                                                                                                               
00334a   0e0a     MOVLW     0xa                                                                                             
00334c   cf67     MOVFF     0xf67,0xfdb                                                                                     
00334e   ffdb                                                                                                               
003350   0e0b     MOVLW     0xb            		cp.data[2]=RXB0D2; 	cp.data[3]=RXB0D3;                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
003352   cf68     MOVFF     0xf68,0xfdb                                                                                     
003354   ffdb                                                                                                               
003356   0e0c     MOVLW     0xc                                                                                             
003358   cf69     MOVFF     0xf69,0xfdb                                                                                     
00335a   ffdb                                                                                                               
00335c   0e0d     MOVLW     0xd            		cp.data[4]=RXB0D4; 	cp.data[5]=RXB0D5;                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
00335e   cf6a     MOVFF     0xf6a,0xfdb                                                                                     
003360   ffdb                                                                                                               
003362   0e0e     MOVLW     0xe                                                                                             
003364   cf6b     MOVFF     0xf6b,0xfdb                                                                                     
003366   ffdb                                                                                                               
003368   0e0f     MOVLW     0xf            		cp.data[6]=RXB0D6; 	cp.data[7]=RXB0D7;                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
00336a   cf6c     MOVFF     0xf6c,0xfdb                                                                                     
00336c   ffdb                                                                                                               
00336e   0e10     MOVLW     0x10                                                                                            
003370   cf6d     MOVFF     0xf6d,0xfdb                                                                                     
003372   ffdb                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		// Clear ful status                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003374   9e60     BCF       0x60,0x7,0x0   		RXB0CONbits.RXFUL=0;                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		// Check if bootloader request specific.                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		// reset and id change                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
003376   50df     MOVF      0xdf,0x0,0x0   		if (cp.type==ptBOOT)                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
003378   e160     BNZ       0x343a                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
00337a   0e06     MOVLW     0x6            			if (cp.boot.rid==MY_ID)                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
00337c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00337e   6e0b     MOVWF     0xb,0x0                                                                                         
003380   6a0c     CLRF      0xc,0x0                                                                                         
003382   0100     MOVLB     0x0                                                                                             
003384   5195     MOVF      0x95,0x0,0x1                                                                                    
003386   180b     XORWF     0xb,0x0,0x0                                                                                     
003388   e102     BNZ       0x338e                                                                                          
00338a   5196     MOVF      0x96,0x0,0x1                                                                                    
00338c   180c     XORWF     0xc,0x0,0x0                                                                                     
00338e   e155     BNZ       0x343a                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
003390   0e04     MOVLW     0x4            				if (cp.boot.type==btADDR) Reset(); // Reset me.                              F:\MCP\projects\CAN\canBase\Source\CAN.c
003392   50db     MOVF      0xdb,0x0,0x0                                                                                    
003394   e101     BNZ       0x3398                                                                                          
003396   00ff     RESET                                                                                                     
003398   0e04     MOVLW     0x4            				if (cp.boot.type==btCHANGEID)                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
00339a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00339c   0807     SUBLW     0x7                                                                                             
00339e   e14d     BNZ       0x343a                                                                                          
                                           				{                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           						// Change my ID and NID                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
0033a0   0e09     MOVLW     0x9            						MY_ID=cp.data[0];                                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
0033a2   50db     MOVF      0xdb,0x0,0x0                                                                                    
0033a4   0100     MOVLB     0x0                                                                                             
0033a6   6f95     MOVWF     0x95,0x1                                                                                        
0033a8   6b96     CLRF      0x96,0x1                                                                                        
0033aa   0e09     MOVLW     0x9            						EEWrite(NODE_ID_EE+1,cp.data[0]);                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
0033ac   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0033ae   ffe6                                                                                                               
0033b0   0e01     MOVLW     0x1                                                                                             
0033b2   6ee6     MOVWF     0xe6,0x0                                                                                        
0033b4   6ae6     CLRF      0xe6,0x0                                                                                        
0033b6   ecbc     CALL      0x3d78,0x0                                                                                      
0033b8   f01e                                                                                                               
0033ba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033c0   0e2a     MOVLW     0x2a           						EEWrite(NODE_ID_EE,NODE_HAS_ID);                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
0033c2   6ee6     MOVWF     0xe6,0x0                                                                                        
0033c4   0e00     MOVLW     0x0                                                                                             
0033c6   6ee6     MOVWF     0xe6,0x0                                                                                        
0033c8   6ae6     CLRF      0xe6,0x0                                                                                        
0033ca   ecbc     CALL      0x3d78,0x0                                                                                      
0033cc   f01e                                                                                                               
0033ce   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033d0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033d2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           						// Send ack with new id.                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
0033d4   0100     MOVLB     0x0            						outCp.type=ptBOOT;                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
0033d6   6b64     CLRF      0x64,0x1                                                                                        
0033d8   0100     MOVLB     0x0            						outCp.boot.type=btACK;                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
0033da   0e04     MOVLW     0x4                                                                                             
0033dc   6f68     MOVWF     0x68,0x1                                                                                        
0033de   0100     MOVLB     0x0            						outCp.length=0;                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
0033e0   6b6c     CLRF      0x6c,0x1                                                                                        
0033e2   0e02     MOVLW     0x2            						while(!canSendMessage(outCp,PRIO_HIGH));                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
0033e4   6ee6     MOVWF     0xe6,0x0                                                                                        
0033e6   c064     MOVFF     0x64,0xfe6                                                                                      
0033e8   ffe6                                                                                                               
0033ea   c065     MOVFF     0x65,0xfe6                                                                                      
0033ec   ffe6                                                                                                               
0033ee   c066     MOVFF     0x66,0xfe6                                                                                      
0033f0   ffe6                                                                                                               
0033f2   c067     MOVFF     0x67,0xfe6                                                                                      
0033f4   ffe6                                                                                                               
0033f6   c068     MOVFF     0x68,0xfe6                                                                                      
0033f8   ffe6                                                                                                               
0033fa   c069     MOVFF     0x69,0xfe6                                                                                      
0033fc   ffe6                                                                                                               
0033fe   c06a     MOVFF     0x6a,0xfe6                                                                                      
003400   ffe6                                                                                                               
003402   c06b     MOVFF     0x6b,0xfe6                                                                                      
003404   ffe6                                                                                                               
003406   c06c     MOVFF     0x6c,0xfe6                                                                                      
003408   ffe6                                                                                                               
00340a   c06d     MOVFF     0x6d,0xfe6                                                                                      
00340c   ffe6                                                                                                               
00340e   c06e     MOVFF     0x6e,0xfe6                                                                                      
003410   ffe6                                                                                                               
003412   c06f     MOVFF     0x6f,0xfe6                                                                                      
003414   ffe6                                                                                                               
003416   c070     MOVFF     0x70,0xfe6                                                                                      
003418   ffe6                                                                                                               
00341a   c071     MOVFF     0x71,0xfe6                                                                                      
00341c   ffe6                                                                                                               
00341e   c072     MOVFF     0x72,0xfe6                                                                                      
003420   ffe6                                                                                                               
003422   c073     MOVFF     0x73,0xfe6                                                                                      
003424   ffe6                                                                                                               
003426   c074     MOVFF     0x74,0xfe6                                                                                      
003428   ffe6                                                                                                               
00342a   d83f     RCALL     0x34aa                                                                                          
00342c   6e0b     MOVWF     0xb,0x0                                                                                         
00342e   0e12     MOVLW     0x12                                                                                            
003430   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
003432   500b     MOVF      0xb,0x0,0x0                                                                                     
003434   0900     IORLW     0x0                                                                                             
003436   e101     BNZ       0x343a                                                                                          
003438   d7d4     BRA       0x33e2                                                                                          
                                           				}                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           			}                                                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		}                                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           		//Call main parser                                                             F:\MCP\projects\CAN\canBase\Source\CAN.c
00343a   04df     DECF      0xdf,0x0,0x0   		if (cp.type==ptPGM) canParse(cp);                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
00343c   e12c     BNZ       0x3496                                                                                          
00343e   cfd9     MOVFF     0xfd9,0xfe9                                                                                     
003440   ffe9                                                                                                               
003442   cfda     MOVFF     0xfda,0xfea                                                                                     
003444   ffea                                                                                                               
003446   cfee     MOVFF     0xfee,0xfe6                                                                                     
003448   ffe6                                                                                                               
00344a   cfee     MOVFF     0xfee,0xfe6                                                                                     
00344c   ffe6                                                                                                               
00344e   cfee     MOVFF     0xfee,0xfe6                                                                                     
003450   ffe6                                                                                                               
003452   cfee     MOVFF     0xfee,0xfe6                                                                                     
003454   ffe6                                                                                                               
003456   cfee     MOVFF     0xfee,0xfe6                                                                                     
003458   ffe6                                                                                                               
00345a   cfee     MOVFF     0xfee,0xfe6                                                                                     
00345c   ffe6                                                                                                               
00345e   cfee     MOVFF     0xfee,0xfe6                                                                                     
003460   ffe6                                                                                                               
003462   cfee     MOVFF     0xfee,0xfe6                                                                                     
003464   ffe6                                                                                                               
003466   cfee     MOVFF     0xfee,0xfe6                                                                                     
003468   ffe6                                                                                                               
00346a   cfee     MOVFF     0xfee,0xfe6                                                                                     
00346c   ffe6                                                                                                               
00346e   cfee     MOVFF     0xfee,0xfe6                                                                                     
003470   ffe6                                                                                                               
003472   cfee     MOVFF     0xfee,0xfe6                                                                                     
003474   ffe6                                                                                                               
003476   cfee     MOVFF     0xfee,0xfe6                                                                                     
003478   ffe6                                                                                                               
00347a   cfee     MOVFF     0xfee,0xfe6                                                                                     
00347c   ffe6                                                                                                               
00347e   cfee     MOVFF     0xfee,0xfe6                                                                                     
003480   ffe6                                                                                                               
003482   cfee     MOVFF     0xfee,0xfe6                                                                                     
003484   ffe6                                                                                                               
003486   cfee     MOVFF     0xfee,0xfe6                                                                                     
003488   ffe6                                                                                                               
00348a   ec29     CALL      0x3c52,0x0                                                                                      
00348c   f01e                                                                                                               
00348e   6e0b     MOVWF     0xb,0x0                                                                                         
003490   0e11     MOVLW     0x11                                                                                            
003492   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
003494   500b     MOVF      0xb,0x0,0x0                                                                                     
003496   0e11     MOVLW     0x11           }                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
003498   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00349a   e202     BC        0x34a0                                                                                          
00349c   6ae1     CLRF      0xe1,0x0                                                                                        
00349e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0034a0   6ee1     MOVWF     0xe1,0x0                                                                                        
0034a2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0034a4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0034a6   ffd9                                                                                                               
0034a8   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           /*                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Function: canSendMessage                                                       F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Input:	CAN_MESSAGE to send                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Output: True if packet scheduled sucess, false otherwise.                      F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Pre-conditions: canInit                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Affects: ..                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           *	Depends: ..                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           */                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
0034aa   cfd9     MOVFF     0xfd9,0xfe6    BOOL canSendMessage(CAN_PACKET cp, CAN_PRIORITY prio)                            F:\MCP\projects\CAN\canBase\Source\CAN.c
0034ac   ffe6                                                                                                               
0034ae   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0034b0   ffd9                                                                                                               
                                           {                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
0034b2   010f     MOVLB     0xf            	if ( TXB0CONbits.TXREQ == 0 )  { ECANCON=(ECANCON&0b00000)|0b00011; }           F:\MCP\projects\CAN\canBase\Source\CAN.c
0034b4   b740     BTFSC     0x40,0x3,0x1                                                                                    
0034b6   d004     BRA       0x34c0                                                                                          
0034b8   0e00     MOVLW     0x0                                                                                             
0034ba   1477     ANDWF     0x77,0x0,0x0                                                                                    
0034bc   0903     IORLW     0x3                                                                                             
0034be   6e77     MOVWF     0x77,0x0                                                                                        
0034c0   010f     MOVLB     0xf            	if ( TXB1CONbits.TXREQ == 0 )  { ECANCON=(ECANCON&0b00000)|0b00100; }           F:\MCP\projects\CAN\canBase\Source\CAN.c
0034c2   b730     BTFSC     0x30,0x3,0x1                                                                                    
0034c4   d004     BRA       0x34ce                                                                                          
0034c6   0e00     MOVLW     0x0                                                                                             
0034c8   1477     ANDWF     0x77,0x0,0x0                                                                                    
0034ca   0904     IORLW     0x4                                                                                             
0034cc   6e77     MOVWF     0x77,0x0                                                                                        
0034ce   010f     MOVLB     0xf            	if ( TXB2CONbits.TXREQ == 0 )  { ECANCON=(ECANCON&0b00000)|0b00101; }           F:\MCP\projects\CAN\canBase\Source\CAN.c
0034d0   b720     BTFSC     0x20,0x3,0x1                                                                                    
0034d2   d005     BRA       0x34de                                                                                          
0034d4   0e00     MOVLW     0x0                                                                                             
0034d6   1477     ANDWF     0x77,0x0,0x0                                                                                    
0034d8   0905     IORLW     0x5                                                                                             
0034da   6e77     MOVWF     0x77,0x0                                                                                        
                                           	// None of the transmit buffers were empty.                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
0034dc   d002     BRA       0x34e2         	else { return FALSE;}                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
0034de   0e00     MOVLW     0x0                                                                                             
0034e0   d0bd     BRA       0x365c                                                                                          
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
0034e2   0eed     MOVLW     0xed           	if (prio<0 || prio>3) prio = 0;                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
0034e4   cfdb     MOVFF     0xfdb,0xb                                                                                       
0034e6   f00b                                                                                                               
0034e8   340b     RLCF      0xb,0x0,0x0                                                                                     
0034ea   e20e     BC        0x3508                                                                                          
0034ec   0eed     MOVLW     0xed                                                                                            
0034ee   cfdb     MOVFF     0xfdb,0xc                                                                                       
0034f0   f00c                                                                                                               
0034f2   0e03     MOVLW     0x3                                                                                             
0034f4   6ee7     MOVWF     0xe7,0x0                                                                                        
0034f6   180c     XORWF     0xc,0x0,0x0                                                                                     
0034f8   aee8     BTFSS     0xe8,0x7,0x0                                                                                    
0034fa   d002     BRA       0x3500                                                                                          
0034fc   340c     RLCF      0xc,0x0,0x0                                                                                     
0034fe   d003     BRA       0x3506                                                                                          
003500   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003502   80d8     BSF       0xd8,0x0,0x0                                                                                    
003504   540c     SUBFWB    0xc,0x0,0x0                                                                                     
003506   e202     BC        0x350c                                                                                          
003508   0eed     MOVLW     0xed                                                                                            
00350a   6adb     CLRF      0xdb,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//RXB0SIDH 28 27 26 25 24 23 22 21                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//RXB0SIDL 20 19 18 xx xx xx 17 16                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//RXB0EIDH 15 14 13 12 11 10 09 08                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	//RXB0EIDL 07 06 05 04 03 02 01 00                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00350c   0eee     MOVLW     0xee           	if (cp.type==ptBOOT)                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00350e   50db     MOVF      0xdb,0x0,0x0                                                                                    
003510   e124     BNZ       0x355a                                                                                          
                                           	{                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
003512   0ef3     MOVLW     0xf3           		RXB0SIDH = ((cp.type&0x3)<<6)+((cp.boot.type&0x7)<<3)+((cp.boot.offset&0xE0)>>5); F:\MCP\projects\CAN\canBase\Source\CAN.c
003514   50db     MOVF      0xdb,0x0,0x0                                                                                    
003516   0be0     ANDLW     0xe0                                                                                            
003518   0be0     ANDLW     0xe0                                                                                            
00351a   38e8     SWAPF     0xe8,0x0,0x0                                                                                    
00351c   40e8     RRNCF     0xe8,0x0,0x0                                                                                    
00351e   6e0c     MOVWF     0xc,0x0                                                                                         
003520   0ef2     MOVLW     0xf2                                                                                            
003522   50db     MOVF      0xdb,0x0,0x0                                                                                    
003524   0b07     ANDLW     0x7                                                                                             
003526   0d08     MULLW     0x8                                                                                             
003528   cff3     MOVFF     0xff3,0xb                                                                                       
00352a   f00b                                                                                                               
00352c   0eee     MOVLW     0xee                                                                                            
00352e   50db     MOVF      0xdb,0x0,0x0                                                                                    
003530   0b03     ANDLW     0x3                                                                                             
003532   0d40     MULLW     0x40                                                                                            
003534   50f3     MOVF      0xf3,0x0,0x0                                                                                    
003536   240b     ADDWF     0xb,0x0,0x0                                                                                     
003538   240c     ADDWF     0xc,0x0,0x0                                                                                     
00353a   6e61     MOVWF     0x61,0x0                                                                                        
00353c   0ef3     MOVLW     0xf3           		RXB0SIDL = ((cp.boot.offset&0x1C)<<3)+(cp.boot.offset&0x3);                    F:\MCP\projects\CAN\canBase\Source\CAN.c
00353e   50db     MOVF      0xdb,0x0,0x0                                                                                    
003540   0b03     ANDLW     0x3                                                                                             
003542   6e0b     MOVWF     0xb,0x0                                                                                         
003544   0ef3     MOVLW     0xf3                                                                                            
003546   50db     MOVF      0xdb,0x0,0x0                                                                                    
003548   0b1c     ANDLW     0x1c                                                                                            
00354a   0d08     MULLW     0x8                                                                                             
00354c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00354e   240b     ADDWF     0xb,0x0,0x0                                                                                     
003550   6e62     MOVWF     0x62,0x0                                                                                        
003552   0ef4     MOVLW     0xf4           		RXB0EIDH = cp.boot.rid;                                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
003554   50db     MOVF      0xdb,0x0,0x0                                                                                    
003556   6e63     MOVWF     0x63,0x0                                                                                        
                                           	}                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
003558   d04f     BRA       0x35f8         	else                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	{                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
00355a   0eef     MOVLW     0xef           		RXB0SIDH = ((cp.type&0x3)<<6)+((cp.pgm.class&0xF)<<2)+((cp.pgm.id&0x6000)>>13); F:\MCP\projects\CAN\canBase\Source\CAN.c
00355c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00355e   0b0f     ANDLW     0xf                                                                                             
003560   0d04     MULLW     0x4                                                                                             
003562   cff3     MOVFF     0xff3,0xd                                                                                       
003564   f00d                                                                                                               
003566   0eee     MOVLW     0xee                                                                                            
003568   50db     MOVF      0xdb,0x0,0x0                                                                                    
00356a   0b03     ANDLW     0x3                                                                                             
00356c   0d40     MULLW     0x40                                                                                            
00356e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
003570   240d     ADDWF     0xd,0x0,0x0                                                                                     
003572   6e0b     MOVWF     0xb,0x0                                                                                         
003574   6a0c     CLRF      0xc,0x0                                                                                         
003576   be0b     BTFSC     0xb,0x7,0x0                                                                                     
003578   680c     SETF      0xc,0x0                                                                                         
00357a   0ef0     MOVLW     0xf0                                                                                            
00357c   cfdb     MOVFF     0xfdb,0xe                                                                                       
00357e   f00e                                                                                                               
003580   0ef1     MOVLW     0xf1                                                                                            
003582   cfdb     MOVFF     0xfdb,0xf                                                                                       
003584   f00f                                                                                                               
003586   0e00     MOVLW     0x0                                                                                             
003588   160e     ANDWF     0xe,0x1,0x0                                                                                     
00358a   0e60     MOVLW     0x60                                                                                            
00358c   160f     ANDWF     0xf,0x1,0x0                                                                                     
00358e   380f     SWAPF     0xf,0x0,0x0                                                                                     
003590   6a0f     CLRF      0xf,0x0                                                                                         
003592   30e8     RRCF      0xe8,0x0,0x0                                                                                    
003594   0b07     ANDLW     0x7                                                                                             
003596   6e0e     MOVWF     0xe,0x0                                                                                         
003598   500b     MOVF      0xb,0x0,0x0                                                                                     
00359a   240e     ADDWF     0xe,0x0,0x0                                                                                     
00359c   6e61     MOVWF     0x61,0x0                                                                                        
00359e   0ef0     MOVLW     0xf0           		RXB0SIDL = ((cp.pgm.id&0x1C00)>>5)+((cp.pgm.id&0x300)>>8);                     F:\MCP\projects\CAN\canBase\Source\CAN.c
0035a0   cfdb     MOVFF     0xfdb,0xb                                                                                       
0035a2   f00b                                                                                                               
0035a4   0ef1     MOVLW     0xf1                                                                                            
0035a6   cfdb     MOVFF     0xfdb,0xc                                                                                       
0035a8   f00c                                                                                                               
0035aa   0e00     MOVLW     0x0                                                                                             
0035ac   160b     ANDWF     0xb,0x1,0x0                                                                                     
0035ae   0e1c     MOVLW     0x1c                                                                                            
0035b0   160c     ANDWF     0xc,0x1,0x0                                                                                     
0035b2   0e05     MOVLW     0x5                                                                                             
0035b4   90d8     BCF       0xd8,0x0,0x0                                                                                    
0035b6   320c     RRCF      0xc,0x1,0x0                                                                                     
0035b8   320b     RRCF      0xb,0x1,0x0                                                                                     
0035ba   04e8     DECF      0xe8,0x0,0x0                                                                                    
0035bc   e1fb     BNZ       0x35b4                                                                                          
0035be   0ef0     MOVLW     0xf0                                                                                            
0035c0   cfdb     MOVFF     0xfdb,0xd                                                                                       
0035c2   f00d                                                                                                               
0035c4   0ef1     MOVLW     0xf1                                                                                            
0035c6   cfdb     MOVFF     0xfdb,0xe                                                                                       
0035c8   f00e                                                                                                               
0035ca   0e00     MOVLW     0x0                                                                                             
0035cc   160d     ANDWF     0xd,0x1,0x0                                                                                     
0035ce   0e03     MOVLW     0x3                                                                                             
0035d0   160e     ANDWF     0xe,0x1,0x0                                                                                     
0035d2   c00e     MOVFF     0xe,0xd                                                                                         
0035d4   f00d                                                                                                               
0035d6   6a0e     CLRF      0xe,0x0                                                                                         
0035d8   500b     MOVF      0xb,0x0,0x0                                                                                     
0035da   240d     ADDWF     0xd,0x0,0x0                                                                                     
0035dc   6e62     MOVWF     0x62,0x0                                                                                        
0035de   0eff     MOVLW     0xff           		RXB0EIDH = (cp.pgm.id&0xFF);                                                   F:\MCP\projects\CAN\canBase\Source\CAN.c
0035e0   6ee7     MOVWF     0xe7,0x0                                                                                        
0035e2   0ef0     MOVLW     0xf0                                                                                            
0035e4   cfdb     MOVFF     0xfdb,0xb                                                                                       
0035e6   f00b                                                                                                               
0035e8   0ef1     MOVLW     0xf1                                                                                            
0035ea   cfdb     MOVFF     0xfdb,0xc                                                                                       
0035ec   f00c                                                                                                               
0035ee   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0035f0   160b     ANDWF     0xb,0x1,0x0                                                                                     
0035f2   6a0c     CLRF      0xc,0x0                                                                                         
0035f4   500b     MOVF      0xb,0x0,0x0                                                                                     
0035f6   6e63     MOVWF     0x63,0x0                                                                                        
                                           	}                                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
0035f8   c095     MOVFF     0x95,0xf64     	RXB0EIDL = MY_ID;                                                               F:\MCP\projects\CAN\canBase\Source\CAN.c
0035fa   ff64                                                                                                               
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Data length                                                                  F:\MCP\projects\CAN\canBase\Source\CAN.c
0035fc   6a65     CLRF      0x65,0x0       	RXB0DLC = 0;                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
0035fe   0ef6     MOVLW     0xf6           	if (cp.length>8) RXB0DLC=8; else RXB0DLC=cp.length;                             F:\MCP\projects\CAN\canBase\Source\CAN.c
003600   50db     MOVF      0xdb,0x0,0x0                                                                                    
003602   0808     SUBLW     0x8                                                                                             
003604   e203     BC        0x360c                                                                                          
003606   0e08     MOVLW     0x8                                                                                             
003608   6e65     MOVWF     0x65,0x0                                                                                        
00360a   d003     BRA       0x3612                                                                                          
00360c   0ef6     MOVLW     0xf6                                                                                            
00360e   50db     MOVF      0xdb,0x0,0x0                                                                                    
003610   6e65     MOVWF     0x65,0x0                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// NOT Remote request                                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	_asm                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003612   9c65     BCF       0x65,0x6,0x0   		bcf RXB0DLC, 6, 0                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	_endasm                                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Data one bye one, for speed                                                  F:\MCP\projects\CAN\canBase\Source\CAN.c
003614   0ef7     MOVLW     0xf7           	RXB0D0=cp.data[0];	RXB0D1=cp.data[1];                                           F:\MCP\projects\CAN\canBase\Source\CAN.c
003616   50db     MOVF      0xdb,0x0,0x0                                                                                    
003618   6e66     MOVWF     0x66,0x0                                                                                        
00361a   0ef8     MOVLW     0xf8                                                                                            
00361c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00361e   6e67     MOVWF     0x67,0x0                                                                                        
003620   0ef9     MOVLW     0xf9           	RXB0D2=cp.data[2]; 	RXB0D3=cp.data[3];                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
003622   50db     MOVF      0xdb,0x0,0x0                                                                                    
003624   6e68     MOVWF     0x68,0x0                                                                                        
003626   0efa     MOVLW     0xfa                                                                                            
003628   50db     MOVF      0xdb,0x0,0x0                                                                                    
00362a   6e69     MOVWF     0x69,0x0                                                                                        
00362c   0efb     MOVLW     0xfb           	RXB0D4=cp.data[4]; 	RXB0D5=cp.data[5];                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
00362e   50db     MOVF      0xdb,0x0,0x0                                                                                    
003630   6e6a     MOVWF     0x6a,0x0                                                                                        
003632   0efc     MOVLW     0xfc                                                                                            
003634   50db     MOVF      0xdb,0x0,0x0                                                                                    
003636   6e6b     MOVWF     0x6b,0x0                                                                                        
003638   0efd     MOVLW     0xfd           	RXB0D6=cp.data[6]; 	RXB0D7=cp.data[7];                                          F:\MCP\projects\CAN\canBase\Source\CAN.c
00363a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00363c   6e6c     MOVWF     0x6c,0x0                                                                                        
00363e   0efe     MOVLW     0xfe                                                                                            
003640   50db     MOVF      0xdb,0x0,0x0                                                                                    
003642   6e6d     MOVWF     0x6d,0x0                                                                                        
                                           	// set extended                                                                 F:\MCP\projects\CAN\canBase\Source\CAN.c
003644   8662     BSF       0x62,0x3,0x0   	RXB0SIDLbits.EXID=1;                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// Priority                                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
003646   0eed     MOVLW     0xed           	RXB0CON = (RXB0CON & 0b11111100) | prio;                                        F:\MCP\projects\CAN\canBase\Source\CAN.c
003648   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00364a   ffe6                                                                                                               
00364c   0efc     MOVLW     0xfc                                                                                            
00364e   1460     ANDWF     0x60,0x0,0x0                                                                                    
003650   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003652   10e7     IORWF     0xe7,0x0,0x0                                                                                    
003654   6e60     MOVWF     0x60,0x0                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	// mark as redy to transmit                                                     F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	_asm                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
003656   8660     BSF       0x60,0x3,0x0   		bsf RXB0CON, 3, 0                                                              F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	_endasm                                                                         F:\MCP\projects\CAN\canBase\Source\CAN.c
                                           	                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
003658   0e01     MOVLW     0x1            	return TRUE;                                                                    F:\MCP\projects\CAN\canBase\Source\CAN.c
00365a   d000     BRA       0x365c                                                                                          
                                                                                                                            F:\MCP\projects\CAN\canBase\Source\CAN.c
00365c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\MCP\projects\CAN\canBase\Source\CAN.c
00365e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003660   ffd9                                                                                                               
003662   0012     RETURN    0x0                                                                                             
                                           /*********************************************************************           F:\MCP\projects\CAN\Include\EEAccess.c
                                            *                                                                               F:\MCP\projects\CAN\Include\EEAccess.c
                                            *   Functions for reading and writing to EEPROM.                                F:\MCP\projects\CAN\Include\EEAccess.c
                                            *                                                                               F:\MCP\projects\CAN\Include\EEAccess.c
                                            *********************************************************************           F:\MCP\projects\CAN\Include\EEAccess.c
                                            * FileName:        	$HeadURL: http://svn.arune.se/svn/HomeAutomation/trunk/EmbeddedSoftware/PIC/Include/EEAccess.c $ F:\MCP\projects\CAN\Include\EEAccess.c
                                            * Last changed:	$LastChangedDate: 2006-11-20 21:31:03 +0100 (m√•, 20 nov 2006) $ F:\MCP\projects\CAN\Include\EEAccess.c
                                            * By:			$LastChangedBy: johboh $                                                F:\MCP\projects\CAN\Include\EEAccess.c
                                            * Revision:		$Revision: 139 $                                                   F:\MCP\projects\CAN\Include\EEAccess.c
                                            ********************************************************************/           F:\MCP\projects\CAN\Include\EEAccess.c
                                           #include <p18cxxx.h>                                                             F:\MCP\projects\CAN\Include\EEAccess.c
                                           #include <EEaccess.h>                                                            F:\MCP\projects\CAN\Include\EEAccess.c
                                                                                                                            F:\MCP\projects\CAN\Include\EEAccess.c
                                           /*                                                                               F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Function: EERead                                                               F:\MCP\projects\CAN\Include\EEAccess.c
                                           *                                                                                F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Input:	WORD address to read from.                                              F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Output: Byte read.                                                             F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Pre-conditions: none                                                           F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Affects: none.                                                                 F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\Include\EEAccess.c
                                           */                                                                               F:\MCP\projects\CAN\Include\EEAccess.c
003d2e   cfd9     MOVFF     0xfd9,0xfe6    BYTE EERead(WORD addr)                                                           F:\MCP\projects\CAN\Include\EEAccess.c
003d30   ffe6                                                                                                               
003d32   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003d34   ffd9                                                                                                               
                                           {                                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003d36   0efd     MOVLW     0xfd           	EEADRH=(BYTE)(addr>>8);                                                         F:\MCP\projects\CAN\Include\EEAccess.c
003d38   cfdb     MOVFF     0xfdb,0xb                                                                                       
003d3a   f00b                                                                                                               
003d3c   0efe     MOVLW     0xfe                                                                                            
003d3e   cfdb     MOVFF     0xfdb,0xc                                                                                       
003d40   f00c                                                                                                               
003d42   c00c     MOVFF     0xc,0xb                                                                                         
003d44   f00b                                                                                                               
003d46   6a0c     CLRF      0xc,0x0                                                                                         
003d48   500b     MOVF      0xb,0x0,0x0                                                                                     
003d4a   6eaa     MOVWF     0xaa,0x0                                                                                        
003d4c   0eff     MOVLW     0xff           	EEADR=(BYTE)(addr & 0xFF);                                                      F:\MCP\projects\CAN\Include\EEAccess.c
003d4e   6ee7     MOVWF     0xe7,0x0                                                                                        
003d50   0efd     MOVLW     0xfd                                                                                            
003d52   cfdb     MOVFF     0xfdb,0xb                                                                                       
003d54   f00b                                                                                                               
003d56   0efe     MOVLW     0xfe                                                                                            
003d58   cfdb     MOVFF     0xfdb,0xc                                                                                       
003d5a   f00c                                                                                                               
003d5c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003d5e   160b     ANDWF     0xb,0x1,0x0                                                                                     
003d60   6a0c     CLRF      0xc,0x0                                                                                         
003d62   500b     MOVF      0xb,0x0,0x0                                                                                     
003d64   6ea9     MOVWF     0xa9,0x0                                                                                        
003d66   9ea6     BCF       0xa6,0x7,0x0   	EECON1bits.EEPGD=0;                                                             F:\MCP\projects\CAN\Include\EEAccess.c
003d68   9ca6     BCF       0xa6,0x6,0x0   	EECON1bits.CFGS=0;                                                              F:\MCP\projects\CAN\Include\EEAccess.c
003d6a   80a6     BSF       0xa6,0x0,0x0   	EECON1bits.RD=1;                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003d6c   50a8     MOVF      0xa8,0x0,0x0   	return EEDATA;	                                                                 F:\MCP\projects\CAN\Include\EEAccess.c
003d6e   d000     BRA       0x3d70                                                                                          
003d70   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003d72   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003d74   ffd9                                                                                                               
003d76   0012     RETURN    0x0                                                                                             
                                                                                                                            F:\MCP\projects\CAN\Include\EEAccess.c
                                                                                                                            F:\MCP\projects\CAN\Include\EEAccess.c
                                           /*                                                                               F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Function: EEWrite                                                              F:\MCP\projects\CAN\Include\EEAccess.c
                                           *                                                                                F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Input:	WORD address to write to and BYTE data to write.                        F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Output: none.                                                                  F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Pre-conditions: none                                                           F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Affects: none.                                                                 F:\MCP\projects\CAN\Include\EEAccess.c
                                           *	Depends: none.                                                                 F:\MCP\projects\CAN\Include\EEAccess.c
                                           */                                                                               F:\MCP\projects\CAN\Include\EEAccess.c
003d78   cfd9     MOVFF     0xfd9,0xfe6    void EEWrite(WORD addr,BYTE data)                                                F:\MCP\projects\CAN\Include\EEAccess.c
003d7a   ffe6                                                                                                               
003d7c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003d7e   ffd9                                                                                                               
                                           {                                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003d80   98a1     BCF       0xa1,0x4,0x0   	PIR2bits.EEIF=0;                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003d82   0efd     MOVLW     0xfd           	EEADRH=(BYTE)(addr>>8);                                                         F:\MCP\projects\CAN\Include\EEAccess.c
003d84   cfdb     MOVFF     0xfdb,0xb                                                                                       
003d86   f00b                                                                                                               
003d88   0efe     MOVLW     0xfe                                                                                            
003d8a   cfdb     MOVFF     0xfdb,0xc                                                                                       
003d8c   f00c                                                                                                               
003d8e   c00c     MOVFF     0xc,0xb                                                                                         
003d90   f00b                                                                                                               
003d92   6a0c     CLRF      0xc,0x0                                                                                         
003d94   500b     MOVF      0xb,0x0,0x0                                                                                     
003d96   6eaa     MOVWF     0xaa,0x0                                                                                        
003d98   0eff     MOVLW     0xff           	EEADR=(BYTE)(addr & 0xFF);                                                      F:\MCP\projects\CAN\Include\EEAccess.c
003d9a   6ee7     MOVWF     0xe7,0x0                                                                                        
003d9c   0efd     MOVLW     0xfd                                                                                            
003d9e   cfdb     MOVFF     0xfdb,0xb                                                                                       
003da0   f00b                                                                                                               
003da2   0efe     MOVLW     0xfe                                                                                            
003da4   cfdb     MOVFF     0xfdb,0xc                                                                                       
003da6   f00c                                                                                                               
003da8   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003daa   160b     ANDWF     0xb,0x1,0x0                                                                                     
003dac   6a0c     CLRF      0xc,0x0                                                                                         
003dae   500b     MOVF      0xb,0x0,0x0                                                                                     
003db0   6ea9     MOVWF     0xa9,0x0                                                                                        
003db2   0efc     MOVLW     0xfc           	EEDATA=data;                                                                    F:\MCP\projects\CAN\Include\EEAccess.c
003db4   50db     MOVF      0xdb,0x0,0x0                                                                                    
003db6   6ea8     MOVWF     0xa8,0x0                                                                                        
003db8   9ea6     BCF       0xa6,0x7,0x0   	EECON1bits.EEPGD=0;                                                             F:\MCP\projects\CAN\Include\EEAccess.c
003dba   9ca6     BCF       0xa6,0x6,0x0   	EECON1bits.CFGS=0;                                                              F:\MCP\projects\CAN\Include\EEAccess.c
003dbc   84a6     BSF       0xa6,0x2,0x0   	EECON1bits.WREN=1;                                                              F:\MCP\projects\CAN\Include\EEAccess.c
003dbe   9ef2     BCF       0xf2,0x7,0x0   	INTCONbits.GIE=0;                                                               F:\MCP\projects\CAN\Include\EEAccess.c
003dc0   0e55     MOVLW     0x55           	EECON2=0x55;                                                                    F:\MCP\projects\CAN\Include\EEAccess.c
003dc2   6ea7     MOVWF     0xa7,0x0                                                                                        
003dc4   0eaa     MOVLW     0xaa           	EECON2=0xAA;                                                                    F:\MCP\projects\CAN\Include\EEAccess.c
003dc6   6ea7     MOVWF     0xa7,0x0                                                                                        
003dc8   82a6     BSF       0xa6,0x1,0x0   	EECON1bits.WR=1;                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003dca   8ef2     BSF       0xf2,0x7,0x0   	INTCONbits.GIE=1;                                                               F:\MCP\projects\CAN\Include\EEAccess.c
003dcc   a8a1     BTFSS     0xa1,0x4,0x0   	while(!PIR2bits.EEIF);                                                          F:\MCP\projects\CAN\Include\EEAccess.c
003dce   d7fe     BRA       0x3dcc                                                                                          
003dd0   94a6     BCF       0xa6,0x2,0x0   	EECON1bits.WREN=0;                                                              F:\MCP\projects\CAN\Include\EEAccess.c
003dd2   52e5     MOVF      0xe5,0x1,0x0   }                                                                                F:\MCP\projects\CAN\Include\EEAccess.c
003dd4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003dd6   ffd9                                                                                                               
003dd8   0012     RETURN    0x0                                                                                             
                                           /*********************************************************************           F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            *                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            *                  IR reciver module                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            *                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            *********************************************************************           F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            * FileName:        $HeadURL: http://svn.arune.se/svn/HomeAutomation/trunk/EmbeddedSoftware/PIC/canIR/Source/IRec.c $ F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            * Last changed:	$LastChangedDate: 2006-11-18 22:14:33 +0100 (l√∂, 18 nov 2006) $ F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            * By:				$LastChangedBy: johboh $                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            * Revision:		$Revision: 124 $                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                            ********************************************************************/           F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           #include <IRec.h>                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           #include <CAN.h>                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           #include <funcdefs.h>                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           #ifdef USE_IREC                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           static BYTE toggle = 0;                                                          F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           static BYTE addr = 0;                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           static BYTE data = 0;                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           static BYTE bitIndex = 0;                                                        F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           static IR_TYPE type = IR_NONE;                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           /*                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Function: irecInit                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Pre-conditions: none                                                           F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Affects: none                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Depends: TIMER 3 is free                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           */                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           void irecInit()                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	// Setup timer 3 to be source for CCP1                                          F:\MCP\projects\CAN\canIR\Source\IRec.c
003664   0ef9     MOVLW     0xf9           	T3CON = 0b11111001;                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003666   6eb1     MOVWF     0xb1,0x0                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	// configure timer 3 interrupt (for overflow)                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
003668   92a1     BCF       0xa1,0x1,0x0   	PIR2bits.TMR3IF = 0;                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
00366a   82a0     BSF       0xa0,0x1,0x0   	PIE2bits.TMR3IE = 1;                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
00366c   82a2     BSF       0xa2,0x1,0x0   	IPR2bits.TMR3IP = 1;                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	// Setup CCP1 to use capture on falling edge                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
00366e   0e04     MOVLW     0x4            	CCP1CON=0x04;                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
003670   6ebd     MOVWF     0xbd,0x0                                                                                        
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	// Enable CCP1 interrupt and set priority to high.                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003672   949e     BCF       0x9e,0x2,0x0   	PIR1bits.CCP1IF=0;                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003674   849d     BSF       0x9d,0x2,0x0   	PIE1bits.CCP1IE=1;                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003676   849f     BSF       0x9f,0x2,0x0   	IPR1bits.CCP1IP=1;                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003678   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           /*                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Function: irecISR                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Input:	none                                                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Output: none                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Pre-conditions: a call to irecInit()                                           F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Affects: ...                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           *	Depends: ...                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           */                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           void irecISR()                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           {                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	static WORD timediff = 0;                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	static BOOL started = FALSE;                                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	static BYTE lastbit = 1;                                                        F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	static BOOL second = FALSE;                                                     F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	// If IR bit                                                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
00367a   509e     MOVF      0x9e,0x0,0x0   	if(PIR1bits.CCP1IF && PIE1bits.CCP1IE)                                          F:\MCP\projects\CAN\canIR\Source\IRec.c
00367c   0b04     ANDLW     0x4                                                                                             
00367e   e101     BNZ       0x3682                                                                                          
003680   d232     BRA       0x3ae6                                                                                          
003682   509d     MOVF      0x9d,0x0,0x0                                                                                    
003684   0b04     ANDLW     0x4                                                                                             
003686   e101     BNZ       0x368a                                                                                          
003688   d22e     BRA       0x3ae6                                                                                          
                                           	{                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// Read timediff                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
00368a   50b2     MOVF      0xb2,0x0,0x0   		timediff  = TMR3L;                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
00368c   0100     MOVLB     0x0                                                                                             
00368e   6f84     MOVWF     0x84,0x1                                                                                        
003690   6b85     CLRF      0x85,0x1                                                                                        
003692   50b3     MOVF      0xb3,0x0,0x0   		timediff += (((WORD)TMR3H)<<8);                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003694   6e0b     MOVWF     0xb,0x0                                                                                         
003696   c00b     MOVFF     0xb,0xc                                                                                         
003698   f00c                                                                                                               
00369a   6a0b     CLRF      0xb,0x0                                                                                         
00369c   500b     MOVF      0xb,0x0,0x0                                                                                     
00369e   2784     ADDWF     0x84,0x1,0x1                                                                                    
0036a0   500c     MOVF      0xc,0x0,0x0                                                                                     
0036a2   2385     ADDWFC    0x85,0x1,0x1                                                                                    
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// Clear timer.                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0036a4   6ab3     CLRF      0xb3,0x0       		TMR3H = 0;                                                                     F:\MCP\projects\CAN\canIR\Source\IRec.c
0036a6   6ab2     CLRF      0xb2,0x0       		TMR3L = 0;                                                                     F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// Wait on inverse edge                                                        F:\MCP\projects\CAN\canIR\Source\IRec.c
0036a8   70bd     BTG       0xbd,0x0,0x0   		CCP1CONbits.CCP1M0=~CCP1CONbits.CCP1M0;                                        F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// Disable interrupt                                                           F:\MCP\projects\CAN\canIR\Source\IRec.c
0036aa   949e     BCF       0x9e,0x2,0x0   		PIR1bits.CCP1IF=0;                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// If found RC5 och RC5X startbit...                                           F:\MCP\projects\CAN\canIR\Source\IRec.c
0036ac   0586     DECF      0x86,0x0,0x1   		if (started==TRUE && (type==IR_RC5 || type==IR_RC5X))                          F:\MCP\projects\CAN\canIR\Source\IRec.c
0036ae   e001     BZ        0x36b2                                                                                          
0036b0   d0d0     BRA       0x3852                                                                                          
0036b2   0583     DECF      0x83,0x0,0x1                                                                                    
0036b4   e004     BZ        0x36be                                                                                          
0036b6   0e02     MOVLW     0x2                                                                                             
0036b8   5d83     SUBWF     0x83,0x0,0x1                                                                                    
0036ba   e001     BZ        0x36be                                                                                          
0036bc   d0ca     BRA       0x3852                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			// Parse message                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
0036be   0e33     MOVLW     0x33           			if ((t2-250)<timediff && timediff<(t2+250) && second==FALSE)                  F:\MCP\projects\CAN\canIR\Source\IRec.c
0036c0   80d8     BSF       0xd8,0x0,0x0                                                                                    
0036c2   5584     SUBFWB    0x84,0x0,0x1                                                                                    
0036c4   0e03     MOVLW     0x3                                                                                             
0036c6   5585     SUBFWB    0x85,0x0,0x1                                                                                    
0036c8   e235     BC        0x3734                                                                                          
0036ca   0e27     MOVLW     0x27                                                                                            
0036cc   5d84     SUBWF     0x84,0x0,0x1                                                                                    
0036ce   0e05     MOVLW     0x5                                                                                             
0036d0   5985     SUBWFB    0x85,0x0,0x1                                                                                    
0036d2   e230     BC        0x3734                                                                                          
0036d4   5188     MOVF      0x88,0x0,0x1                                                                                    
0036d6   e12e     BNZ       0x3734                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0036d8   5182     MOVF      0x82,0x0,0x1   				if (bitIndex==0) toggle=lastbit;                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0036da   e102     BNZ       0x36e0                                                                                          
0036dc   c087     MOVFF     0x87,0x7f                                                                                       
0036de   f07f                                                                                                               
0036e0   0e01     MOVLW     0x1            				if (bitIndex>=1 && bitIndex<=5) addr+=(lastbit<<(5-bitIndex));               F:\MCP\projects\CAN\canIR\Source\IRec.c
0036e2   5d82     SUBWF     0x82,0x0,0x1                                                                                    
0036e4   e310     BNC       0x3706                                                                                          
0036e6   5182     MOVF      0x82,0x0,0x1                                                                                    
0036e8   0805     SUBLW     0x5                                                                                             
0036ea   e30d     BNC       0x3706                                                                                          
0036ec   0e05     MOVLW     0x5                                                                                             
0036ee   80d8     BSF       0xd8,0x0,0x0                                                                                    
0036f0   5582     SUBFWB    0x82,0x0,0x1                                                                                    
0036f2   6e0b     MOVWF     0xb,0x0                                                                                         
0036f4   5187     MOVF      0x87,0x0,0x1                                                                                    
0036f6   520b     MOVF      0xb,0x1,0x0                                                                                     
0036f8   e004     BZ        0x3702                                                                                          
0036fa   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
0036fc   0bfe     ANDLW     0xfe                                                                                            
0036fe   060b     DECF      0xb,0x1,0x0                                                                                     
003700   e1fc     BNZ       0x36fa                                                                                          
003702   0100     MOVLB     0x0                                                                                             
003704   2780     ADDWF     0x80,0x1,0x1                                                                                    
003706   0e06     MOVLW     0x6            				if (bitIndex>=6 && bitIndex<=11) data+=(lastbit<<(11-bitIndex));             F:\MCP\projects\CAN\canIR\Source\IRec.c
003708   5d82     SUBWF     0x82,0x0,0x1                                                                                    
00370a   e310     BNC       0x372c                                                                                          
00370c   5182     MOVF      0x82,0x0,0x1                                                                                    
00370e   080b     SUBLW     0xb                                                                                             
003710   e30d     BNC       0x372c                                                                                          
003712   0e0b     MOVLW     0xb                                                                                             
003714   80d8     BSF       0xd8,0x0,0x0                                                                                    
003716   5582     SUBFWB    0x82,0x0,0x1                                                                                    
003718   6e0b     MOVWF     0xb,0x0                                                                                         
00371a   5187     MOVF      0x87,0x0,0x1                                                                                    
00371c   520b     MOVF      0xb,0x1,0x0                                                                                     
00371e   e004     BZ        0x3728                                                                                          
003720   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
003722   0bfe     ANDLW     0xfe                                                                                            
003724   060b     DECF      0xb,0x1,0x0                                                                                     
003726   e1fc     BNZ       0x3720                                                                                          
003728   0100     MOVLB     0x0                                                                                             
00372a   2781     ADDWF     0x81,0x1,0x1                                                                                    
00372c   2b82     INCF      0x82,0x1,0x1   				bitIndex++;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
00372e   0e01     MOVLW     0x1            				second = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
003730   6f88     MOVWF     0x88,0x1                                                                                        
003732   d1f9     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003734   0e8f     MOVLW     0x8f           			if ((t4-250)<timediff && timediff<(t4+250) && second==FALSE)                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003736   80d8     BSF       0xd8,0x0,0x0                                                                                    
003738   5584     SUBFWB    0x84,0x0,0x1                                                                                    
00373a   0e07     MOVLW     0x7                                                                                             
00373c   5585     SUBFWB    0x85,0x0,0x1                                                                                    
00373e   e23b     BC        0x37b6                                                                                          
003740   0e83     MOVLW     0x83                                                                                            
003742   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003744   0e09     MOVLW     0x9                                                                                             
003746   5985     SUBWFB    0x85,0x0,0x1                                                                                    
003748   e236     BC        0x37b6                                                                                          
00374a   5188     MOVF      0x88,0x0,0x1                                                                                    
00374c   e134     BNZ       0x37b6                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
00374e   5187     MOVF      0x87,0x0,0x1   				lastbit=(lastbit?0:1);                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
003750   e002     BZ        0x3756                                                                                          
003752   0e00     MOVLW     0x0                                                                                             
003754   d001     BRA       0x3758                                                                                          
003756   0e01     MOVLW     0x1                                                                                             
003758   6f87     MOVWF     0x87,0x1                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
00375a   5182     MOVF      0x82,0x0,0x1   				if (bitIndex==0) toggle=lastbit;                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
00375c   e102     BNZ       0x3762                                                                                          
00375e   c087     MOVFF     0x87,0x7f                                                                                       
003760   f07f                                                                                                               
003762   0e01     MOVLW     0x1            				if (bitIndex>=1 && bitIndex<=5) addr+=(lastbit<<(5-bitIndex));               F:\MCP\projects\CAN\canIR\Source\IRec.c
003764   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003766   e310     BNC       0x3788                                                                                          
003768   5182     MOVF      0x82,0x0,0x1                                                                                    
00376a   0805     SUBLW     0x5                                                                                             
00376c   e30d     BNC       0x3788                                                                                          
00376e   0e05     MOVLW     0x5                                                                                             
003770   80d8     BSF       0xd8,0x0,0x0                                                                                    
003772   5582     SUBFWB    0x82,0x0,0x1                                                                                    
003774   6e0b     MOVWF     0xb,0x0                                                                                         
003776   5187     MOVF      0x87,0x0,0x1                                                                                    
003778   520b     MOVF      0xb,0x1,0x0                                                                                     
00377a   e004     BZ        0x3784                                                                                          
00377c   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
00377e   0bfe     ANDLW     0xfe                                                                                            
003780   060b     DECF      0xb,0x1,0x0                                                                                     
003782   e1fc     BNZ       0x377c                                                                                          
003784   0100     MOVLB     0x0                                                                                             
003786   2780     ADDWF     0x80,0x1,0x1                                                                                    
003788   0e06     MOVLW     0x6            				if (bitIndex>=6 && bitIndex<=11) data+=(lastbit<<(11-bitIndex));             F:\MCP\projects\CAN\canIR\Source\IRec.c
00378a   5d82     SUBWF     0x82,0x0,0x1                                                                                    
00378c   e310     BNC       0x37ae                                                                                          
00378e   5182     MOVF      0x82,0x0,0x1                                                                                    
003790   080b     SUBLW     0xb                                                                                             
003792   e30d     BNC       0x37ae                                                                                          
003794   0e0b     MOVLW     0xb                                                                                             
003796   80d8     BSF       0xd8,0x0,0x0                                                                                    
003798   5582     SUBFWB    0x82,0x0,0x1                                                                                    
00379a   6e0b     MOVWF     0xb,0x0                                                                                         
00379c   5187     MOVF      0x87,0x0,0x1                                                                                    
00379e   520b     MOVF      0xb,0x1,0x0                                                                                     
0037a0   e004     BZ        0x37aa                                                                                          
0037a2   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
0037a4   0bfe     ANDLW     0xfe                                                                                            
0037a6   060b     DECF      0xb,0x1,0x0                                                                                     
0037a8   e1fc     BNZ       0x37a2                                                                                          
0037aa   0100     MOVLB     0x0                                                                                             
0037ac   2781     ADDWF     0x81,0x1,0x1                                                                                    
0037ae   2b82     INCF      0x82,0x1,0x1   				bitIndex++;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0037b0   0e01     MOVLW     0x1            				second = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
0037b2   6f88     MOVWF     0x88,0x1                                                                                        
0037b4   d1b8     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0037b6   0e33     MOVLW     0x33           			if ((t2-250)<timediff && timediff<(t2+250) && second==TRUE)                   F:\MCP\projects\CAN\canIR\Source\IRec.c
0037b8   80d8     BSF       0xd8,0x0,0x0                                                                                    
0037ba   5584     SUBFWB    0x84,0x0,0x1                                                                                    
0037bc   0e03     MOVLW     0x3                                                                                             
0037be   5585     SUBFWB    0x85,0x0,0x1                                                                                    
0037c0   e209     BC        0x37d4                                                                                          
0037c2   0e27     MOVLW     0x27                                                                                            
0037c4   5d84     SUBWF     0x84,0x0,0x1                                                                                    
0037c6   0e05     MOVLW     0x5                                                                                             
0037c8   5985     SUBWFB    0x85,0x0,0x1                                                                                    
0037ca   e204     BC        0x37d4                                                                                          
0037cc   0588     DECF      0x88,0x0,0x1                                                                                    
0037ce   e102     BNZ       0x37d4                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0037d0   6b88     CLRF      0x88,0x1       				second = FALSE;                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
0037d2   d1a9     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0037d4   0e8f     MOVLW     0x8f           			if ((t4-250)<timediff && timediff<(t4+250) && second==TRUE)                   F:\MCP\projects\CAN\canIR\Source\IRec.c
0037d6   80d8     BSF       0xd8,0x0,0x0                                                                                    
0037d8   5584     SUBFWB    0x84,0x0,0x1                                                                                    
0037da   0e07     MOVLW     0x7                                                                                             
0037dc   5585     SUBFWB    0x85,0x0,0x1                                                                                    
0037de   e239     BC        0x3852                                                                                          
0037e0   0e83     MOVLW     0x83                                                                                            
0037e2   5d84     SUBWF     0x84,0x0,0x1                                                                                    
0037e4   0e09     MOVLW     0x9                                                                                             
0037e6   5985     SUBWFB    0x85,0x0,0x1                                                                                    
0037e8   e234     BC        0x3852                                                                                          
0037ea   0588     DECF      0x88,0x0,0x1                                                                                    
0037ec   e132     BNZ       0x3852                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0037ee   5187     MOVF      0x87,0x0,0x1   				lastbit=(lastbit?0:1);                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
0037f0   e002     BZ        0x37f6                                                                                          
0037f2   0e00     MOVLW     0x0                                                                                             
0037f4   d001     BRA       0x37f8                                                                                          
0037f6   0e01     MOVLW     0x1                                                                                             
0037f8   6f87     MOVWF     0x87,0x1                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0037fa   5182     MOVF      0x82,0x0,0x1   				if (bitIndex==0) toggle=lastbit;                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0037fc   e102     BNZ       0x3802                                                                                          
0037fe   c087     MOVFF     0x87,0x7f                                                                                       
003800   f07f                                                                                                               
003802   0e01     MOVLW     0x1            				if (bitIndex>=1 && bitIndex<=5) addr+=(lastbit<<(5-bitIndex));               F:\MCP\projects\CAN\canIR\Source\IRec.c
003804   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003806   e310     BNC       0x3828                                                                                          
003808   5182     MOVF      0x82,0x0,0x1                                                                                    
00380a   0805     SUBLW     0x5                                                                                             
00380c   e30d     BNC       0x3828                                                                                          
00380e   0e05     MOVLW     0x5                                                                                             
003810   80d8     BSF       0xd8,0x0,0x0                                                                                    
003812   5582     SUBFWB    0x82,0x0,0x1                                                                                    
003814   6e0b     MOVWF     0xb,0x0                                                                                         
003816   5187     MOVF      0x87,0x0,0x1                                                                                    
003818   520b     MOVF      0xb,0x1,0x0                                                                                     
00381a   e004     BZ        0x3824                                                                                          
00381c   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
00381e   0bfe     ANDLW     0xfe                                                                                            
003820   060b     DECF      0xb,0x1,0x0                                                                                     
003822   e1fc     BNZ       0x381c                                                                                          
003824   0100     MOVLB     0x0                                                                                             
003826   2780     ADDWF     0x80,0x1,0x1                                                                                    
003828   0e06     MOVLW     0x6            				if (bitIndex>=6 && bitIndex<=11) data+=(lastbit<<(11-bitIndex));             F:\MCP\projects\CAN\canIR\Source\IRec.c
00382a   5d82     SUBWF     0x82,0x0,0x1                                                                                    
00382c   e310     BNC       0x384e                                                                                          
00382e   5182     MOVF      0x82,0x0,0x1                                                                                    
003830   080b     SUBLW     0xb                                                                                             
003832   e30d     BNC       0x384e                                                                                          
003834   0e0b     MOVLW     0xb                                                                                             
003836   80d8     BSF       0xd8,0x0,0x0                                                                                    
003838   5582     SUBFWB    0x82,0x0,0x1                                                                                    
00383a   6e0b     MOVWF     0xb,0x0                                                                                         
00383c   5187     MOVF      0x87,0x0,0x1                                                                                    
00383e   520b     MOVF      0xb,0x1,0x0                                                                                     
003840   e004     BZ        0x384a                                                                                          
003842   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
003844   0bfe     ANDLW     0xfe                                                                                            
003846   060b     DECF      0xb,0x1,0x0                                                                                     
003848   e1fc     BNZ       0x3842                                                                                          
00384a   0100     MOVLB     0x0                                                                                             
00384c   2781     ADDWF     0x81,0x1,0x1                                                                                    
00384e   2b82     INCF      0x82,0x1,0x1   				bitIndex++;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003850   d16a     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		} // if started and type == RC5 or RC5X                                        F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// If RC6...                                                                   F:\MCP\projects\CAN\canIR\Source\IRec.c
003852   0586     DECF      0x86,0x0,0x1   		if (started==TRUE && type==IR_RC6)                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003854   e001     BZ        0x3858                                                                                          
003856   d0ce     BRA       0x39f4                                                                                          
003858   0e03     MOVLW     0x3                                                                                             
00385a   5d83     SUBWF     0x83,0x0,0x1                                                                                    
00385c   e001     BZ        0x3860                                                                                          
00385e   d0ca     BRA       0x39f4                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003860   0e1c     MOVLW     0x1c           			if ((t1-250)<timediff && timediff<(t1+250) && second==FALSE)                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003862   80d8     BSF       0xd8,0x0,0x0                                                                                    
003864   5584     SUBFWB    0x84,0x0,0x1                                                                                    
003866   0e01     MOVLW     0x1                                                                                             
003868   5585     SUBFWB    0x85,0x0,0x1                                                                                    
00386a   e235     BC        0x38d6                                                                                          
00386c   0e10     MOVLW     0x10                                                                                            
00386e   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003870   0e03     MOVLW     0x3                                                                                             
003872   5985     SUBWFB    0x85,0x0,0x1                                                                                    
003874   e230     BC        0x38d6                                                                                          
003876   5188     MOVF      0x88,0x0,0x1                                                                                    
003878   e12e     BNZ       0x38d6                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
00387a   5182     MOVF      0x82,0x0,0x1   				if (bitIndex==0) toggle=lastbit;                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
00387c   e102     BNZ       0x3882                                                                                          
00387e   c087     MOVFF     0x87,0x7f                                                                                       
003880   f07f                                                                                                               
003882   0e01     MOVLW     0x1            				if (bitIndex>=1 && bitIndex<=8) addr+=(lastbit<<(8-bitIndex));               F:\MCP\projects\CAN\canIR\Source\IRec.c
003884   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003886   e310     BNC       0x38a8                                                                                          
003888   5182     MOVF      0x82,0x0,0x1                                                                                    
00388a   0808     SUBLW     0x8                                                                                             
00388c   e30d     BNC       0x38a8                                                                                          
00388e   0e08     MOVLW     0x8                                                                                             
003890   80d8     BSF       0xd8,0x0,0x0                                                                                    
003892   5582     SUBFWB    0x82,0x0,0x1                                                                                    
003894   6e0b     MOVWF     0xb,0x0                                                                                         
003896   5187     MOVF      0x87,0x0,0x1                                                                                    
003898   520b     MOVF      0xb,0x1,0x0                                                                                     
00389a   e004     BZ        0x38a4                                                                                          
00389c   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
00389e   0bfe     ANDLW     0xfe                                                                                            
0038a0   060b     DECF      0xb,0x1,0x0                                                                                     
0038a2   e1fc     BNZ       0x389c                                                                                          
0038a4   0100     MOVLB     0x0                                                                                             
0038a6   2780     ADDWF     0x80,0x1,0x1                                                                                    
0038a8   0e09     MOVLW     0x9            				if (bitIndex>=9 && bitIndex<=16) data+=(lastbit<<(16-bitIndex));             F:\MCP\projects\CAN\canIR\Source\IRec.c
0038aa   5d82     SUBWF     0x82,0x0,0x1                                                                                    
0038ac   e310     BNC       0x38ce                                                                                          
0038ae   5182     MOVF      0x82,0x0,0x1                                                                                    
0038b0   0810     SUBLW     0x10                                                                                            
0038b2   e30d     BNC       0x38ce                                                                                          
0038b4   0e10     MOVLW     0x10                                                                                            
0038b6   80d8     BSF       0xd8,0x0,0x0                                                                                    
0038b8   5582     SUBFWB    0x82,0x0,0x1                                                                                    
0038ba   6e0b     MOVWF     0xb,0x0                                                                                         
0038bc   5187     MOVF      0x87,0x0,0x1                                                                                    
0038be   520b     MOVF      0xb,0x1,0x0                                                                                     
0038c0   e004     BZ        0x38ca                                                                                          
0038c2   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
0038c4   0bfe     ANDLW     0xfe                                                                                            
0038c6   060b     DECF      0xb,0x1,0x0                                                                                     
0038c8   e1fc     BNZ       0x38c2                                                                                          
0038ca   0100     MOVLB     0x0                                                                                             
0038cc   2781     ADDWF     0x81,0x1,0x1                                                                                    
0038ce   2b82     INCF      0x82,0x1,0x1   				bitIndex++;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0038d0   0e01     MOVLW     0x1            				second = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
0038d2   6f88     MOVWF     0x88,0x1                                                                                        
0038d4   d128     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0038d6   0e33     MOVLW     0x33           			if ((t2-250)<timediff && timediff<(t2+250) && second==FALSE)                  F:\MCP\projects\CAN\canIR\Source\IRec.c
0038d8   80d8     BSF       0xd8,0x0,0x0                                                                                    
0038da   5584     SUBFWB    0x84,0x0,0x1                                                                                    
0038dc   0e03     MOVLW     0x3                                                                                             
0038de   5585     SUBFWB    0x85,0x0,0x1                                                                                    
0038e0   e23b     BC        0x3958                                                                                          
0038e2   0e27     MOVLW     0x27                                                                                            
0038e4   5d84     SUBWF     0x84,0x0,0x1                                                                                    
0038e6   0e05     MOVLW     0x5                                                                                             
0038e8   5985     SUBWFB    0x85,0x0,0x1                                                                                    
0038ea   e236     BC        0x3958                                                                                          
0038ec   5188     MOVF      0x88,0x0,0x1                                                                                    
0038ee   e134     BNZ       0x3958                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0038f0   5187     MOVF      0x87,0x0,0x1   				lastbit=(lastbit?0:1);                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
0038f2   e002     BZ        0x38f8                                                                                          
0038f4   0e00     MOVLW     0x0                                                                                             
0038f6   d001     BRA       0x38fa                                                                                          
0038f8   0e01     MOVLW     0x1                                                                                             
0038fa   6f87     MOVWF     0x87,0x1                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0038fc   5182     MOVF      0x82,0x0,0x1   				if (bitIndex==0) toggle=lastbit;                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
0038fe   e102     BNZ       0x3904                                                                                          
003900   c087     MOVFF     0x87,0x7f                                                                                       
003902   f07f                                                                                                               
003904   0e01     MOVLW     0x1            				if (bitIndex>=1 && bitIndex<=8) addr+=(lastbit<<(8-bitIndex));               F:\MCP\projects\CAN\canIR\Source\IRec.c
003906   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003908   e310     BNC       0x392a                                                                                          
00390a   5182     MOVF      0x82,0x0,0x1                                                                                    
00390c   0808     SUBLW     0x8                                                                                             
00390e   e30d     BNC       0x392a                                                                                          
003910   0e08     MOVLW     0x8                                                                                             
003912   80d8     BSF       0xd8,0x0,0x0                                                                                    
003914   5582     SUBFWB    0x82,0x0,0x1                                                                                    
003916   6e0b     MOVWF     0xb,0x0                                                                                         
003918   5187     MOVF      0x87,0x0,0x1                                                                                    
00391a   520b     MOVF      0xb,0x1,0x0                                                                                     
00391c   e004     BZ        0x3926                                                                                          
00391e   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
003920   0bfe     ANDLW     0xfe                                                                                            
003922   060b     DECF      0xb,0x1,0x0                                                                                     
003924   e1fc     BNZ       0x391e                                                                                          
003926   0100     MOVLB     0x0                                                                                             
003928   2780     ADDWF     0x80,0x1,0x1                                                                                    
00392a   0e09     MOVLW     0x9            				if (bitIndex>=9 && bitIndex<=16) data+=(lastbit<<(16-bitIndex));             F:\MCP\projects\CAN\canIR\Source\IRec.c
00392c   5d82     SUBWF     0x82,0x0,0x1                                                                                    
00392e   e310     BNC       0x3950                                                                                          
003930   5182     MOVF      0x82,0x0,0x1                                                                                    
003932   0810     SUBLW     0x10                                                                                            
003934   e30d     BNC       0x3950                                                                                          
003936   0e10     MOVLW     0x10                                                                                            
003938   80d8     BSF       0xd8,0x0,0x0                                                                                    
00393a   5582     SUBFWB    0x82,0x0,0x1                                                                                    
00393c   6e0b     MOVWF     0xb,0x0                                                                                         
00393e   5187     MOVF      0x87,0x0,0x1                                                                                    
003940   520b     MOVF      0xb,0x1,0x0                                                                                     
003942   e004     BZ        0x394c                                                                                          
003944   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
003946   0bfe     ANDLW     0xfe                                                                                            
003948   060b     DECF      0xb,0x1,0x0                                                                                     
00394a   e1fc     BNZ       0x3944                                                                                          
00394c   0100     MOVLB     0x0                                                                                             
00394e   2781     ADDWF     0x81,0x1,0x1                                                                                    
003950   2b82     INCF      0x82,0x1,0x1   				bitIndex++;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003952   0e01     MOVLW     0x1            				second = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
003954   6f88     MOVWF     0x88,0x1                                                                                        
003956   d0e7     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003958   0e1c     MOVLW     0x1c           			if ((t1-250)<timediff && timediff<(t1+250) && second==TRUE)                   F:\MCP\projects\CAN\canIR\Source\IRec.c
00395a   80d8     BSF       0xd8,0x0,0x0                                                                                    
00395c   5584     SUBFWB    0x84,0x0,0x1                                                                                    
00395e   0e01     MOVLW     0x1                                                                                             
003960   5585     SUBFWB    0x85,0x0,0x1                                                                                    
003962   e209     BC        0x3976                                                                                          
003964   0e10     MOVLW     0x10                                                                                            
003966   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003968   0e03     MOVLW     0x3                                                                                             
00396a   5985     SUBWFB    0x85,0x0,0x1                                                                                    
00396c   e204     BC        0x3976                                                                                          
00396e   0588     DECF      0x88,0x0,0x1                                                                                    
003970   e102     BNZ       0x3976                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003972   6b88     CLRF      0x88,0x1       				second = FALSE;                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003974   d0d8     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003976   0e33     MOVLW     0x33           			if ((t2-250)<timediff && timediff<(t2+250) && second==TRUE)                   F:\MCP\projects\CAN\canIR\Source\IRec.c
003978   80d8     BSF       0xd8,0x0,0x0                                                                                    
00397a   5584     SUBFWB    0x84,0x0,0x1                                                                                    
00397c   0e03     MOVLW     0x3                                                                                             
00397e   5585     SUBFWB    0x85,0x0,0x1                                                                                    
003980   e239     BC        0x39f4                                                                                          
003982   0e27     MOVLW     0x27                                                                                            
003984   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003986   0e05     MOVLW     0x5                                                                                             
003988   5985     SUBWFB    0x85,0x0,0x1                                                                                    
00398a   e234     BC        0x39f4                                                                                          
00398c   0588     DECF      0x88,0x0,0x1                                                                                    
00398e   e132     BNZ       0x39f4                                                                                          
                                           			{                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003990   5187     MOVF      0x87,0x0,0x1   				lastbit=(lastbit?0:1);                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
003992   e002     BZ        0x3998                                                                                          
003994   0e00     MOVLW     0x0                                                                                             
003996   d001     BRA       0x399a                                                                                          
003998   0e01     MOVLW     0x1                                                                                             
00399a   6f87     MOVWF     0x87,0x1                                                                                        
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
00399c   5182     MOVF      0x82,0x0,0x1   				if (bitIndex==0) toggle=lastbit;                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
00399e   e102     BNZ       0x39a4                                                                                          
0039a0   c087     MOVFF     0x87,0x7f                                                                                       
0039a2   f07f                                                                                                               
0039a4   0e01     MOVLW     0x1            				if (bitIndex>=1 && bitIndex<=8) addr+=(lastbit<<(8-bitIndex));               F:\MCP\projects\CAN\canIR\Source\IRec.c
0039a6   5d82     SUBWF     0x82,0x0,0x1                                                                                    
0039a8   e310     BNC       0x39ca                                                                                          
0039aa   5182     MOVF      0x82,0x0,0x1                                                                                    
0039ac   0808     SUBLW     0x8                                                                                             
0039ae   e30d     BNC       0x39ca                                                                                          
0039b0   0e08     MOVLW     0x8                                                                                             
0039b2   80d8     BSF       0xd8,0x0,0x0                                                                                    
0039b4   5582     SUBFWB    0x82,0x0,0x1                                                                                    
0039b6   6e0b     MOVWF     0xb,0x0                                                                                         
0039b8   5187     MOVF      0x87,0x0,0x1                                                                                    
0039ba   520b     MOVF      0xb,0x1,0x0                                                                                     
0039bc   e004     BZ        0x39c6                                                                                          
0039be   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
0039c0   0bfe     ANDLW     0xfe                                                                                            
0039c2   060b     DECF      0xb,0x1,0x0                                                                                     
0039c4   e1fc     BNZ       0x39be                                                                                          
0039c6   0100     MOVLB     0x0                                                                                             
0039c8   2780     ADDWF     0x80,0x1,0x1                                                                                    
0039ca   0e09     MOVLW     0x9            				if (bitIndex>=9 && bitIndex<=16) data+=(lastbit<<(16-bitIndex));             F:\MCP\projects\CAN\canIR\Source\IRec.c
0039cc   5d82     SUBWF     0x82,0x0,0x1                                                                                    
0039ce   e310     BNC       0x39f0                                                                                          
0039d0   5182     MOVF      0x82,0x0,0x1                                                                                    
0039d2   0810     SUBLW     0x10                                                                                            
0039d4   e30d     BNC       0x39f0                                                                                          
0039d6   0e10     MOVLW     0x10                                                                                            
0039d8   80d8     BSF       0xd8,0x0,0x0                                                                                    
0039da   5582     SUBFWB    0x82,0x0,0x1                                                                                    
0039dc   6e0b     MOVWF     0xb,0x0                                                                                         
0039de   5187     MOVF      0x87,0x0,0x1                                                                                    
0039e0   520b     MOVF      0xb,0x1,0x0                                                                                     
0039e2   e004     BZ        0x39ec                                                                                          
0039e4   46e8     RLNCF     0xe8,0x1,0x0                                                                                    
0039e6   0bfe     ANDLW     0xfe                                                                                            
0039e8   060b     DECF      0xb,0x1,0x0                                                                                     
0039ea   e1fc     BNZ       0x39e4                                                                                          
0039ec   0100     MOVLB     0x0                                                                                             
0039ee   2781     ADDWF     0x81,0x1,0x1                                                                                    
0039f0   2b82     INCF      0x82,0x1,0x1   				bitIndex++;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
0039f2   d099     BRA       0x3b26         				return;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           			}                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		} // if started and type == RC6                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
0039f4   2b82     INCF      0x82,0x1,0x1   		bitIndex++;                                                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
0039f6   5186     MOVF      0x86,0x0,0x1   		if (started==FALSE && type==IR_NONE && bitIndex==2 && (t2-250)<timediff && timediff<(t2+250)) F:\MCP\projects\CAN\canIR\Source\IRec.c
0039f8   e113     BNZ       0x3a20                                                                                          
0039fa   5183     MOVF      0x83,0x0,0x1                                                                                    
0039fc   e111     BNZ       0x3a20                                                                                          
0039fe   0e02     MOVLW     0x2                                                                                             
003a00   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003a02   e10e     BNZ       0x3a20                                                                                          
003a04   0e33     MOVLW     0x33                                                                                            
003a06   80d8     BSF       0xd8,0x0,0x0                                                                                    
003a08   5584     SUBFWB    0x84,0x0,0x1                                                                                    
003a0a   0e03     MOVLW     0x3                                                                                             
003a0c   5585     SUBFWB    0x85,0x0,0x1                                                                                    
003a0e   e208     BC        0x3a20                                                                                          
003a10   0e27     MOVLW     0x27                                                                                            
003a12   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003a14   0e05     MOVLW     0x5                                                                                             
003a16   5985     SUBWFB    0x85,0x0,0x1                                                                                    
003a18   e203     BC        0x3a20                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a1a   0e01     MOVLW     0x1            			type=IR_RC5;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003a1c   6f83     MOVWF     0x83,0x1                                                                                        
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a1e   d063     BRA       0x3ae6         		else if (started==FALSE && type==IR_NONE && bitIndex==2 && (t4-250)<timediff && timediff<(t4+250)) F:\MCP\projects\CAN\canIR\Source\IRec.c
003a20   5186     MOVF      0x86,0x0,0x1                                                                                    
003a22   e117     BNZ       0x3a52                                                                                          
003a24   5183     MOVF      0x83,0x0,0x1                                                                                    
003a26   e115     BNZ       0x3a52                                                                                          
003a28   0e02     MOVLW     0x2                                                                                             
003a2a   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003a2c   e112     BNZ       0x3a52                                                                                          
003a2e   0e8f     MOVLW     0x8f                                                                                            
003a30   80d8     BSF       0xd8,0x0,0x0                                                                                    
003a32   5584     SUBFWB    0x84,0x0,0x1                                                                                    
003a34   0e07     MOVLW     0x7                                                                                             
003a36   5585     SUBFWB    0x85,0x0,0x1                                                                                    
003a38   e20c     BC        0x3a52                                                                                          
003a3a   0e83     MOVLW     0x83                                                                                            
003a3c   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003a3e   0e09     MOVLW     0x9                                                                                             
003a40   5985     SUBWFB    0x85,0x0,0x1                                                                                    
003a42   e207     BC        0x3a52                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a44   0e01     MOVLW     0x1            			started = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
003a46   6f86     MOVWF     0x86,0x1                                                                                        
003a48   6b82     CLRF      0x82,0x1       			bitIndex = 0;                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
003a4a   6f87     MOVWF     0x87,0x1       			lastbit = 1;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003a4c   0e02     MOVLW     0x2            			type=IR_RC5X;                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
003a4e   6f83     MOVWF     0x83,0x1                                                                                        
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a50   d04a     BRA       0x3ae6         		else if (started==FALSE && type==IR_NONE && bitIndex==2 && (t6-250)<timediff && timediff<(t6+250)) F:\MCP\projects\CAN\canIR\Source\IRec.c
003a52   5186     MOVF      0x86,0x0,0x1                                                                                    
003a54   e113     BNZ       0x3a7c                                                                                          
003a56   5183     MOVF      0x83,0x0,0x1                                                                                    
003a58   e111     BNZ       0x3a7c                                                                                          
003a5a   0e02     MOVLW     0x2                                                                                             
003a5c   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003a5e   e10e     BNZ       0x3a7c                                                                                          
003a60   0e8a     MOVLW     0x8a                                                                                            
003a62   80d8     BSF       0xd8,0x0,0x0                                                                                    
003a64   5584     SUBFWB    0x84,0x0,0x1                                                                                    
003a66   0e0b     MOVLW     0xb                                                                                             
003a68   5585     SUBFWB    0x85,0x0,0x1                                                                                    
003a6a   e208     BC        0x3a7c                                                                                          
003a6c   0e7e     MOVLW     0x7e                                                                                            
003a6e   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003a70   0e0d     MOVLW     0xd                                                                                             
003a72   5985     SUBWFB    0x85,0x0,0x1                                                                                    
003a74   e203     BC        0x3a7c                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a76   0e03     MOVLW     0x3            			type=IR_RC6;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003a78   6f83     MOVWF     0x83,0x1                                                                                        
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a7a   d035     BRA       0x3ae6         		else if (started==FALSE && type==IR_RC6 && bitIndex==9)                        F:\MCP\projects\CAN\canIR\Source\IRec.c
003a7c   5186     MOVF      0x86,0x0,0x1                                                                                    
003a7e   e10f     BNZ       0x3a9e                                                                                          
003a80   0e03     MOVLW     0x3                                                                                             
003a82   5d83     SUBWF     0x83,0x0,0x1                                                                                    
003a84   e10c     BNZ       0x3a9e                                                                                          
003a86   0e09     MOVLW     0x9                                                                                             
003a88   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003a8a   e109     BNZ       0x3a9e                                                                                          
                                           		{	                                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003a8c   0e01     MOVLW     0x1            			started = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
003a8e   6f86     MOVWF     0x86,0x1                                                                                        
003a90   6b82     CLRF      0x82,0x1       			bitIndex = 0;                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
003a92   6b87     CLRF      0x87,0x1       			lastbit = 0;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003a94   0e03     MOVLW     0x3            			type=IR_RC6;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003a96   6f83     MOVWF     0x83,0x1                                                                                        
003a98   0e01     MOVLW     0x1            			second = TRUE;                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
003a9a   6f88     MOVWF     0x88,0x1                                                                                        
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003a9c   d024     BRA       0x3ae6         		else if (started==FALSE && type==IR_RC5 && bitIndex==3 && (t2-250)<timediff && timediff<(t2+250)) F:\MCP\projects\CAN\canIR\Source\IRec.c
003a9e   5186     MOVF      0x86,0x0,0x1                                                                                    
003aa0   e116     BNZ       0x3ace                                                                                          
003aa2   0583     DECF      0x83,0x0,0x1                                                                                    
003aa4   e114     BNZ       0x3ace                                                                                          
003aa6   0e03     MOVLW     0x3                                                                                             
003aa8   5d82     SUBWF     0x82,0x0,0x1                                                                                    
003aaa   e111     BNZ       0x3ace                                                                                          
003aac   0e33     MOVLW     0x33                                                                                            
003aae   80d8     BSF       0xd8,0x0,0x0                                                                                    
003ab0   5584     SUBFWB    0x84,0x0,0x1                                                                                    
003ab2   0e03     MOVLW     0x3                                                                                             
003ab4   5585     SUBFWB    0x85,0x0,0x1                                                                                    
003ab6   e20b     BC        0x3ace                                                                                          
003ab8   0e27     MOVLW     0x27                                                                                            
003aba   5d84     SUBWF     0x84,0x0,0x1                                                                                    
003abc   0e05     MOVLW     0x5                                                                                             
003abe   5985     SUBWFB    0x85,0x0,0x1                                                                                    
003ac0   e206     BC        0x3ace                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003ac2   0e01     MOVLW     0x1            			started = TRUE;                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
003ac4   6f86     MOVWF     0x86,0x1                                                                                        
003ac6   6b82     CLRF      0x82,0x1       			bitIndex = 0;                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
003ac8   6f87     MOVWF     0x87,0x1       			lastbit = 1;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003aca   6f83     MOVWF     0x83,0x1       			type=IR_RC5;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003acc   d00c     BRA       0x3ae6         		else if(bitIndex>2 && type!=IR_RC6)                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003ace   5182     MOVF      0x82,0x0,0x1                                                                                    
003ad0   0802     SUBLW     0x2                                                                                             
003ad2   e205     BC        0x3ade                                                                                          
003ad4   0e03     MOVLW     0x3                                                                                             
003ad6   5d83     SUBWF     0x83,0x0,0x1                                                                                    
003ad8   e002     BZ        0x3ade                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003ada   6b83     CLRF      0x83,0x1       			type=IR_NONE;                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003adc   d004     BRA       0x3ae6         		else if(bitIndex>9)                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003ade   5182     MOVF      0x82,0x0,0x1                                                                                    
003ae0   0809     SUBLW     0x9                                                                                             
003ae2   e201     BC        0x3ae6                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003ae4   6b83     CLRF      0x83,0x1       			type=IR_NONE;                                                                 F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	}                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	// If timer 3 overflow                                                          F:\MCP\projects\CAN\canIR\Source\IRec.c
003ae6   50a1     MOVF      0xa1,0x0,0x0   	if(PIR2bits.TMR3IF && PIE2bits.TMR3IE)                                          F:\MCP\projects\CAN\canIR\Source\IRec.c
003ae8   0b02     ANDLW     0x2                                                                                             
003aea   e01d     BZ        0x3b26                                                                                          
003aec   50a0     MOVF      0xa0,0x0,0x0                                                                                    
003aee   0b02     ANDLW     0x2                                                                                             
003af0   e01a     BZ        0x3b26                                                                                          
                                           	{	                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003af2   92a1     BCF       0xa1,0x1,0x0   		PIR2bits.TMR3IF=0;                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003af4   0100     MOVLB     0x0            		if (type!=IR_NONE)                                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003af6   5183     MOVF      0x83,0x0,0x1                                                                                    
003af8   e00e     BZ        0x3b16                                                                                          
                                           		{                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003afa   c081     MOVFF     0x81,0xfe6     			irecParse(type,toggle,addr,data);                                             F:\MCP\projects\CAN\canIR\Source\IRec.c
003afc   ffe6                                                                                                               
003afe   c080     MOVFF     0x80,0xfe6                                                                                      
003b00   ffe6                                                                                                               
003b02   c07f     MOVFF     0x7f,0xfe6                                                                                      
003b04   ffe6                                                                                                               
003b06   c083     MOVFF     0x83,0xfe6                                                                                      
003b08   ffe6                                                                                                               
003b0a   ec31     CALL      0x3c62,0x0                                                                                      
003b0c   f01e                                                                                                               
003b0e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b10   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b14   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           		}                                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003b16   0100     MOVLB     0x0            		started  = FALSE;                                                              F:\MCP\projects\CAN\canIR\Source\IRec.c
003b18   6b86     CLRF      0x86,0x1                                                                                        
003b1a   6b82     CLRF      0x82,0x1       		bitIndex = 0;                                                                  F:\MCP\projects\CAN\canIR\Source\IRec.c
003b1c   6b80     CLRF      0x80,0x1       		addr = 0;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
003b1e   6b7f     CLRF      0x7f,0x1       		toggle = 0;                                                                    F:\MCP\projects\CAN\canIR\Source\IRec.c
003b20   6b81     CLRF      0x81,0x1       		data = 0;                                                                      F:\MCP\projects\CAN\canIR\Source\IRec.c
003b22   6b83     CLRF      0x83,0x1       		type = IR_NONE;                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		// wait in falling edge.                                                       F:\MCP\projects\CAN\canIR\Source\IRec.c
003b24   90bd     BCF       0xbd,0x0,0x0   		CCP1CONbits.CCP1M0=0;                                                          F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           		                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           	}                                                                               F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
003b26   0012     RETURN    0x0            }                                                                                F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                                                                                                            F:\MCP\projects\CAN\canIR\Source\IRec.c
                                           #endif                                                                           F:\MCP\projects\CAN\canIR\Source\IRec.c
