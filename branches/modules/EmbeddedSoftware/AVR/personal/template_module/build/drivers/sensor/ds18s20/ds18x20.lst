   1               		.file	"ds18x20.c"
   2               		.arch atmega168
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
  84               	.global	DS18X20_meas_to_cel
  86               	DS18X20_meas_to_cel:
   1:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /*********************************************************************************
   2:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** Title:    DS18X20-Functions via One-Wire-Bus
   3:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** Author:   Martin Thomas <eversmith@heizung-thomas.de>   
   4:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****           http://www.siwawi.arubi.uni-kl.de/avr-projects
   5:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** Software: avr-gcc 3.4.1 / avr-libc 1.0.4 
   6:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** Hardware: any AVR - tested with ATmega16/ATmega32 and 3 DS18B20
   7:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
   8:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** Partly based on code from Peter Dannegger and others
   9:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  10:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** changelog:
  11:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 20041124 - Extended measurements for DS18(S)20 contributed by Carsten Foss (CFO)
  12:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 200502xx - function DS18X20_read_meas_single
  13:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 20050310 - DS18x20 EEPROM functions (can be disabled to save flash-memory)
  14:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****            (DS18X20_EEPROMSUPPORT in ds18x20.h)
  15:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  16:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** **********************************************************************************/
  17:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  18:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #include <avr/io.h>
  19:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  20:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #include "ds18x20.h"
  21:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #include "onewire.h"
  22:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #include "crc8.h"
  23:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  24:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #include <config.h>
  25:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  26:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #ifdef DS18X20_EEPROMSUPPORT
  27:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** // for 10ms delay in copy scratchpad
  28:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #include "delay.h"
  29:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** #endif
  30:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  31:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint8_t search_sensors(void)
  32:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
  33:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         uint8_t i;
  34:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         uint8_t id[OW_ROMCODE_SIZE];
  35:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         uint8_t diff, nSensors;
  36:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         
  37:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** //        printf( "\nScanning Bus for DS18X20\n" );
  38:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         
  39:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         nSensors = 0;
  40:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         
  41:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         for( diff = OW_SEARCH_FIRST; 
  42:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 diff != OW_LAST_DEVICE && nSensors < MAXSENSORS ; )
  43:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         {
  44:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 DS18X20_find_sensor( &diff, &id[0] );
  45:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 
  46:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 if( diff == OW_PRESENCE_ERR ) {
  47:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** //                        printf( "No Sensor found\n" );
  48:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                         break;
  49:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 }
  50:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 
  51:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 if( diff == OW_DATA_ERR ) {
  52:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** //                        printf( "Bus Error\n" );
  53:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                         break;
  54:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 }
  55:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 
  56:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 for (i=0;i<OW_ROMCODE_SIZE;i++)
  57:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                         gSensorIDs[nSensors][i]=id[i];
  58:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 
  59:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****                 nSensors++;
  60:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         }
  61:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         
  62:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****         return nSensors;
  63:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
  64:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  65:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
  66:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* 
  67:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    convert raw value from DS18x20 to Celsius
  68:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    input is: 
  69:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    - familycode fc (0x10/0x28 see header)
  70:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    - scratchpad-buffer
  71:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    output is:
  72:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    - cel full celsius
  73:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    - fractions of celsius in millicelsius*(10^-1)/625 (the 4 LS-Bits)
  74:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    - subzero =0 positiv / 1 negativ
  75:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    always returns  DS18X20_OK
  76:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    TODO invalid-values detection (but should be covered by CRC)
  77:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** */
  78:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint8_t DS18X20_meas_to_cel( uint8_t fc, uint8_t *sp, 
  79:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t* subzero, uint8_t* cel, uint8_t* cel_frac_bits)
  80:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
  88               	.LM0:
  89               	/* prologue: frame size=0 */
  90 0000 FF92      		push r15
  91 0002 0F93      		push r16
  92 0004 1F93      		push r17
  93 0006 CF93      		push r28
  94 0008 DF93      		push r29
  95               	/* prologue end (size=5) */
  96 000a F82E      		mov r15,r24
  97 000c FB01      		movw r30,r22
  98 000e DA01      		movw r26,r20
  99 0010 E901      		movw r28,r18
 100 0012 A801      		movw r20,r16
  81:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint16_t meas;
  82:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t  i;
  83:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
  84:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	meas = sp[0];  // LSB
 102               	.LM1:
 103 0014 8081      		ld r24,Z
 104 0016 282F      		mov r18,r24
 105 0018 3327      		clr r19
  85:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	meas |= ((uint16_t)sp[1])<<8; // MSB
 107               	.LM2:
 108 001a 8181      		ldd r24,Z+1
 109 001c 9927      		clr r25
 110 001e 982F      		mov r25,r24
 111 0020 8827      		clr r24
 112 0022 282B      		or r18,r24
 113 0024 392B      		or r19,r25
  86:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	//meas = 0xff5e; meas = 0xfe6f;
  87:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
  88:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	//  only work on 12bit-base
  89:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if( fc == DS18S20_ID ) { // 9 -> 12 bit if 18S20
 115               	.LM3:
 116 0026 80E1      		ldi r24,lo8(16)
 117 0028 F816      		cp r15,r24
 118 002a 59F4      		brne .L2
  90:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		/* Extended measurements for DS18S20 contributed by Carsten Foss */
  91:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		meas &= (uint16_t) 0xfffe;	// Discard LSB , needed for later extended precicion calc
 120               	.LM4:
 121 002c 2E7F      		andi r18,lo8(-2)
  92:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		meas <<= 3;					// Convert to 12-bit , now degrees are in 1/16 degrees units
  93:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		meas += (16 - sp[6]) - 4;	// Add the compensation , and remember to subtract 0.25 degree (4/16)
 123               	.LM5:
 124 002e 63E0      		ldi r22,3
 125 0030 220F      	1:	lsl r18
 126 0032 331F      		rol r19
 127 0034 6A95      		dec r22
 128 0036 E1F7      		brne 1b
 129 0038 8681      		ldd r24,Z+6
 130 003a 281B      		sub r18,r24
 131 003c 3109      		sbc r19,__zero_reg__
 132 003e 245F      		subi r18,lo8(-(12))
 133 0040 3F4F      		sbci r19,hi8(-(12))
 134               	.L2:
  94:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	}
  95:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
  96:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	// check for negative 
  97:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if ( meas & 0x8000 )  {
 136               	.LM6:
 137 0042 37FF      		sbrs r19,7
 138 0044 06C0      		rjmp .L4
  98:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		*subzero=1;      // mark negative
 140               	.LM7:
 141 0046 81E0      		ldi r24,lo8(1)
 142 0048 8C93      		st X,r24
  99:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		meas ^= 0xffff;  // convert to positive => (twos complement)++
 100:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		meas++;
 144               	.LM8:
 145 004a 3095      		com r19
 146 004c 2195      		neg r18
 147 004e 3F4F      		sbci r19,lo8(-1)
 148 0050 01C0      		rjmp .L6
 149               	.L4:
 101:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	}
 102:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	else *subzero=0;
 151               	.LM9:
 152 0052 1C92      		st X,__zero_reg__
 153               	.L6:
 103:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 104:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	// clear undefined bits for B != 12bit
 105:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if ( fc == DS18B20_ID ) { // check resolution 18B20
 155               	.LM10:
 156 0054 88E2      		ldi r24,lo8(40)
 157 0056 F816      		cp r15,r24
 158 0058 91F4      		brne .L7
 106:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		i = sp[DS18B20_CONF_REG];
 107:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		if ( (i & DS18B20_12_BIT) == DS18B20_12_BIT ) ;
 160               	.LM11:
 161 005a 8481      		ldd r24,Z+4
 162 005c 682F      		mov r22,r24
 163 005e 7727      		clr r23
 164 0060 CB01      		movw r24,r22
 165 0062 8076      		andi r24,lo8(96)
 166 0064 9070      		andi r25,hi8(96)
 167 0066 8036      		cpi r24,96
 168 0068 9105      		cpc r25,__zero_reg__
 169 006a 49F0      		breq .L7
 108:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		else if ( (i & DS18B20_11_BIT) == DS18B20_11_BIT ) 
 171               	.LM12:
 172 006c 66FF      		sbrs r22,6
 173 006e 02C0      		rjmp .L10
 109:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			meas &= ~(DS18B20_11_BIT_UNDF);
 175               	.LM13:
 176 0070 2E7F      		andi r18,lo8(-2)
 177 0072 05C0      		rjmp .L7
 178               	.L10:
 110:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		else if ( (i & DS18B20_10_BIT) == DS18B20_10_BIT ) 
 180               	.LM14:
 181 0074 65FF      		sbrs r22,5
 182 0076 02C0      		rjmp .L12
 111:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			meas &= ~(DS18B20_10_BIT_UNDF);
 184               	.LM15:
 185 0078 2C7F      		andi r18,lo8(-4)
 186 007a 01C0      		rjmp .L7
 187               	.L12:
 112:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		else { // if ( (i & DS18B20_9_BIT) == DS18B20_9_BIT ) { 
 113:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			meas &= ~(DS18B20_9_BIT_UNDF);
 189               	.LM16:
 190 007c 287F      		andi r18,lo8(-8)
 191               	.L7:
 114:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		}
 115:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	}			
 116:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 117:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	*cel  = (uint8_t)(meas >> 4); 
 193               	.LM17:
 194 007e C901      		movw r24,r18
 195 0080 34E0      		ldi r19,4
 196 0082 9695      	1:	lsr r25
 197 0084 8795      		ror r24
 198 0086 3A95      		dec r19
 199 0088 E1F7      		brne 1b
 200 008a 8883      		st Y,r24
 118:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	*cel_frac_bits = (uint8_t)(meas & 0x000F);
 202               	.LM18:
 203 008c 822F      		mov r24,r18
 204 008e 8F70      		andi r24,lo8(15)
 205 0090 FA01      		movw r30,r20
 206 0092 8083      		st Z,r24
 119:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 120:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	return DS18X20_OK;
 121:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 208               	.LM19:
 209 0094 80E0      		ldi r24,lo8(0)
 210 0096 90E0      		ldi r25,hi8(0)
 211               	/* epilogue: frame size=0 */
 212 0098 DF91      		pop r29
 213 009a CF91      		pop r28
 214 009c 1F91      		pop r17
 215 009e 0F91      		pop r16
 216 00a0 FF90      		pop r15
 217 00a2 0895      		ret
 218               	/* epilogue end (size=6) */
 219               	/* function DS18X20_meas_to_cel size 86 (75) */
 224               	.Lscope0:
 229               	.global	DS18X20_temp_to_decicel
 231               	DS18X20_temp_to_decicel:
 122:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 123:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* converts to decicelsius
 124:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    input is ouput from meas_to_cel
 125:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    returns absolute value of temperatur in decicelsius
 126:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	i.e.: sz=0, c=28, frac=15 returns 289 (=28.9�C)
 127:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 0	0	0	
 128:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 1	625	625	1
 129:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 2	1250	250	
 130:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 3	1875	875	3
 131:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 4	2500	500	4
 132:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 5	3125	125	
 133:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 6	3750	750	6
 134:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 7	4375	375	
 135:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 8	5000	0	
 136:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 9	5625	625	9
 137:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 10	6250	250	
 138:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 11	6875	875	11
 139:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 12	7500	500	12
 140:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 13	8125	125	
 141:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 14	8750	750	14
 142:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 15	9375	375	*/
 143:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint16_t DS18X20_temp_to_decicel(uint8_t subzero, uint8_t cel, 
 144:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t cel_frac_bits)
 145:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 233               	.LM20:
 234               	/* prologue: frame size=8 */
 235 00a4 0F93      		push r16
 236 00a6 1F93      		push r17
 237 00a8 CF93      		push r28
 238 00aa DF93      		push r29
 239 00ac CDB7      		in r28,__SP_L__
 240 00ae DEB7      		in r29,__SP_H__
 241 00b0 2897      		sbiw r28,8
 242 00b2 0FB6      		in __tmp_reg__,__SREG__
 243 00b4 F894      		cli
 244 00b6 DEBF      		out __SP_H__,r29
 245 00b8 0FBE      		out __SREG__,__tmp_reg__
 246 00ba CDBF      		out __SP_L__,r28
 247               	/* prologue end (size=12) */
 248 00bc 082F      		mov r16,r24
 249 00be 162F      		mov r17,r22
 146:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint16_t h;
 147:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t  i;
 148:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t need_rounding[] = { 1, 3, 4, 6, 9, 11, 12, 14 };
 251               	.LM21:
 252 00c0 DE01      		movw r26,r28
 253 00c2 1196      		adiw r26,1
 254 00c4 E0E0      		ldi r30,lo8(C.2.1520)
 255 00c6 F0E0      		ldi r31,hi8(C.2.1520)
 256 00c8 88E0      		ldi r24,lo8(8)
 257               	.L16:
 259               	.LM22:
 260 00ca 0190      		ld r0,Z+
 261 00cc 0D92      		st X+,r0
 262 00ce 8150      		subi r24,lo8(-(-1))
 263 00d0 E1F7      		brne .L16
 149:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 150:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	h = cel_frac_bits*DS18X20_FRACCONV/1000;
 265               	.LM23:
 266 00d2 242F      		mov r18,r20
 267 00d4 3327      		clr r19
 268 00d6 81E7      		ldi r24,lo8(625)
 269 00d8 92E0      		ldi r25,hi8(625)
 270 00da BC01      		movw r22,r24
 271 00dc 269F      		mul r18,r22
 272 00de C001      		movw r24,r0
 273 00e0 279F      		mul r18,r23
 274 00e2 900D      		add r25,r0
 275 00e4 369F      		mul r19,r22
 276 00e6 900D      		add r25,r0
 277 00e8 1124      		clr r1
 278 00ea 68EE      		ldi r22,lo8(1000)
 279 00ec 73E0      		ldi r23,hi8(1000)
 280 00ee 0E94 0000 		call __divmodhi4
 151:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	h += cel*10;
 282               	.LM24:
 283 00f2 8AE0      		ldi r24,lo8(10)
 284 00f4 189F      		mul r17,r24
 285 00f6 C001      		movw r24,r0
 286 00f8 1124      		clr r1
 287 00fa 680F      		add r22,r24
 288 00fc 791F      		adc r23,r25
 152:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if (!subzero) {
 290               	.LM25:
 291 00fe 0023      		tst r16
 292 0100 79F4      		brne .L17
 293 0102 FE01      		movw r30,r28
 294 0104 3196      		adiw r30,1
 295 0106 9E01      		movw r18,r28
 296 0108 275F      		subi r18,lo8(-(9))
 297 010a 3F4F      		sbci r19,hi8(-(9))
 298               	.L19:
 153:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		for (i=0; i<sizeof(need_rounding); i++) {
 154:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			if ( cel_frac_bits == need_rounding[i] ) {
 300               	.LM26:
 301 010c 8081      		ld r24,Z
 302 010e 4817      		cp r20,r24
 303 0110 19F4      		brne .L20
 155:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 				h++;
 305               	.LM27:
 306 0112 6F5F      		subi r22,lo8(-(1))
 307 0114 7F4F      		sbci r23,hi8(-(1))
 308 0116 04C0      		rjmp .L17
 309               	.L20:
 156:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 				break;
 311               	.LM28:
 312 0118 3196      		adiw r30,1
 314               	.LM29:
 315 011a E217      		cp r30,r18
 316 011c F307      		cpc r31,r19
 317 011e B1F7      		brne .L19
 318               	.L17:
 157:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			}
 158:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		}
 159:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	}
 160:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	return h;
 161:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 320               	.LM30:
 321 0120 CB01      		movw r24,r22
 322               	/* epilogue: frame size=8 */
 323 0122 2896      		adiw r28,8
 324 0124 0FB6      		in __tmp_reg__,__SREG__
 325 0126 F894      		cli
 326 0128 DEBF      		out __SP_H__,r29
 327 012a 0FBE      		out __SREG__,__tmp_reg__
 328 012c CDBF      		out __SP_L__,r28
 329 012e DF91      		pop r29
 330 0130 CF91      		pop r28
 331 0132 1F91      		pop r17
 332 0134 0F91      		pop r16
 333 0136 0895      		ret
 334               	/* epilogue end (size=11) */
 335               	/* function DS18X20_temp_to_decicel size 75 (52) */
 341               	.Lscope1:
 347               	.global	DS18X20_temp_cmp
 349               	DS18X20_temp_cmp:
 162:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 163:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* compare temperature values (full celsius only)
 164:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    returns -1 if param-pair1 < param-pair2 
 165:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****             0 if == 
 166:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			1 if >    */
 167:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** int8_t DS18X20_temp_cmp(uint8_t subzero1, uint16_t cel1, 
 168:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t subzero2, uint16_t cel2)
 169:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 351               	.LM31:
 352               	/* prologue: frame size=0 */
 353               	/* prologue end (size=0) */
 170:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	int16_t t1 = (subzero1) ? (cel1*(-1)) : (cel1);
 355               	.LM32:
 356 0138 8823      		tst r24
 357 013a 19F0      		breq .L27
 359               	.LM33:
 360 013c 7095      		com r23
 361 013e 6195      		neg r22
 362 0140 7F4F      		sbci r23,lo8(-1)
 363               	.L27:
 171:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	int16_t t2 = (subzero2) ? (cel2*(-1)) : (cel2);
 365               	.LM34:
 366 0142 4423      		tst r20
 367 0144 19F0      		breq .L29
 368 0146 3095      		com r19
 369 0148 2195      		neg r18
 370 014a 3F4F      		sbci r19,lo8(-1)
 371               	.L29:
 172:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 173:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if (t1<t2) return -1;
 373               	.LM35:
 374 014c 6217      		cp r22,r18
 375 014e 7307      		cpc r23,r19
 376 0150 1CF4      		brge .L31
 377 0152 8FEF      		ldi r24,lo8(-1)
 378 0154 9FEF      		ldi r25,hi8(-1)
 379 0156 0895      		ret
 380               	.L31:
 381 0158 80E0      		ldi r24,lo8(0)
 382 015a 90E0      		ldi r25,hi8(0)
 383 015c 2617      		cp r18,r22
 384 015e 3707      		cpc r19,r23
 385 0160 14F4      		brge .L33
 386 0162 81E0      		ldi r24,lo8(1)
 387 0164 90E0      		ldi r25,hi8(1)
 388               	.L33:
 174:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if (t1>t2) return 1;
 175:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	return 0;
 176:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 390               	.LM36:
 391 0166 0895      		ret
 392               	/* epilogue: frame size=0 */
 393               	/* epilogue: noreturn */
 394               	/* epilogue end (size=0) */
 395               	/* function DS18X20_temp_cmp size 24 (24) */
 397               	.Lscope2:
 403               	.global	DS18X20_read_meas_single
 405               	DS18X20_read_meas_single:
 177:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 178:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* find DS18X20 Sensors on 1-Wire-Bus
 179:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    input/ouput: diff is the result of the last rom-search
 180:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    output: id is the rom-code of the sensor found */
 181:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** void DS18X20_find_sensor(uint8_t *diff, uint8_t id[])
 182:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 183:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	for (;;) {
 184:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		*diff = ow_rom_search( *diff, &id[0] );
 185:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		if ( *diff==OW_PRESENCE_ERR || *diff==OW_DATA_ERR ||
 186:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		  *diff == OW_LAST_DEVICE ) return;
 187:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		if ( id[0] == DS18B20_ID || id[0] == DS18S20_ID ) return;
 188:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	}
 189:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 190:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 191:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* get power status of DS18x20 
 192:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    input  : id = rom_code 
 193:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    returns: DS18X20_POWER_EXTERN or DS18X20_POWER_PARASITE */
 194:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint8_t	DS18X20_get_power_status(uint8_t id[])
 195:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 196:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t pstat;
 197:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****     ow_reset();
 198:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****     ow_command(DS18X20_READ_POWER_SUPPLY, id);
 199:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****     pstat=ow_bit_io(1); // pstat 0=is parasite/ !=0 ext. powered
 200:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****     ow_reset();
 201:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	return (pstat) ? DS18X20_POWER_EXTERN:DS18X20_POWER_PARASITE;
 202:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 203:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 204:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* start measurement (CONVERT_T) for all sensors if input id==NULL 
 205:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    or for single sensor. then id is the rom-code */
 206:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint8_t DS18X20_start_meas( uint8_t with_power_extern, uint8_t id[])
 207:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 208:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	ow_reset(); //**
 209:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if( ow_input_pin_state() ) { // only send if bus is "idle" = high
 210:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		ow_command( DS18X20_CONVERT_T, id );
 211:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		if (with_power_extern != DS18X20_POWER_EXTERN)
 212:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 			ow_parasite_enable();
 213:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		return DS18X20_OK;
 214:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	} 
 215:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	else { 
 216:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		#ifdef DS18X20_VERBOSE
 217:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		uart_puts_P( "DS18X20_start_meas: Short Circuit !\r" );
 218:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		#endif
 219:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		return DS18X20_START_FAIL;
 220:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	}
 221:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 222:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 223:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* reads temperature (scratchpad) of sensor with rom-code id
 224:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    output: subzero==1 if temp.<0, cel: full celsius, mcel: frac 
 225:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    in millicelsius*0.1
 226:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    i.e.: subzero=1, cel=18, millicel=5000 = -18,5000�C */
 227:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint8_t DS18X20_read_meas(uint8_t id[], uint8_t *subzero, 
 228:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t *cel, uint8_t *cel_frac_bits)
 229:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 230:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t i;
 231:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t sp[DS18X20_SP_SIZE];
 232:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 233:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	ow_reset(); //**
 234:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	ow_command(DS18X20_READ, id);
 235:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	for ( i=0 ; i< DS18X20_SP_SIZE; i++ ) sp[i]=ow_byte_rd();
 236:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if ( crc8( &sp[0], DS18X20_SP_SIZE ) ) 
 237:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		return DS18X20_ERROR_CRC;
 238:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	DS18X20_meas_to_cel(id[0], sp, subzero, cel, cel_frac_bits);
 239:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	return DS18X20_OK;
 240:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** }
 241:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 
 242:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** /* reads temperature (scratchpad) of a single sensor (uses skip-rom)
 243:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    output: subzero==1 if temp.<0, cel: full celsius, mcel: frac 
 244:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    in millicelsius*0.1
 245:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c ****    i.e.: subzero=1, cel=18, millicel=5000 = -18,5000�C */
 246:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** uint8_t DS18X20_read_meas_single(uint8_t familycode, uint8_t *subzero, 
 247:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t *cel, uint8_t *cel_frac_bits)
 248:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** {
 407               	.LM37:
 408               	/* prologue: frame size=9 */
 409 0168 7F92      		push r7
 410 016a 8F92      		push r8
 411 016c 9F92      		push r9
 412 016e AF92      		push r10
 413 0170 BF92      		push r11
 414 0172 CF92      		push r12
 415 0174 DF92      		push r13
 416 0176 EF92      		push r14
 417 0178 FF92      		push r15
 418 017a 0F93      		push r16
 419 017c 1F93      		push r17
 420 017e CF93      		push r28
 421 0180 DF93      		push r29
 422 0182 CDB7      		in r28,__SP_L__
 423 0184 DEB7      		in r29,__SP_H__
 424 0186 2997      		sbiw r28,9
 425 0188 0FB6      		in __tmp_reg__,__SREG__
 426 018a F894      		cli
 427 018c DEBF      		out __SP_H__,r29
 428 018e 0FBE      		out __SREG__,__tmp_reg__
 429 0190 CDBF      		out __SP_L__,r28
 430               	/* prologue end (size=21) */
 431 0192 782E      		mov r7,r24
 432 0194 4B01      		movw r8,r22
 433 0196 5A01      		movw r10,r20
 434 0198 6901      		movw r12,r18
 249:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t i;
 250:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	uint8_t sp[DS18X20_SP_SIZE];
 251:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	
 252:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	ow_command(DS18X20_READ, NULL);
 436               	.LM38:
 437 019a 60E0      		ldi r22,lo8(0)
 438 019c 70E0      		ldi r23,hi8(0)
 439 019e 8EEB      		ldi r24,lo8(-66)
 440 01a0 0E94 0000 		call ow_command
 441 01a4 8E01      		movw r16,r28
 442 01a6 0F5F      		subi r16,lo8(-(1))
 443 01a8 1F4F      		sbci r17,hi8(-(1))
 444               	.L37:
 253:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	for ( i=0 ; i< DS18X20_SP_SIZE; i++ ) sp[i]=ow_byte_rd();
 446               	.LM39:
 447 01aa 0E94 0000 		call ow_byte_rd
 448 01ae F801      		movw r30,r16
 449 01b0 8193      		st Z+,r24
 450 01b2 8F01      		movw r16,r30
 451 01b4 CE01      		movw r24,r28
 452 01b6 0A96      		adiw r24,10
 453 01b8 E817      		cp r30,r24
 454 01ba F907      		cpc r31,r25
 455 01bc B1F7      		brne .L37
 254:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	if ( crc8( &sp[0], DS18X20_SP_SIZE ) ) 
 457               	.LM40:
 458 01be 69E0      		ldi r22,lo8(9)
 459 01c0 70E0      		ldi r23,hi8(9)
 460 01c2 7E01      		movw r14,r28
 461 01c4 0894      		sec
 462 01c6 E11C      		adc r14,__zero_reg__
 463 01c8 F11C      		adc r15,__zero_reg__
 464 01ca C701      		movw r24,r14
 465 01cc 0E94 0000 		call crc8
 466 01d0 8823      		tst r24
 467 01d2 19F0      		breq .L39
 468 01d4 83E0      		ldi r24,lo8(3)
 469 01d6 90E0      		ldi r25,hi8(3)
 470 01d8 09C0      		rjmp .L41
 471               	.L39:
 255:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 		return DS18X20_ERROR_CRC;
 256:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x20.c **** 	DS18X20_meas_to_cel(familycode, sp, subzero, cel, cel_frac_bits);
 473               	.LM41:
 474 01da 8601      		movw r16,r12
 475 01dc 9501      		movw r18,r10
 476 01de A401      		movw r20,r8
 477 01e0 B701      		movw r22,r14
 478 01e2 872D      		mov r24,r7
 479 01e4 0E94 0000 		call DS18X20_meas_to_cel
 480 01e8 80E0      		ldi r24,lo8(0)
 481 01ea 90E0      		ldi r25,hi8(0)
 482               	.L41:
 483               	/* epilogue: frame size=9 */
 484 01ec 2996      		adiw r28,9
 485 01ee 0FB6      		in __tmp_reg__,__SREG__
 486 01f0 F894      		cli
 487 01f2 DEBF      		out __SP_H__,r29
 488 01f4 0FBE      		out __SREG__,__tmp_reg__
 489 01f6 CDBF      		out __SP_L__,r28
 490 01f8 DF91      		pop r29
 491 01fa CF91      		pop r28
 492 01fc 1F91      		pop r17
 493 01fe 0F91      		pop r16
 494 0200 FF90      		pop r15
 495 0202 EF90      		pop r14
 496 0204 DF90      		pop r13
 497 0206 CF90      		pop r12
 498 0208 BF90      		pop r11
 499 020a AF90      		pop r10
 500 020c 9F90      		pop r9
 501 020e 8F90      		pop r8
 502 0210 7F90      		pop r7
 503 0212 0895      		ret
 504               	/* epilogue end (size=20) */
 505               	/* function DS18X20_read_meas_single size 86 (45) */
 510               	.Lscope3:
 516               	.global	DS18X20_read_meas
 518               	DS18X20_read_meas:
 520               	.LM42:
 521               	/* prologue: frame size=9 */
 522 0214 6F92      		push r6
 523 0216 7F92      		push r7
 524 0218 8F92      		push r8
 525 021a 9F92      		push r9
 526 021c AF92      		push r10
 527 021e BF92      		push r11
 528 0220 CF92      		push r12
 529 0222 DF92      		push r13
 530 0224 EF92      		push r14
 531 0226 FF92      		push r15
 532 0228 0F93      		push r16
 533 022a 1F93      		push r17
 534 022c CF93      		push r28
 535 022e DF93      		push r29
 536 0230 CDB7      		in r28,__SP_L__
 537 0232 DEB7      		in r29,__SP_H__
 538 0234 2997      		sbiw r28,9
 539 0236 0FB6      		in __tmp_reg__,__SREG__
 540 0238 F894      		cli
 541 023a DEBF      		out __SP_H__,r29
 542 023c 0FBE      		out __SREG__,__tmp_reg__
 543 023e CDBF      		out __SP_L__,r28
 544               	/* prologue end (size=22) */
 545 0240 6C01      		movw r12,r24
 546 0242 3B01      		movw r6,r22
 547 0244 4A01      		movw r8,r20
 548 0246 5901      		movw r10,r18
 550               	.LM43:
 551 0248 0E94 0000 		call ow_reset
 553               	.LM44:
 554 024c B601      		movw r22,r12
 555 024e 8EEB      		ldi r24,lo8(-66)
 556 0250 0E94 0000 		call ow_command
 557 0254 8E01      		movw r16,r28
 558 0256 0F5F      		subi r16,lo8(-(1))
 559 0258 1F4F      		sbci r17,hi8(-(1))
 560               	.L46:
 562               	.LM45:
 563 025a 0E94 0000 		call ow_byte_rd
 564 025e F801      		movw r30,r16
 565 0260 8193      		st Z+,r24
 566 0262 8F01      		movw r16,r30
 567 0264 CE01      		movw r24,r28
 568 0266 0A96      		adiw r24,10
 569 0268 E817      		cp r30,r24
 570 026a F907      		cpc r31,r25
 571 026c B1F7      		brne .L46
 573               	.LM46:
 574 026e 69E0      		ldi r22,lo8(9)
 575 0270 70E0      		ldi r23,hi8(9)
 576 0272 7E01      		movw r14,r28
 577 0274 0894      		sec
 578 0276 E11C      		adc r14,__zero_reg__
 579 0278 F11C      		adc r15,__zero_reg__
 580 027a C701      		movw r24,r14
 581 027c 0E94 0000 		call crc8
 582 0280 8823      		tst r24
 583 0282 19F0      		breq .L48
 584 0284 83E0      		ldi r24,lo8(3)
 585 0286 90E0      		ldi r25,hi8(3)
 586 0288 0AC0      		rjmp .L50
 587               	.L48:
 589               	.LM47:
 590 028a 8501      		movw r16,r10
 591 028c 9401      		movw r18,r8
 592 028e A301      		movw r20,r6
 593 0290 B701      		movw r22,r14
 594 0292 F601      		movw r30,r12
 595 0294 8081      		ld r24,Z
 596 0296 0E94 0000 		call DS18X20_meas_to_cel
 597 029a 80E0      		ldi r24,lo8(0)
 598 029c 90E0      		ldi r25,hi8(0)
 599               	.L50:
 600               	/* epilogue: frame size=9 */
 601 029e 2996      		adiw r28,9
 602 02a0 0FB6      		in __tmp_reg__,__SREG__
 603 02a2 F894      		cli
 604 02a4 DEBF      		out __SP_H__,r29
 605 02a6 0FBE      		out __SREG__,__tmp_reg__
 606 02a8 CDBF      		out __SP_L__,r28
 607 02aa DF91      		pop r29
 608 02ac CF91      		pop r28
 609 02ae 1F91      		pop r17
 610 02b0 0F91      		pop r16
 611 02b2 FF90      		pop r15
 612 02b4 EF90      		pop r14
 613 02b6 DF90      		pop r13
 614 02b8 CF90      		pop r12
 615 02ba BF90      		pop r11
 616 02bc AF90      		pop r10
 617 02be 9F90      		pop r9
 618 02c0 8F90      		pop r8
 619 02c2 7F90      		pop r7
 620 02c4 6F90      		pop r6
 621 02c6 0895      		ret
 622               	/* epilogue end (size=21) */
 623               	/* function DS18X20_read_meas size 90 (47) */
 628               	.Lscope4:
 632               	.global	DS18X20_start_meas
 634               	DS18X20_start_meas:
 636               	.LM48:
 637               	/* prologue: frame size=0 */
 638 02c8 1F93      		push r17
 639 02ca CF93      		push r28
 640 02cc DF93      		push r29
 641               	/* prologue end (size=3) */
 642 02ce 182F      		mov r17,r24
 643 02d0 EB01      		movw r28,r22
 645               	.LM49:
 646 02d2 0E94 0000 		call ow_reset
 648               	.LM50:
 649 02d6 0E94 0000 		call ow_input_pin_state
 650 02da 8823      		tst r24
 651 02dc 19F4      		brne .L55
 653               	.LM51:
 654 02de 82E0      		ldi r24,lo8(2)
 655 02e0 90E0      		ldi r25,hi8(2)
 656 02e2 0AC0      		rjmp .L57
 657               	.L55:
 659               	.LM52:
 660 02e4 BE01      		movw r22,r28
 661 02e6 84E4      		ldi r24,lo8(68)
 662 02e8 0E94 0000 		call ow_command
 664               	.LM53:
 665 02ec 1130      		cpi r17,lo8(1)
 666 02ee 11F0      		breq .L61
 668               	.LM54:
 669 02f0 0E94 0000 		call ow_parasite_enable
 670               	.L61:
 671 02f4 80E0      		ldi r24,lo8(0)
 672 02f6 90E0      		ldi r25,hi8(0)
 673               	.L57:
 674               	/* epilogue: frame size=0 */
 675 02f8 DF91      		pop r29
 676 02fa CF91      		pop r28
 677 02fc 1F91      		pop r17
 678 02fe 0895      		ret
 679               	/* epilogue end (size=4) */
 680               	/* function DS18X20_start_meas size 28 (21) */
 682               	.Lscope5:
 685               	.global	DS18X20_get_power_status
 687               	DS18X20_get_power_status:
 689               	.LM55:
 690               	/* prologue: frame size=0 */
 691 0300 0F93      		push r16
 692 0302 1F93      		push r17
 693               	/* prologue end (size=2) */
 694 0304 8C01      		movw r16,r24
 696               	.LM56:
 697 0306 0E94 0000 		call ow_reset
 699               	.LM57:
 700 030a B801      		movw r22,r16
 701 030c 84EB      		ldi r24,lo8(-76)
 702 030e 0E94 0000 		call ow_command
 704               	.LM58:
 705 0312 81E0      		ldi r24,lo8(1)
 706 0314 0E94 0000 		call ow_bit_io
 707 0318 182F      		mov r17,r24
 709               	.LM59:
 710 031a 0E94 0000 		call ow_reset
 711 031e 80E0      		ldi r24,lo8(0)
 712 0320 90E0      		ldi r25,hi8(0)
 713 0322 1123      		tst r17
 714 0324 11F0      		breq .L63
 716               	.LM60:
 717 0326 81E0      		ldi r24,lo8(1)
 718 0328 90E0      		ldi r25,hi8(1)
 719               	.L63:
 720               	/* epilogue: frame size=0 */
 721 032a 1F91      		pop r17
 722 032c 0F91      		pop r16
 723 032e 0895      		ret
 724               	/* epilogue end (size=3) */
 725               	/* function DS18X20_get_power_status size 24 (19) */
 730               	.Lscope6:
 734               	.global	DS18X20_find_sensor
 736               	DS18X20_find_sensor:
 738               	.LM61:
 739               	/* prologue: frame size=0 */
 740 0330 0F93      		push r16
 741 0332 1F93      		push r17
 742 0334 CF93      		push r28
 743 0336 DF93      		push r29
 744               	/* prologue end (size=4) */
 745 0338 8C01      		movw r16,r24
 746 033a EB01      		movw r28,r22
 747               	.L67:
 749               	.LM62:
 750 033c BE01      		movw r22,r28
 751 033e F801      		movw r30,r16
 752 0340 8081      		ld r24,Z
 753 0342 0E94 0000 		call ow_rom_search
 754 0346 F801      		movw r30,r16
 755 0348 8083      		st Z,r24
 757               	.LM63:
 758 034a 8150      		subi r24,lo8(-(-1))
 759 034c 8D3F      		cpi r24,lo8(-3)
 760 034e 28F4      		brsh .L71
 762               	.LM64:
 763 0350 8881      		ld r24,Y
 764 0352 8832      		cpi r24,lo8(40)
 765 0354 11F0      		breq .L71
 766 0356 8031      		cpi r24,lo8(16)
 767 0358 89F7      		brne .L67
 768               	.L71:
 769               	/* epilogue: frame size=0 */
 770 035a DF91      		pop r29
 771 035c CF91      		pop r28
 772 035e 1F91      		pop r17
 773 0360 0F91      		pop r16
 774 0362 0895      		ret
 775               	/* epilogue end (size=5) */
 776               	/* function DS18X20_find_sensor size 26 (17) */
 778               	.Lscope7:
 780               	.global	search_sensors
 782               	search_sensors:
 784               	.LM65:
 785               	/* prologue: frame size=9 */
 786 0364 AF92      		push r10
 787 0366 BF92      		push r11
 788 0368 CF92      		push r12
 789 036a DF92      		push r13
 790 036c FF92      		push r15
 791 036e 0F93      		push r16
 792 0370 1F93      		push r17
 793 0372 CF93      		push r28
 794 0374 DF93      		push r29
 795 0376 CDB7      		in r28,__SP_L__
 796 0378 DEB7      		in r29,__SP_H__
 797 037a 2997      		sbiw r28,9
 798 037c 0FB6      		in __tmp_reg__,__SREG__
 799 037e F894      		cli
 800 0380 DEBF      		out __SP_H__,r29
 801 0382 0FBE      		out __SREG__,__tmp_reg__
 802 0384 CDBF      		out __SP_L__,r28
 803               	/* prologue end (size=17) */
 805               	.LM66:
 806 0386 8FEF      		ldi r24,lo8(-1)
 807 0388 8983      		std Y+1,r24
 808 038a 00E0      		ldi r16,lo8(0)
 809 038c 10E0      		ldi r17,hi8(0)
 810 038e CC24      		clr r12
 811 0390 DD24      		clr r13
 812               	.L74:
 814               	.LM67:
 815 0392 F02E      		mov r15,r16
 817               	.LM68:
 818 0394 E2E0      		ldi r30,lo8(2)
 819 0396 AE2E      		mov r10,r30
 820 0398 B12C      		mov r11,__zero_reg__
 821 039a AC0E      		add r10,r28
 822 039c BD1E      		adc r11,r29
 823 039e B501      		movw r22,r10
 824 03a0 CE01      		movw r24,r28
 825 03a2 0196      		adiw r24,1
 826 03a4 0E94 0000 		call DS18X20_find_sensor
 828               	.LM69:
 829 03a8 9981      		ldd r25,Y+1
 830 03aa 9F3F      		cpi r25,lo8(-1)
 831 03ac D1F0      		breq .L75
 833               	.LM70:
 834 03ae 9E3F      		cpi r25,lo8(-2)
 835 03b0 C1F0      		breq .L75
 837               	.LM71:
 838 03b2 D601      		movw r26,r12
 839 03b4 A050      		subi r26,lo8(-(gSensorIDs))
 840 03b6 B040      		sbci r27,hi8(-(gSensorIDs))
 841 03b8 F501      		movw r30,r10
 842 03ba 9E01      		movw r18,r28
 843 03bc 265F      		subi r18,lo8(-(10))
 844 03be 3F4F      		sbci r19,hi8(-(10))
 845               	.L78:
 847               	.LM72:
 848 03c0 8191      		ld r24,Z+
 849 03c2 8D93      		st X+,r24
 851               	.LM73:
 852 03c4 E217      		cp r30,r18
 853 03c6 F307      		cpc r31,r19
 854 03c8 D9F7      		brne .L78
 855 03ca F394      		inc r15
 857               	.LM74:
 858 03cc 9923      		tst r25
 859 03ce 49F0      		breq .L75
 860 03d0 0F5F      		subi r16,lo8(-(1))
 861 03d2 1F4F      		sbci r17,hi8(-(1))
 862 03d4 88E0      		ldi r24,lo8(8)
 863 03d6 90E0      		ldi r25,hi8(8)
 864 03d8 C80E      		add r12,r24
 865 03da D91E      		adc r13,r25
 866 03dc 0430      		cpi r16,4
 867 03de 1105      		cpc r17,__zero_reg__
 868 03e0 C1F6      		brne .L74
 869               	.L75:
 871               	.LM75:
 872 03e2 8F2D      		mov r24,r15
 873 03e4 9927      		clr r25
 874               	/* epilogue: frame size=9 */
 875 03e6 2996      		adiw r28,9
 876 03e8 0FB6      		in __tmp_reg__,__SREG__
 877 03ea F894      		cli
 878 03ec DEBF      		out __SP_H__,r29
 879 03ee 0FBE      		out __SREG__,__tmp_reg__
 880 03f0 CDBF      		out __SP_L__,r28
 881 03f2 DF91      		pop r29
 882 03f4 CF91      		pop r28
 883 03f6 1F91      		pop r17
 884 03f8 0F91      		pop r16
 885 03fa FF90      		pop r15
 886 03fc DF90      		pop r13
 887 03fe CF90      		pop r12
 888 0400 BF90      		pop r11
 889 0402 AF90      		pop r10
 890 0404 0895      		ret
 891               	/* epilogue end (size=16) */
 892               	/* function search_sensors size 81 (48) */
 899               	.Lscope8:
 900               		.data
 903               	C.2.1520:
 904 0000 01        		.byte	1
 905 0001 03        		.byte	3
 906 0002 04        		.byte	4
 907 0003 06        		.byte	6
 908 0004 09        		.byte	9
 909 0005 0B        		.byte	11
 910 0006 0C        		.byte	12
 911 0007 0E        		.byte	14
 912               		.comm gSensorIDs,32,1
 914               		.text
 916               	.Letext0:
 917               	/* File "/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/ds18x
DEFINED SYMBOLS
                            *ABS*:00000000 ds18x20.c
     /tmp/ccRGz2Sy.s:3      *ABS*:0000003f __SREG__
     /tmp/ccRGz2Sy.s:4      *ABS*:0000003e __SP_H__
     /tmp/ccRGz2Sy.s:5      *ABS*:0000003d __SP_L__
     /tmp/ccRGz2Sy.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccRGz2Sy.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccRGz2Sy.s:86     .text:00000000 DS18X20_meas_to_cel
     /tmp/ccRGz2Sy.s:231    .text:000000a4 DS18X20_temp_to_decicel
     /tmp/ccRGz2Sy.s:903    .data:00000000 C.2.1520
     /tmp/ccRGz2Sy.s:349    .text:00000138 DS18X20_temp_cmp
     /tmp/ccRGz2Sy.s:405    .text:00000168 DS18X20_read_meas_single
     /tmp/ccRGz2Sy.s:518    .text:00000214 DS18X20_read_meas
     /tmp/ccRGz2Sy.s:634    .text:000002c8 DS18X20_start_meas
     /tmp/ccRGz2Sy.s:687    .text:00000300 DS18X20_get_power_status
     /tmp/ccRGz2Sy.s:736    .text:00000330 DS18X20_find_sensor
     /tmp/ccRGz2Sy.s:782    .text:00000364 search_sensors
                            *COM*:00000020 gSensorIDs

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
__divmodhi4
ow_command
ow_byte_rd
crc8
ow_reset
ow_input_pin_state
ow_parasite_enable
ow_bit_io
ow_rom_search
