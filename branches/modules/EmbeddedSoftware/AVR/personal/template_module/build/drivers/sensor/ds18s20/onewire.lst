   1               		.file	"onewire.c"
   2               		.arch atmega168
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
  68               	.global	ow_input_pin_state
  70               	ow_input_pin_state:
   1:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /************************************************************************/
   2:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /*                                                                      */
   3:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /*        Access Dallas 1-Wire Device with ATMEL AVRs                   */
   4:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /*                                                                      */
   5:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /*              Author: Peter Dannegger                                 */
   6:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /*                      danni@specs.de                                  */
   7:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /*                                                                      */
   8:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /* modified by Martin Thomas <eversmith@heizung-thomas.de> 9/2004       */
   9:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /************************************************************************/
  10:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  11:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #include <avr/io.h>
  12:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #include <avr/interrupt.h>
  13:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  14:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #include "delay.h"
  15:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #include "onewire.h"
  16:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  17:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #include <config.h>
  18:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  19:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #ifdef OW_ONE_BUS
  20:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  21:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_GET_IN()   ( OW_IN & (1<<OW_PIN))
  22:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_OUT_LOW()  ( OW_OUT &= (~(1 << OW_PIN)) )
  23:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_OUT_HIGH() ( OW_OUT |= (1 << OW_PIN) )
  24:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_DIR_IN()   ( OW_DDR &= (~(1 << OW_PIN )) )
  25:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_DIR_OUT()  ( OW_DDR |= (1 << OW_PIN) )
  26:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  27:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #else
  28:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  29:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /* set bus-config with ow_set_bus() */
  30:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t OW_PIN_MASK; 
  31:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** volatile uint8_t* OW_IN;
  32:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** volatile uint8_t* OW_OUT;
  33:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** volatile uint8_t* OW_DDR;
  34:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  35:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_GET_IN()   ( *OW_IN & OW_PIN_MASK )
  36:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_OUT_LOW()  ( *OW_OUT &= (uint8_t) ~OW_PIN_MASK )
  37:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_OUT_HIGH() ( *OW_OUT |= (uint8_t)  OW_PIN_MASK )
  38:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_DIR_IN()   ( *OW_DDR &= (uint8_t) ~OW_PIN_MASK )
  39:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #define OW_DIR_OUT()  ( *OW_DDR |= (uint8_t)  OW_PIN_MASK )
  40:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** //#define OW_PIN2 PD6
  41:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** //#define OW_DIR_IN2()   ( *OW_DDR &= ~(1 << OW_PIN2 ) )
  42:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  43:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** void ow_set_bus(volatile uint8_t* in,
  44:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	volatile uint8_t* out,
  45:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	volatile uint8_t* ddr,
  46:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t pin)
  47:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
  48:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DDR=ddr;
  49:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_OUT=out;
  50:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_IN=in;
  51:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_PIN_MASK=(1<<pin);
  52:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	ow_reset();
  53:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
  54:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  55:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** #endif
  56:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  57:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t ow_input_pin_state()
  58:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
  72               	.LM0:
  73               	/* prologue: frame size=0 */
  74               	/* prologue end (size=0) */
  59:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	return OW_GET_IN();
  76               	.LM1:
  77 0000 89B1      		in r24,41-0x20
  78 0002 9927      		clr r25
  60:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
  80               	.LM2:
  81 0004 8074      		andi r24,lo8(64)
  82 0006 9070      		andi r25,hi8(64)
  83               	/* epilogue: frame size=0 */
  84 0008 0895      		ret
  85               	/* epilogue end (size=1) */
  86               	/* function ow_input_pin_state size 5 (4) */
  88               	.Lscope0:
  90               	.global	ow_parasite_enable
  92               	ow_parasite_enable:
  61:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  62:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** void ow_parasite_enable(void)
  63:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
  94               	.LM3:
  95               	/* prologue: frame size=0 */
  96               	/* prologue end (size=0) */
  64:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****     OW_OUT_HIGH();
  98               	.LM4:
  99 000a 5E9A      		sbi 43-0x20,6
  65:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DIR_OUT();
 101               	.LM5:
 102 000c 569A      		sbi 42-0x20,6
 103               	/* epilogue: frame size=0 */
 104 000e 0895      		ret
 105               	/* epilogue end (size=1) */
 106               	/* function ow_parasite_enable size 3 (2) */
 108               	.Lscope1:
 110               	.global	ow_parasite_disable
 112               	ow_parasite_disable:
  66:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
  67:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  68:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** void ow_parasite_disable(void)
  69:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
 114               	.LM6:
 115               	/* prologue: frame size=0 */
 116               	/* prologue end (size=0) */
  70:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****     OW_OUT_LOW();
 118               	.LM7:
 119 0010 5E98      		cbi 43-0x20,6
  71:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DIR_IN();
 121               	.LM8:
 122 0012 5698      		cbi 42-0x20,6
 123               	/* epilogue: frame size=0 */
 124 0014 0895      		ret
 125               	/* epilogue end (size=1) */
 126               	/* function ow_parasite_disable size 3 (2) */
 128               	.Lscope2:
 131               	.global	ow_bit_io
 133               	ow_bit_io:
  72:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
  73:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
  74:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t ow_reset(void)
  75:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
  76:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t err;
  77:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t sreg;
  78:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  79:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_OUT_LOW(); // disable internal pull-up (maybe on from parasite)
  80:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DIR_OUT(); // pull OW-Pin low for 480us
  81:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  82:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	delay_us(480);
  83:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  84:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	sreg=SREG;
  85:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	cli();
  86:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  87:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	// set Pin as input - wait for clients to pull low
  88:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DIR_IN(); // input
  89:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  90:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	delay_us(66);
  91:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	err = OW_GET_IN();		// no presence detect
  92:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	// nobody pulled to low, still high
  93:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  94:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	SREG=sreg; // sei()
  95:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
  96:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	// after a delay the clients should release the line
  97:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	// and input-pin gets back to high due to pull-up-resistor
  98:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	delay_us(480-66);
  99:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	if( OW_GET_IN() == 0 )		// short circuit
 100:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		err = 1;
 101:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 102:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	return err;
 103:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
 104:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 105:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** /* Timing issue when using runtime-bus-selection (!OW_ONE_BUS):
 106:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****    The master should sample at the end of the 15-slot after initiating
 107:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****    the read-time-slot. The variable bus-settings need more
 108:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****    cycles than the constant ones so the delays had to be shortened 
 109:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****    to achive a 15uS overall delay 
 110:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****    Setting/clearing a bit in I/O Register needs 1 cyle in OW_ONE_BUS
 111:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****    but around 14 cyles in configureable bus (us-Delay is 4 cyles per uS) */
 112:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t ow_bit_io( uint8_t b )
 113:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
 135               	.LM9:
 136               	/* prologue: frame size=0 */
 137               	/* prologue end (size=0) */
 138 0016 282F      		mov r18,r24
 114:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t sreg;
 115:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 116:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	sreg=SREG;
 140               	.LM10:
 141 0018 3FB7      		in r19,95-0x20
 117:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	cli();
 143               	.LM11:
 144               	/* #APP */
 145 001a F894      		cli
 118:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 119:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DIR_OUT(); // drive bus low
 147               	.LM12:
 148               	/* #NOAPP */
 149 001c 569A      		sbi 42-0x20,6
 150               	.LBB8:
 151               	.LBB9:
 153               	.Ltext1:
   1:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** 
   2:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** #ifndef _delay_h_
   3:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** #define _delay_h_
   4:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** 
   5:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** #include <inttypes.h>
   6:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** #include <avr/io.h>
   7:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** 
   8:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** /* delay function for microsec
   9:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h ****    4 cpu cycles per loop + 1 cycles(?) overhead 
  10:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h ****    when a constant is passed. */
  11:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** static inline void delayloop16(uint16_t count)
  12:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** {
  13:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/delay.h **** 	asm volatile (  "cp  %A0,__zero_reg__ \n\t"  \
 155               	.LM13:
 156 001e 81E0      		ldi r24,lo8(1)
 157 0020 90E0      		ldi r25,hi8(1)
 158               	/* #APP */
 159 0022 8115      		cp  r24,__zero_reg__ 
 160 0024 9105      		cpc r25,__zero_reg__ 
 161 0026 11F0      		breq L_Exit_39       
 162               		L_LOOP_39:           
 163 0028 0197      		sbiw r24,1            
 164 002a F1F7      		brne L_LOOP_39       
 165               		L_Exit_39:           
 166               		
 167               	/* #NOAPP */
 168               	.LBE9:
 169               	.LBE8:
 171               	.Ltext2:
 120:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 121:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	delay_us(1); // Recovery-Time wuffwuff was 1
 122:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	if ( b ) OW_DIR_IN(); // if bit is 1 set bus high (by ext. pull-up)
 173               	.LM14:
 174 002c 2111      		cpse r18,__zero_reg__
 176               	.LM15:
 177 002e 5698      		cbi 42-0x20,6
 178               	.L8:
 179               	.LBB10:
 180               	.LBB11:
 182               	.Ltext3:
 184               	.LM16:
 185 0030 8BE1      		ldi r24,lo8(27)
 186 0032 90E0      		ldi r25,hi8(27)
 187               	/* #APP */
 188 0034 8115      		cp  r24,__zero_reg__ 
 189 0036 9105      		cpc r25,__zero_reg__ 
 190 0038 11F0      		breq L_Exit_52       
 191               		L_LOOP_52:           
 192 003a 0197      		sbiw r24,1            
 193 003c F1F7      		brne L_LOOP_52       
 194               		L_Exit_52:           
 195               		
 196               	/* #NOAPP */
 197               	.LBE11:
 198               	.LBE10:
 200               	.Ltext4:
 123:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		
 124:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	// wuffwuff delay was 15uS-1 see comment above
 125:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	delay_us(15-1-OW_CONF_DELAYOFFSET);
 126:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		
 127:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	if( OW_GET_IN() == 0 ) b = 0;  // sample at end of read-timeslot
 202               	.LM17:
 203 003e 4E9B      		sbis 41-0x20,6
 204 0040 20E0      		ldi r18,lo8(0)
 205               	.L10:
 206               	.LBB12:
 207               	.LBB13:
 209               	.Ltext5:
 211               	.LM18:
 212 0042 89E5      		ldi r24,lo8(89)
 213 0044 90E0      		ldi r25,hi8(89)
 214               	/* #APP */
 215 0046 8115      		cp  r24,__zero_reg__ 
 216 0048 9105      		cpc r25,__zero_reg__ 
 217 004a 11F0      		breq L_Exit_65       
 218               		L_LOOP_65:           
 219 004c 0197      		sbiw r24,1            
 220 004e F1F7      		brne L_LOOP_65       
 221               		L_Exit_65:           
 222               		
 223               	/* #NOAPP */
 224               	.LBE13:
 225               	.LBE12:
 227               	.Ltext6:
 128:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 129:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	delay_us(60-15);
 130:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	OW_DIR_IN();
 229               	.LM19:
 230 0050 5698      		cbi 42-0x20,6
 131:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 132:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	SREG=sreg; // sei();
 232               	.LM20:
 233 0052 3FBF      		out 95-0x20,r19
 133:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 134:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	return b;
 135:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
 235               	.LM21:
 236 0054 822F      		mov r24,r18
 237 0056 9927      		clr r25
 238               	/* epilogue: frame size=0 */
 239 0058 0895      		ret
 240               	/* epilogue end (size=1) */
 241               	/* function ow_bit_io size 70 (69) */
 255               	.Lscope3:
 258               	.global	ow_byte_wr
 260               	ow_byte_wr:
 136:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 137:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 138:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t ow_byte_wr( uint8_t b )
 139:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
 262               	.LM22:
 263               	/* prologue: frame size=0 */
 264 005a 0F93      		push r16
 265 005c 1F93      		push r17
 266               	/* prologue end (size=2) */
 267 005e 182F      		mov r17,r24
 268 0060 08E0      		ldi r16,lo8(8)
 269               	.L14:
 140:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t i = 8, j;
 141:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 142:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	do {
 143:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		j = ow_bit_io( b & 1 );
 271               	.LM23:
 272 0062 812F      		mov r24,r17
 273 0064 8170      		andi r24,lo8(1)
 274 0066 0E94 0000 		call ow_bit_io
 144:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		b >>= 1;
 276               	.LM24:
 277 006a 1695      		lsr r17
 145:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		if( j ) b |= 0x80;
 279               	.LM25:
 280 006c 8111      		cpse r24,__zero_reg__
 281 006e 1068      		ori r17,lo8(-128)
 282               	.L15:
 146:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	} while( --i );
 284               	.LM26:
 285 0070 0150      		subi r16,lo8(-(-1))
 286 0072 B9F7      		brne .L14
 147:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 148:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	return b;
 149:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
 288               	.LM27:
 289 0074 812F      		mov r24,r17
 290 0076 9927      		clr r25
 291               	/* epilogue: frame size=0 */
 292 0078 1F91      		pop r17
 293 007a 0F91      		pop r16
 294 007c 0895      		ret
 295               	/* epilogue end (size=3) */
 296               	/* function ow_byte_wr size 20 (15) */
 301               	.Lscope4:
 303               	.global	ow_byte_rd
 305               	ow_byte_rd:
 150:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 151:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 152:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t ow_byte_rd( void )
 153:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
 307               	.LM28:
 308               	/* prologue: frame size=0 */
 309               	/* prologue end (size=0) */
 154:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****   // read by sending 0xff (a dontcare?)
 155:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c ****   return ow_byte_wr( 0xFF ); 
 311               	.LM29:
 312 007e 8FEF      		ldi r24,lo8(-1)
 313 0080 0E94 0000 		call ow_byte_wr
 156:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
 315               	.LM30:
 316 0084 9927      		clr r25
 317               	/* epilogue: frame size=0 */
 318 0086 0895      		ret
 319               	/* epilogue end (size=1) */
 320               	/* function ow_byte_rd size 5 (4) */
 322               	.Lscope5:
 324               	.global	ow_reset
 326               	ow_reset:
 328               	.LM31:
 329               	/* prologue: frame size=0 */
 330               	/* prologue end (size=0) */
 332               	.LM32:
 333 0088 5E98      		cbi 43-0x20,6
 335               	.LM33:
 336 008a 569A      		sbi 42-0x20,6
 337               	.LBB20:
 338               	.LBB21:
 340               	.Ltext7:
 342               	.LM34:
 343 008c 8FEB      		ldi r24,lo8(959)
 344 008e 93E0      		ldi r25,hi8(959)
 345               	/* #APP */
 346 0090 8115      		cp  r24,__zero_reg__ 
 347 0092 9105      		cpc r25,__zero_reg__ 
 348 0094 11F0      		breq L_Exit_124       
 349               		L_LOOP_124:           
 350 0096 0197      		sbiw r24,1            
 351 0098 F1F7      		brne L_LOOP_124       
 352               		L_Exit_124:           
 353               		
 354               	/* #NOAPP */
 355               	.LBE21:
 356               	.LBE20:
 358               	.Ltext8:
 360               	.LM35:
 361 009a 2FB7      		in r18,95-0x20
 363               	.LM36:
 364               	/* #APP */
 365 009c F894      		cli
 367               	.LM37:
 368               	/* #NOAPP */
 369 009e 5698      		cbi 42-0x20,6
 370               	.LBB22:
 371               	.LBB23:
 373               	.Ltext9:
 375               	.LM38:
 376 00a0 83E8      		ldi r24,lo8(131)
 377 00a2 90E0      		ldi r25,hi8(131)
 378               	/* #APP */
 379 00a4 8115      		cp  r24,__zero_reg__ 
 380 00a6 9105      		cpc r25,__zero_reg__ 
 381 00a8 11F0      		breq L_Exit_137       
 382               		L_LOOP_137:           
 383 00aa 0197      		sbiw r24,1            
 384 00ac F1F7      		brne L_LOOP_137       
 385               		L_Exit_137:           
 386               		
 387               	/* #NOAPP */
 388               	.LBE23:
 389               	.LBE22:
 391               	.Ltext10:
 393               	.LM39:
 394 00ae 39B1      		in r19,41-0x20
 396               	.LM40:
 397 00b0 2FBF      		out 95-0x20,r18
 398               	.LBB24:
 399               	.LBB25:
 401               	.Ltext11:
 403               	.LM41:
 404 00b2 8BE3      		ldi r24,lo8(827)
 405 00b4 93E0      		ldi r25,hi8(827)
 406               	/* #APP */
 407 00b6 8115      		cp  r24,__zero_reg__ 
 408 00b8 9105      		cpc r25,__zero_reg__ 
 409 00ba 11F0      		breq L_Exit_148       
 410               		L_LOOP_148:           
 411 00bc 0197      		sbiw r24,1            
 412 00be F1F7      		brne L_LOOP_148       
 413               		L_Exit_148:           
 414               		
 415               	/* #NOAPP */
 416               	.LBE25:
 417               	.LBE24:
 419               	.Ltext12:
 421               	.LM42:
 422 00c0 4E99      		sbic 41-0x20,6
 423 00c2 02C0      		rjmp .L24
 425               	.LM43:
 426 00c4 81E0      		ldi r24,lo8(1)
 427 00c6 02C0      		rjmp .L26
 428               	.L24:
 430               	.LM44:
 431 00c8 832F      		mov r24,r19
 432 00ca 8074      		andi r24,lo8(64)
 433               	.L26:
 435               	.LM45:
 436 00cc 9927      		clr r25
 437               	/* epilogue: frame size=0 */
 438 00ce 0895      		ret
 439               	/* epilogue end (size=1) */
 440               	/* function ow_reset size 70 (69) */
 455               	.Lscope6:
 459               	.global	ow_command
 461               	ow_command:
 157:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 158:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 159:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** uint8_t ow_rom_search( uint8_t diff, uint8_t *id )
 160:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
 161:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t i, j, next_diff;
 162:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t b;
 163:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 164:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	if( ow_reset() ) return OW_PRESENCE_ERR;	// error, no device found
 165:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 166:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	ow_byte_wr( OW_SEARCH_ROM );			// ROM search command
 167:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	next_diff = OW_LAST_DEVICE;			// unchanged on last device
 168:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 169:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	i = OW_ROMCODE_SIZE * 8;					// 8 bytes
 170:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 171:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	do {
 172:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		j = 8;					// 8 bits
 173:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		do {
 174:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			b = ow_bit_io( 1 );			// read bit
 175:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			if( ow_bit_io( 1 ) ) {			// read complement bit
 176:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 				if( b )					// 11
 177:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 				return OW_DATA_ERR;			// data error
 178:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			}
 179:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			else {
 180:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 				if( !b ) {				// 00 = 2 devices
 181:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 					if( diff > i || ((*id & 1) && diff != i) ) {
 182:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 					b = 1;				// now 1
 183:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 					next_diff = i;			// next pass 0
 184:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 					}
 185:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 				}
 186:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			}
 187:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			ow_bit_io( b );     			// write bit
 188:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			*id >>= 1;
 189:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			if( b ) *id |= 0x80;			// store bit
 190:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			
 191:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			i--;
 192:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			
 193:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		} while( --j );
 194:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		
 195:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		id++;					// next byte
 196:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 197:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	} while( i );
 198:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 199:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	return next_diff;				// to continue search
 200:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** }
 201:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 202:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 203:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** void ow_command( uint8_t command, uint8_t *id )
 204:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** {
 463               	.LM46:
 464               	/* prologue: frame size=0 */
 465 00d0 0F93      		push r16
 466 00d2 1F93      		push r17
 467 00d4 CF93      		push r28
 468 00d6 DF93      		push r29
 469               	/* prologue end (size=4) */
 470 00d8 082F      		mov r16,r24
 471 00da EB01      		movw r28,r22
 205:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	uint8_t i;
 206:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 207:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	ow_reset();
 473               	.LM47:
 474 00dc 0E94 0000 		call ow_reset
 208:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 
 209:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	if( id ) {
 476               	.LM48:
 477 00e0 2097      		sbiw r28,0
 478 00e2 51F0      		breq .L29
 210:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		ow_byte_wr( OW_MATCH_ROM );			// to a single device
 480               	.LM49:
 481 00e4 85E5      		ldi r24,lo8(85)
 482 00e6 0E94 0000 		call ow_byte_wr
 483 00ea 18E0      		ldi r17,lo8(8)
 484               	.L31:
 211:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		i = OW_ROMCODE_SIZE;
 212:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		do {
 213:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			ow_byte_wr( *id );
 486               	.LM50:
 487 00ec 8991      		ld r24,Y+
 488 00ee 0E94 0000 		call ow_byte_wr
 214:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 			id++;
 215:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		} while( --i );
 490               	.LM51:
 491 00f2 1150      		subi r17,lo8(-(-1))
 492 00f4 21F0      		breq .L32
 493 00f6 FACF      		rjmp .L31
 494               	.L29:
 216:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	} 
 217:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	else {
 218:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 		ow_byte_wr( OW_SKIP_ROM );			// to all devices
 496               	.LM52:
 497 00f8 8CEC      		ldi r24,lo8(-52)
 498 00fa 0E94 0000 		call ow_byte_wr
 499               	.L32:
 219:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	}
 220:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	
 221:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewire.c **** 	ow_byte_wr( command );
 501               	.LM53:
 502 00fe 802F      		mov r24,r16
 503 0100 0E94 0000 		call ow_byte_wr
 504               	/* epilogue: frame size=0 */
 505 0104 DF91      		pop r29
 506 0106 CF91      		pop r28
 507 0108 1F91      		pop r17
 508 010a 0F91      		pop r16
 509 010c 0895      		ret
 510               	/* epilogue end (size=5) */
 511               	/* function ow_command size 32 (23) */
 516               	.Lscope7:
 520               	.global	ow_rom_search
 522               	ow_rom_search:
 524               	.LM54:
 525               	/* prologue: frame size=0 */
 526 010e DF92      		push r13
 527 0110 EF92      		push r14
 528 0112 FF92      		push r15
 529 0114 0F93      		push r16
 530 0116 1F93      		push r17
 531 0118 CF93      		push r28
 532 011a DF93      		push r29
 533               	/* prologue end (size=7) */
 534 011c E82E      		mov r14,r24
 535 011e EB01      		movw r28,r22
 537               	.LM55:
 538 0120 0E94 0000 		call ow_reset
 539 0124 8823      		tst r24
 540 0126 19F0      		breq .L36
 542               	.LM56:
 543 0128 8FEF      		ldi r24,lo8(255)
 544 012a 90E0      		ldi r25,hi8(255)
 545 012c 37C0      		rjmp .L38
 546               	.L36:
 548               	.LM57:
 549 012e 80EF      		ldi r24,lo8(-16)
 550 0130 0E94 0000 		call ow_byte_wr
 551 0134 00E4      		ldi r16,lo8(64)
 552 0136 DD24      		clr r13
 553               	.L39:
 554 0138 88E0      		ldi r24,lo8(8)
 555 013a F82E      		mov r15,r24
 556               	.L40:
 558               	.LM58:
 559 013c 81E0      		ldi r24,lo8(1)
 560 013e 0E94 0000 		call ow_bit_io
 561 0142 182F      		mov r17,r24
 563               	.LM59:
 564 0144 81E0      		ldi r24,lo8(1)
 565 0146 0E94 0000 		call ow_bit_io
 566 014a 8823      		tst r24
 567 014c 29F0      		breq .L41
 569               	.LM60:
 570 014e 1123      		tst r17
 571 0150 61F0      		breq .L43
 572 0152 8EEF      		ldi r24,lo8(254)
 573 0154 90E0      		ldi r25,hi8(254)
 574 0156 22C0      		rjmp .L38
 575               	.L41:
 577               	.LM61:
 578 0158 1123      		tst r17
 579 015a C9F4      		brne .L45
 581               	.LM62:
 582 015c 0E15      		cp r16,r14
 583 015e A8F0      		brlo .L47
 584 0160 8881      		ld r24,Y
 585 0162 80FF      		sbrs r24,0
 586 0164 02C0      		rjmp .L43
 587 0166 E016      		cp r14,r16
 588 0168 81F4      		brne .L47
 589               	.L43:
 591               	.LM63:
 592 016a 80E0      		ldi r24,lo8(0)
 593 016c 0E94 0000 		call ow_bit_io
 595               	.LM64:
 596 0170 8881      		ld r24,Y
 597 0172 8695      		lsr r24
 598               	.L57:
 599 0174 8883      		st Y,r24
 601               	.LM65:
 602 0176 0150      		subi r16,lo8(-(-1))
 604               	.LM66:
 605 0178 FA94      		dec r15
 606 017a 01F7      		brne .L40
 608               	.LM67:
 609 017c 0023      		tst r16
 610 017e 11F0      		breq .L52
 612               	.LM68:
 613 0180 2196      		adiw r28,1
 614 0182 DACF      		rjmp .L39
 615               	.L52:
 617               	.LM69:
 618 0184 8D2D      		mov r24,r13
 619 0186 9927      		clr r25
 620 0188 09C0      		rjmp .L38
 621               	.L47:
 622 018a D02E      		mov r13,r16
 623 018c 11E0      		ldi r17,lo8(1)
 624               	.L45:
 626               	.LM70:
 627 018e 812F      		mov r24,r17
 628 0190 0E94 0000 		call ow_bit_io
 630               	.LM71:
 631 0194 8881      		ld r24,Y
 632 0196 8695      		lsr r24
 634               	.LM72:
 635 0198 8068      		ori r24,lo8(-128)
 636 019a ECCF      		rjmp .L57
 637               	.L38:
 638               	/* epilogue: frame size=0 */
 639 019c DF91      		pop r29
 640 019e CF91      		pop r28
 641 01a0 1F91      		pop r17
 642 01a2 0F91      		pop r16
 643 01a4 FF90      		pop r15
 644 01a6 EF90      		pop r14
 645 01a8 DF90      		pop r13
 646 01aa 0895      		ret
 647               	/* epilogue end (size=8) */
 648               	/* function ow_rom_search size 80 (65) */
 656               	.Lscope8:
 658               	.Letext0:
 659               	/* File "/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/sensor/ds18s20/onewi
DEFINED SYMBOLS
                            *ABS*:00000000 onewire.c
     /tmp/ccSqWzYC.s:3      *ABS*:0000003f __SREG__
     /tmp/ccSqWzYC.s:4      *ABS*:0000003e __SP_H__
     /tmp/ccSqWzYC.s:5      *ABS*:0000003d __SP_L__
     /tmp/ccSqWzYC.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccSqWzYC.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccSqWzYC.s:70     .text:00000000 ow_input_pin_state
     /tmp/ccSqWzYC.s:92     .text:0000000a ow_parasite_enable
     /tmp/ccSqWzYC.s:112    .text:00000010 ow_parasite_disable
     /tmp/ccSqWzYC.s:133    .text:00000016 ow_bit_io
     /tmp/ccSqWzYC.s:165    .text:0000002c L_Exit_39
     /tmp/ccSqWzYC.s:162    .text:00000028 L_LOOP_39
     /tmp/ccSqWzYC.s:194    .text:0000003e L_Exit_52
     /tmp/ccSqWzYC.s:191    .text:0000003a L_LOOP_52
     /tmp/ccSqWzYC.s:221    .text:00000050 L_Exit_65
     /tmp/ccSqWzYC.s:218    .text:0000004c L_LOOP_65
     /tmp/ccSqWzYC.s:260    .text:0000005a ow_byte_wr
     /tmp/ccSqWzYC.s:305    .text:0000007e ow_byte_rd
     /tmp/ccSqWzYC.s:326    .text:00000088 ow_reset
     /tmp/ccSqWzYC.s:352    .text:0000009a L_Exit_124
     /tmp/ccSqWzYC.s:349    .text:00000096 L_LOOP_124
     /tmp/ccSqWzYC.s:385    .text:000000ae L_Exit_137
     /tmp/ccSqWzYC.s:382    .text:000000aa L_LOOP_137
     /tmp/ccSqWzYC.s:413    .text:000000c0 L_Exit_148
     /tmp/ccSqWzYC.s:410    .text:000000bc L_LOOP_148
     /tmp/ccSqWzYC.s:461    .text:000000d0 ow_command
     /tmp/ccSqWzYC.s:522    .text:0000010e ow_rom_search

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
