   1               		.file	"timer.c"
   2               		.arch atmega168
   3               	__SREG__ = 0x3f
   4               	__SP_H__ = 0x3e
   5               	__SP_L__ = 0x3d
   6               	__tmp_reg__ = 0
   7               	__zero_reg__ = 1
   8               		.global __do_copy_data
   9               		.global __do_clear_bss
  11               		.text
  12               	.Ltext0:
  67               	.global	__vector_7
  69               	__vector_7:
   1:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /**
   2:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * Timer software module. Utilizes a hardware timer to provide a number of
   3:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * software timers to the application. Each timer can be set to either one-shot
   4:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * or free-running mode.
   5:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * 
   6:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * @author	Andreas Fritiofson
   7:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * 
   8:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * @date	2007-07-13
   9:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  */
  10:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  11:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*-----------------------------------------------------------------------------
  12:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * Includes
  13:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  *---------------------------------------------------------------------------*/
  14:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #include <inttypes.h>
  15:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #include <avr/io.h>
  16:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #include <avr/interrupt.h>
  17:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  18:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #include <drivers/timer/timer.h>
  19:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #include "timer_cfg.h"
  20:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  21:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  22:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*-----------------------------------------------------------------------------
  23:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * Globals
  24:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  *---------------------------------------------------------------------------*/
  25:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** volatile uint32_t ticks;
  26:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  27:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** struct {
  28:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	uint16_t timeout;
  29:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	uint16_t reload;
  30:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	unsigned char expired;
  31:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	timerCallback_t callback;
  32:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** } timers[TIMER_NUM_TIMERS];
  33:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  34:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*-----------------------------------------------------------------------------
  35:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * Interrupt Service Routines
  36:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  *---------------------------------------------------------------------------*/
  37:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** ISR(TIMER_VECTOR)
  38:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** {
  71               	.LM0:
  72               	/* prologue: frame size=0 */
  73 0000 1F92      		push __zero_reg__
  74 0002 0F92      		push __tmp_reg__
  75 0004 0FB6      		in __tmp_reg__,__SREG__
  76 0006 0F92      		push __tmp_reg__
  77 0008 1124      		clr __zero_reg__
  78 000a 0F93      		push r16
  79 000c 1F93      		push r17
  80 000e 2F93      		push r18
  81 0010 3F93      		push r19
  82 0012 4F93      		push r20
  83 0014 5F93      		push r21
  84 0016 6F93      		push r22
  85 0018 7F93      		push r23
  86 001a 8F93      		push r24
  87 001c 9F93      		push r25
  88 001e AF93      		push r26
  89 0020 BF93      		push r27
  90 0022 CF93      		push r28
  91 0024 DF93      		push r29
  92 0026 EF93      		push r30
  93 0028 FF93      		push r31
  94               	/* prologue end (size=21) */
  39:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	uint8_t t;
  40:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #if defined(TIMER_RELOAD)
  41:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* The hw timer does not support auto-reload so set the count manually. */
  42:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	TIMER_RELOAD(TIMER_COUNTS_PER_TICK);
  43:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #endif
  44:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  45:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* Increase the global tick count. */
  46:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	ticks++;
  96               	.LM1:
  97 002a 8091 0000 		lds r24,ticks
  98 002e 9091 0000 		lds r25,(ticks)+1
  99 0032 A091 0000 		lds r26,(ticks)+2
 100 0036 B091 0000 		lds r27,(ticks)+3
 101 003a 0196      		adiw r24,1
 102 003c A11D      		adc r26,__zero_reg__
 103 003e B11D      		adc r27,__zero_reg__
 104 0040 8093 0000 		sts ticks,r24
 105 0044 9093 0000 		sts (ticks)+1,r25
 106 0048 A093 0000 		sts (ticks)+2,r26
 107 004c B093 0000 		sts (ticks)+3,r27
 108 0050 00E0      		ldi r16,lo8(0)
 109 0052 10E0      		ldi r17,hi8(0)
 110 0054 C0E0      		ldi r28,lo8(timers)
 111 0056 D0E0      		ldi r29,hi8(timers)
 112               	.L2:
  47:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	
  48:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* Decrease the timeout of all active timers and check if any have
  49:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	 * expired. */
  50:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	for (t = 0; t < TIMER_NUM_TIMERS; t++)
  51:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	{
  52:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		if ((timers[t].timeout > 0) && (--timers[t].timeout == 0))
 114               	.LM2:
 115 0058 8881      		ld r24,Y
 116 005a 9981      		ldd r25,Y+1
 117 005c 0097      		sbiw r24,0
 118 005e 89F0      		breq .L3
 119 0060 0197      		sbiw r24,1
 120 0062 9983      		std Y+1,r25
 121 0064 8883      		st Y,r24
 122 0066 892B      		or r24,r25
 123 0068 61F4      		brne .L3
  53:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		{
  54:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 			timers[t].expired = 1;
 125               	.LM3:
 126 006a 81E0      		ldi r24,lo8(1)
 127 006c 8C83      		std Y+4,r24
  55:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 			timers[t].timeout = timers[t].reload;
 129               	.LM4:
 130 006e 8A81      		ldd r24,Y+2
 131 0070 9B81      		ldd r25,Y+3
 132 0072 9983      		std Y+1,r25
 133 0074 8883      		st Y,r24
  56:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 			/* Call the callback, if any. */
  57:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 			if (timers[t].callback) timers[t].callback(t);
 135               	.LM5:
 136 0076 ED81      		ldd r30,Y+5
 137 0078 FE81      		ldd r31,Y+6
 138 007a 3097      		sbiw r30,0
 139 007c 11F0      		breq .L3
 140 007e 802F      		mov r24,r16
 141 0080 0995      		icall
 142               	.L3:
 143 0082 0F5F      		subi r16,lo8(-(1))
 144 0084 1F4F      		sbci r17,hi8(-(1))
 145 0086 2796      		adiw r28,7
 147               	.LM6:
 148 0088 0330      		cpi r16,3
 149 008a 1105      		cpc r17,__zero_reg__
 150 008c 29F7      		brne .L2
 151               	/* epilogue: frame size=0 */
 152 008e FF91      		pop r31
 153 0090 EF91      		pop r30
 154 0092 DF91      		pop r29
 155 0094 CF91      		pop r28
 156 0096 BF91      		pop r27
 157 0098 AF91      		pop r26
 158 009a 9F91      		pop r25
 159 009c 8F91      		pop r24
 160 009e 7F91      		pop r23
 161 00a0 6F91      		pop r22
 162 00a2 5F91      		pop r21
 163 00a4 4F91      		pop r20
 164 00a6 3F91      		pop r19
 165 00a8 2F91      		pop r18
 166 00aa 1F91      		pop r17
 167 00ac 0F91      		pop r16
 168 00ae 0F90      		pop __tmp_reg__
 169 00b0 0FBE      		out __SREG__,__tmp_reg__
 170 00b2 0F90      		pop __tmp_reg__
 171 00b4 1F90      		pop __zero_reg__
 172 00b6 1895      		reti
 173               	/* epilogue end (size=21) */
 174               	/* function __vector_7 size 92 (50) */
 176               	.Lscope0:
 178               	.global	Timer_Init
 180               	Timer_Init:
  58:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		}
  59:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	}
  60:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** }
  61:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  62:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  63:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*-----------------------------------------------------------------------------
  64:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  * Public Functions
  65:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c ****  *---------------------------------------------------------------------------*/
  66:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  67:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** void Timer_Init()
  68:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** {
 182               	.LM7:
 183               	/* prologue: frame size=0 */
 184               	/* prologue end (size=0) */
  69:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* Do basic setup of the timer hw, including interrupts. */
  70:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	TIMER_INIT();
 186               	.LM8:
 187 00b8 82E0      		ldi r24,lo8(2)
 188 00ba 8093 B000 		sts 176,r24
 189 00be 87BB      		out 55-0x20,r24
 190 00c0 E0E7      		ldi r30,lo8(112)
 191 00c2 F0E0      		ldi r31,hi8(112)
 192 00c4 8081      		ld r24,Z
 193 00c6 8260      		ori r24,lo8(2)
 194 00c8 8083      		st Z,r24
  71:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #if defined(TIMER_RELOAD)
  72:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* The hw timer does not support auto-reload so set the count manually. */
  73:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	TIMER_RELOAD(TIMER_COUNTS_PER_TICK);
  74:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #endif
  75:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #if defined(TIMER_COMPARE_REG)
  76:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* The hw timer has a compare match module so use it for auto-reload. */
  77:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	TIMER_COMPARE_REG = TIMER_COUNTS_PER_TICK;
 196               	.LM9:
 197 00ca 8CE7      		ldi r24,lo8(124)
 198 00cc 8093 B300 		sts 179,r24
  78:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** #endif
  79:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	/* Finalize hw setup and start the timer by setting its prescaler. */
  80:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	TIMER_SET_PRESCALER();
 200               	.LM10:
 201 00d0 84E0      		ldi r24,lo8(4)
 202 00d2 8093 B100 		sts 177,r24
 203               	/* epilogue: frame size=0 */
 204 00d6 0895      		ret
 205               	/* epilogue end (size=1) */
 206               	/* function Timer_Init size 16 (15) */
 208               	.Lscope1:
 210               	.global	Timer_GetTicks
 212               	Timer_GetTicks:
  81:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** }
  82:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  83:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*---------------------------------------------------------------------------*/
  84:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  85:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** uint32_t Timer_GetTicks()
  86:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** {
 214               	.LM11:
 215               	/* prologue: frame size=0 */
 216               	/* prologue end (size=0) */
  87:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	uint32_t res;
  88:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	uint8_t sreg = SREG;
 218               	.LM12:
 219 00d8 2FB7      		in r18,95-0x20
  89:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	cli();
 221               	.LM13:
 222               	/* #APP */
 223 00da F894      		cli
  90:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	res = ticks;
 225               	.LM14:
 226               	/* #NOAPP */
 227 00dc 6091 0000 		lds r22,ticks
 228 00e0 7091 0000 		lds r23,(ticks)+1
 229 00e4 8091 0000 		lds r24,(ticks)+2
 230 00e8 9091 0000 		lds r25,(ticks)+3
  91:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	SREG = sreg;
 232               	.LM15:
 233 00ec 2FBF      		out 95-0x20,r18
 234               	/* epilogue: frame size=0 */
 235 00ee 0895      		ret
 236               	/* epilogue end (size=1) */
 237               	/* function Timer_GetTicks size 13 (12) */
 243               	.Lscope2:
 249               	.global	Timer_SetTimeout
 251               	Timer_SetTimeout:
  92:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	return res;
  93:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** }
  94:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  95:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*---------------------------------------------------------------------------*/
  96:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
  97:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** void Timer_SetTimeout(uint8_t timer, uint16_t timeout, uint8_t type, timerCallback_t callback)
  98:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** {
 253               	.LM16:
 254               	/* prologue: frame size=0 */
 255               	/* prologue end (size=0) */
  99:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	if (timer<TIMER_NUM_TIMERS)
 257               	.LM17:
 258 00f0 8330      		cpi r24,lo8(3)
 259 00f2 20F5      		brsh .L21
 260               	.LBB2:
 100:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	{
 101:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		uint8_t sreg = SREG;
 262               	.LM18:
 263 00f4 5FB7      		in r21,95-0x20
 102:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		cli();
 265               	.LM19:
 266               	/* #APP */
 267 00f6 F894      		cli
 103:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		timers[timer].expired = 0;
 269               	.LM20:
 270               	/* #NOAPP */
 271 00f8 9927      		clr r25
 272 00fa FC01      		movw r30,r24
 273 00fc A3E0      		ldi r26,3
 274 00fe EE0F      	1:	lsl r30
 275 0100 FF1F      		rol r31
 276 0102 AA95      		dec r26
 277 0104 E1F7      		brne 1b
 278 0106 E81B      		sub r30,r24
 279 0108 F90B      		sbc r31,r25
 280 010a E050      		subi r30,lo8(-(timers))
 281 010c F040      		sbci r31,hi8(-(timers))
 282 010e 1482      		std Z+4,__zero_reg__
 104:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		timers[timer].timeout = timeout;
 284               	.LM21:
 285 0110 7183      		std Z+1,r23
 286 0112 6083      		st Z,r22
 105:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		if (type == TimerTypeFreeRunning)
 288               	.LM22:
 289 0114 4130      		cpi r20,lo8(1)
 290 0116 19F4      		brne .L18
 106:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 			timers[timer].reload = timeout;
 292               	.LM23:
 293 0118 7383      		std Z+3,r23
 294 011a 6283      		std Z+2,r22
 295 011c 02C0      		rjmp .L20
 296               	.L18:
 107:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		else
 108:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 			timers[timer].reload = 0;
 298               	.LM24:
 299 011e 1382      		std Z+3,__zero_reg__
 300 0120 1282      		std Z+2,__zero_reg__
 301               	.L20:
 109:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		timers[timer].callback = callback;
 303               	.LM25:
 304 0122 FC01      		movw r30,r24
 305 0124 43E0      		ldi r20,3
 306 0126 EE0F      	1:	lsl r30
 307 0128 FF1F      		rol r31
 308 012a 4A95      		dec r20
 309 012c E1F7      		brne 1b
 310 012e E81B      		sub r30,r24
 311 0130 F90B      		sbc r31,r25
 312 0132 E050      		subi r30,lo8(-(timers))
 313 0134 F040      		sbci r31,hi8(-(timers))
 314 0136 3683      		std Z+6,r19
 315 0138 2583      		std Z+5,r18
 110:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		SREG = sreg;
 317               	.LM26:
 318 013a 5FBF      		out 95-0x20,r21
 319               	.L21:
 320 013c 0895      		ret
 321               	.LBE2:
 322               	/* epilogue: frame size=0 */
 323               	/* epilogue: noreturn */
 324               	/* epilogue end (size=0) */
 325               	/* function Timer_SetTimeout size 40 (40) */
 330               	.Lscope3:
 333               	.global	Timer_Expired
 335               	Timer_Expired:
 111:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	}
 112:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** }
 113:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
 114:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** /*---------------------------------------------------------------------------*/
 115:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 
 116:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** uint8_t Timer_Expired(uint8_t timer)
 117:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** {
 337               	.LM27:
 338               	/* prologue: frame size=0 */
 339               	/* prologue end (size=0) */
 118:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	if ((timer<TIMER_NUM_TIMERS) && (timers[timer].expired))
 341               	.LM28:
 342 013e 8330      		cpi r24,lo8(3)
 343 0140 90F4      		brsh .L23
 345               	.LM29:
 346 0142 9927      		clr r25
 347 0144 FC01      		movw r30,r24
 348 0146 B3E0      		ldi r27,3
 349 0148 EE0F      	1:	lsl r30
 350 014a FF1F      		rol r31
 351 014c BA95      		dec r27
 352 014e E1F7      		brne 1b
 353 0150 E81B      		sub r30,r24
 354 0152 F90B      		sbc r31,r25
 355 0154 E050      		subi r30,lo8(-(timers))
 356 0156 F040      		sbci r31,hi8(-(timers))
 357 0158 8481      		ldd r24,Z+4
 358 015a 8823      		tst r24
 359 015c 21F0      		breq .L23
 119:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	{
 120:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		timers[timer].expired = 0;
 361               	.LM30:
 362 015e 1482      		std Z+4,__zero_reg__
 363 0160 81E0      		ldi r24,lo8(1)
 364 0162 90E0      		ldi r25,hi8(1)
 365 0164 0895      		ret
 366               	.L23:
 121:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 		return 1;
 368               	.LM31:
 369 0166 80E0      		ldi r24,lo8(0)
 370 0168 90E0      		ldi r25,hi8(0)
 122:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	}
 123:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** 	return 0;
 124:/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c **** }
 372               	.LM32:
 373 016a 0895      		ret
 374               	/* epilogue: frame size=0 */
 375               	/* epilogue: noreturn */
 376               	/* epilogue end (size=0) */
 377               	/* function Timer_Expired size 23 (23) */
 379               	.Lscope4:
 380               		.comm ticks,4,1
 381               		.comm timers,21,1
 385               	.Letext0:
 386               	/* File "/home/linus/HomeAutomation/trunk/EmbeddedSoftware/AVR/avr-lib/drivers/timer/timer.c": code
DEFINED SYMBOLS
                            *ABS*:00000000 timer.c
     /tmp/ccLaknfp.s:3      *ABS*:0000003f __SREG__
     /tmp/ccLaknfp.s:4      *ABS*:0000003e __SP_H__
     /tmp/ccLaknfp.s:5      *ABS*:0000003d __SP_L__
     /tmp/ccLaknfp.s:6      *ABS*:00000000 __tmp_reg__
     /tmp/ccLaknfp.s:7      *ABS*:00000001 __zero_reg__
     /tmp/ccLaknfp.s:69     .text:00000000 __vector_7
                            *COM*:00000004 ticks
                            *COM*:00000015 timers
     /tmp/ccLaknfp.s:180    .text:000000b8 Timer_Init
     /tmp/ccLaknfp.s:212    .text:000000d8 Timer_GetTicks
     /tmp/ccLaknfp.s:251    .text:000000f0 Timer_SetTimeout
     /tmp/ccLaknfp.s:335    .text:0000013e Timer_Expired

UNDEFINED SYMBOLS
__do_copy_data
__do_clear_bss
